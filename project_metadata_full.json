[
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\conftest.py",
    "imports": [
      "import os"
    ],
    "functions": []
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\consts.py",
    "imports": [
      "import os"
    ],
    "functions": []
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\dxf_converter.py",
    "imports": [
      "import logging",
      "import pathlib",
      "import re",
      "from ezdxf.entities.dxfgfx import DXFGraphic",
      "from ezdxf.entities.line import Line",
      "from ezdxf.entities.lwpolyline import LWPolyline",
      "from ezdxf.entities.polyline import Polyline",
      "from ezdxf.filemanagement import readfile",
      "from app.geo_utils import local_to_global"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\dxf_converter.py",
        "module": "dxf_converter",
        "class_name": "DXFConverter",
        "function_name": "__init__",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "anchor_lat",
            "type": "float"
          },
          {
            "name": "anchor_lon",
            "type": "float"
          },
          {
            "name": "anchor_height",
            "type": "float | None"
          }
        ],
        "return_type": "None",
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 22,
        "line_end": 25
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\dxf_converter.py",
        "module": "dxf_converter",
        "class_name": "DXFConverter",
        "function_name": "convert_coords",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "x",
            "type": "float"
          },
          {
            "name": "y",
            "type": "float"
          },
          {
            "name": "z",
            "type": "float | None",
            "default": "None"
          }
        ],
        "return_type": "tuple[float, float, float | None]",
        "returns": [
          "(lat, lon, alt)"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "local_to_global"
        ],
        "line_start": 27,
        "line_end": 31
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\dxf_converter.py",
        "module": "dxf_converter",
        "class_name": "DXFConverter",
        "function_name": "safe_geojson_coords",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "x",
            "type": "float"
          },
          {
            "name": "y",
            "type": "float"
          },
          {
            "name": "z",
            "type": "float | None"
          }
        ],
        "return_type": "tuple[float, float] | tuple[float, float, float]",
        "returns": [
          "(y, x, z)"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 33,
        "line_end": 41
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\dxf_converter.py",
        "module": "dxf_converter",
        "class_name": "DXFConverter",
        "function_name": "extract_elevation_from_str",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "layer_name",
            "type": "str"
          }
        ],
        "return_type": "float | None",
        "returns": [
          "None"
        ],
        "docstring": "Extract elevation from layer name",
        "decorators": [],
        "is_public": true,
        "calls": [
          "search",
          "float",
          "group"
        ],
        "line_start": 43,
        "line_end": 50
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\dxf_converter.py",
        "module": "dxf_converter",
        "class_name": "DXFConverter",
        "function_name": "process_line",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "line",
            "type": "Line"
          },
          {
            "name": "layer_name",
            "type": "str"
          },
          {
            "name": "elevation",
            "type": "float | None"
          }
        ],
        "return_type": "dict",
        "returns": [
          "feature"
        ],
        "docstring": "Process LINE entity",
        "decorators": [],
        "is_public": true,
        "calls": [
          "convert_coords",
          "safe_geojson_coords"
        ],
        "line_start": 52,
        "line_end": 71
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\dxf_converter.py",
        "module": "dxf_converter",
        "class_name": "DXFConverter",
        "function_name": "process_polyline",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "polyline",
            "type": "Polyline"
          },
          {
            "name": "layer_name",
            "type": "str"
          },
          {
            "name": "elevation",
            "type": "float | None"
          }
        ],
        "return_type": "dict | None",
        "returns": [
          "feature"
        ],
        "docstring": "Process POLYLINE entity",
        "decorators": [],
        "is_public": true,
        "calls": [
          "append",
          "len",
          "convert_coords",
          "safe_geojson_coords"
        ],
        "line_start": 73,
        "line_end": 95
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\dxf_converter.py",
        "module": "dxf_converter",
        "class_name": "DXFConverter",
        "function_name": "process_lwpolyline",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "lwpolyline",
            "type": "LWPolyline"
          },
          {
            "name": "layer_name",
            "type": "str"
          },
          {
            "name": "elevation",
            "type": "float | None"
          }
        ],
        "return_type": "dict | None",
        "returns": [
          "feature"
        ],
        "docstring": "Process LWPOLYLINE entity",
        "decorators": [],
        "is_public": true,
        "calls": [
          "safe_geojson_coords",
          "get_points",
          "convert_coords",
          "len",
          "append"
        ],
        "line_start": 97,
        "line_end": 119
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\dxf_converter.py",
        "module": "dxf_converter",
        "class_name": "DXFConverter",
        "function_name": "convert_dxf_to_geojson",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "dxf_file",
            "type": "pathlib.Path"
          }
        ],
        "return_type": "dict",
        "returns": [
          "feature_collection"
        ],
        "docstring": "Convert DXF file to GeoJSON format",
        "decorators": [],
        "is_public": true,
        "calls": [
          "ezdxf_readfile",
          "Exception",
          "warning",
          "process_line",
          "exception",
          "dxftype",
          "process_lwpolyline",
          "len",
          "modelspace",
          "extract_elevation_from_str",
          "process_polyline",
          "append",
          "info",
          "items"
        ],
        "line_start": 121,
        "line_end": 177
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\enums.py",
    "imports": [
      "import enum"
    ],
    "functions": []
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\forms.py",
    "imports": [
      "import os",
      "from pathlib import Path",
      "from datetime import date, datetime, timedelta",
      "from typing import Any, Dict, List, Optional, Union, Mapping, ClassVar, Type",
      "from zoneinfo import ZoneInfo, ZoneInfoNotFoundError",
      "from fastapi import HTTPException",
      "from fastapi.responses import JSONResponse",
      "from pydantic import BaseModel, Field, field_validator, PrivateAttr",
      "from sqlalchemy import exists, select, update, delete, and_, or_",
      "from app import get_db",
      "from app.dxf_converter import DXFConverter",
      "from app.enums import PayloadType, TrailType, UnloadType",
      "from app.models import BaseObject, Blasting, FuelStation, FuelStationTemplate, MapOverlay, RoadNet, Scenario, IdleArea, PlannedIdle, Shovel, ShovelTemplate, Trail, Truck, TruckTemplate, Quarry, Unload, UnloadTemplate, UploadedFile",
      "from app.geojson_schema import FEATURE_COLLECTION_POINT_LINESTRING, FEATURE_COLLECTION_POINT",
      "from app.road_net import RoadNetCleaner",
      "from app.shift import ShiftLogic, ShiftConfigException",
      "from app import SessionLocal",
      "from roadnet.core import BaseSchemaValidator, RoadNetFactory, RoadNetGraph",
      "from roadnet.exceptions import RoadNetException"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\forms.py",
        "module": "forms",
        "class_name": null,
        "function_name": "collect_model_field_names",
        "arguments": [
          {
            "name": "schema_cls",
            "type": "type"
          }
        ],
        "return_type": "List[str]",
        "returns": [
          "[k for k in dir(schema_cls) if not k.startswith('_')]"
        ],
        "docstring": "Возвращает имена полей Pydantic-схемы.",
        "decorators": [],
        "is_public": true,
        "calls": [
          "list",
          "startswith",
          "dir",
          "keys",
          "hasattr"
        ],
        "line_start": 68,
        "line_end": 74
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\forms.py",
        "module": "forms",
        "class_name": "TemplateRefMixin",
        "function_name": "verify_template_bond",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "orm_obj"
          }
        ],
        "return_type": "None",
        "returns": [],
        "docstring": "Если orm_obj.template_id установлен, проверяем, совпадают ли поля шаблона и объекта.\nЕсли нет — обнуляем связь.",
        "decorators": [],
        "is_public": true,
        "calls": [
          "flush",
          "getattr",
          "collect_model_field_names",
          "type",
          "get",
          "hasattr"
        ],
        "line_start": 99,
        "line_end": 112
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\forms.py",
        "module": "forms",
        "class_name": "TemplateMixin",
        "function_name": "verify_template_bond_reversed",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "orm_obj"
          }
        ],
        "return_type": "None",
        "returns": [],
        "docstring": "Если у текущего шаблона изменились поля — удалить связь template_id у всех привязанных объектов.",
        "decorators": [],
        "is_public": true,
        "calls": [
          "values",
          "getattr",
          "update",
          "where",
          "collect_model_field_names",
          "type",
          "execute"
        ],
        "line_start": 119,
        "line_end": 136
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\forms.py",
        "module": "forms",
        "class_name": "ScheduleMixin",
        "function_name": "delete_schedule_items",
        "arguments": [
          {
            "name": "obj_data",
            "type": "Dict[str, Any]"
          },
          {
            "name": "model"
          },
          {
            "name": "enterprise_tz",
            "type": "ZoneInfo"
          }
        ],
        "return_type": "int",
        "returns": [
          "deleted"
        ],
        "docstring": null,
        "decorators": [
          "staticmethod"
        ],
        "is_public": true,
        "calls": [
          "all",
          "execute",
          "ValueError",
          "astimezone",
          "where",
          "factory",
          "delete",
          "strptime",
          "for_date",
          "get",
          "ZoneInfo",
          "total_seconds",
          "date"
        ],
        "line_start": 150,
        "line_end": 196
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\forms.py",
        "module": "forms",
        "class_name": "ScheduleMixin",
        "function_name": "handle_schedule_create",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "obj_data",
            "type": "Dict[str, Any]"
          },
          {
            "name": "model"
          },
          {
            "name": "schedule_type",
            "type": "str"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "str",
          "delete_schedule_items",
          "replace",
          "append",
          "add",
          "len",
          "JSONResponse",
          "enumerate",
          "commit",
          "fromisoformat",
          "rollback",
          "getenv",
          "get",
          "ZoneInfo",
          "model"
        ],
        "line_start": 198,
        "line_end": 285
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\forms.py",
        "module": "forms",
        "class_name": "ScheduleMixin",
        "function_name": "handle_schedule_delete",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "obj_data",
            "type": "Dict[str, Any]"
          },
          {
            "name": "model"
          },
          {
            "name": "schedule_type",
            "type": "str"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "delete_schedule_items",
          "commit",
          "JSONResponse",
          "rollback",
          "getenv",
          "str",
          "ZoneInfo"
        ],
        "line_start": 287,
        "line_end": 299
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\forms.py",
        "module": "forms",
        "class_name": "BaseObjectSchema",
        "function_name": "validate_name_unique",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": "Проверка уникальности имени — вызывать из роутера перед сохранением.",
        "decorators": [],
        "is_public": true,
        "calls": [
          "select",
          "HTTPException",
          "where",
          "scalar",
          "exists",
          "execute"
        ],
        "line_start": 315,
        "line_end": 324
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\forms.py",
        "module": "forms",
        "class_name": "BaseObjectSchema",
        "function_name": "instantiate_object",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [
          "self._obj"
        ],
        "docstring": "Возвращает ORM-объект: если id задан — загружает, иначе создаёт новый и добавляет в сессию.",
        "decorators": [],
        "is_public": true,
        "calls": [
          "select",
          "getattr",
          "add",
          "where",
          "scalar",
          "execute",
          "model"
        ],
        "line_start": 326,
        "line_end": 338
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\forms.py",
        "module": "forms",
        "class_name": "BlastingSchema",
        "function_name": "populate_obj",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "orm_obj"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 356,
        "line_end": 364
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\forms.py",
        "module": "forms",
        "class_name": "ScenarioSchema",
        "function_name": "check_end_after_start",
        "arguments": [
          {
            "name": "cls"
          },
          {
            "name": "v"
          },
          {
            "name": "info"
          }
        ],
        "return_type": null,
        "returns": [
          "v"
        ],
        "docstring": null,
        "decorators": [
          "field_validator('end_time')",
          "classmethod"
        ],
        "is_public": true,
        "calls": [
          "field_validator",
          "get",
          "ValueError"
        ],
        "line_start": 380,
        "line_end": 384
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\forms.py",
        "module": "forms",
        "class_name": "ShovelArgsMixin",
        "function_name": "check_payload",
        "arguments": [
          {
            "name": "cls"
          },
          {
            "name": "v"
          }
        ],
        "return_type": null,
        "returns": [
          "v"
        ],
        "docstring": null,
        "decorators": [
          "field_validator('payload_type')",
          "classmethod"
        ],
        "is_public": true,
        "calls": [
          "field_validator",
          "list",
          "ValueError"
        ],
        "line_start": 404,
        "line_end": 409
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\forms.py",
        "module": "forms",
        "class_name": "UnloadArgsMixin",
        "function_name": "check_unload_type",
        "arguments": [
          {
            "name": "cls"
          },
          {
            "name": "v"
          }
        ],
        "return_type": null,
        "returns": [
          "v"
        ],
        "docstring": null,
        "decorators": [
          "field_validator('unload_type')",
          "classmethod"
        ],
        "is_public": true,
        "calls": [
          "field_validator",
          "list",
          "ValueError"
        ],
        "line_start": 466,
        "line_end": 471
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\forms.py",
        "module": "forms",
        "class_name": "UnloadArgsMixin",
        "function_name": "check_payload",
        "arguments": [
          {
            "name": "cls"
          },
          {
            "name": "v"
          }
        ],
        "return_type": null,
        "returns": [
          "v"
        ],
        "docstring": null,
        "decorators": [
          "field_validator('payload_type')",
          "classmethod"
        ],
        "is_public": true,
        "calls": [
          "field_validator",
          "list",
          "ValueError"
        ],
        "line_start": 475,
        "line_end": 480
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\forms.py",
        "module": "forms",
        "class_name": "IdleAreaSchema",
        "function_name": "validate_logic",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "HTTPException",
          "any"
        ],
        "line_start": 503,
        "line_end": 505
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\forms.py",
        "module": "forms",
        "class_name": "TrailSchema",
        "function_name": "check_trail_type",
        "arguments": [
          {
            "name": "cls"
          },
          {
            "name": "v"
          }
        ],
        "return_type": null,
        "returns": [
          "v"
        ],
        "docstring": null,
        "decorators": [
          "field_validator('trail_type')",
          "classmethod"
        ],
        "is_public": true,
        "calls": [
          "field_validator",
          "list",
          "ValueError"
        ],
        "line_start": 535,
        "line_end": 540
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\forms.py",
        "module": "forms",
        "class_name": "QuarrySchema",
        "function_name": "validate_timezone",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "HTTPException",
          "ZoneInfo"
        ],
        "line_start": 558,
        "line_end": 564
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\forms.py",
        "module": "forms",
        "class_name": "QuarrySchema",
        "function_name": "validate_shift_config",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "validate_shift_config",
          "HTTPException"
        ],
        "line_start": 566,
        "line_end": 575
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\forms.py",
        "module": "forms",
        "class_name": "QuarrySchema",
        "function_name": "value_from_form_or_obj",
        "arguments": [
          {
            "name": "field_name"
          }
        ],
        "return_type": null,
        "returns": [
          "getattr(orm_obj, field_name)"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "getattr"
        ],
        "line_start": 586,
        "line_end": 590
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\forms.py",
        "module": "forms",
        "class_name": "QuarrySchema",
        "function_name": "offset_td",
        "arguments": [
          {
            "name": "field_name"
          }
        ],
        "return_type": null,
        "returns": [
          "timedelta(minutes=value_from_form_or_obj(field_name))"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "value_from_form_or_obj",
          "timedelta"
        ],
        "line_start": 592,
        "line_end": 593
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\forms.py",
        "module": "forms",
        "class_name": "QuarrySchema",
        "function_name": "validate_complex_rules",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "value_from_form_or_obj",
          "timedelta"
        ],
        "line_start": 577,
        "line_end": 612
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\forms.py",
        "module": "forms",
        "class_name": "RoadNetSchema",
        "function_name": "validate_logic",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "create_from_geojson",
          "RoadNetFactory",
          "HTTPException",
          "validate_points_bonds",
          "RoadNetCleaner",
          "BaseSchemaValidator"
        ],
        "line_start": 624,
        "line_end": 655
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\forms.py",
        "module": "forms",
        "class_name": "RoadNetSchema",
        "function_name": "save_geojson_data",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "orm_obj"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "create_from_geojson",
          "RoadNetFactory",
          "RoadNetGraph",
          "update_graph_bonds",
          "RoadNetCleaner",
          "BaseSchemaValidator",
          "graph_to_geojson"
        ],
        "line_start": 657,
        "line_end": 671
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\forms.py",
        "module": "forms",
        "class_name": "MapOverlaySchema",
        "function_name": "validate_source_file_id_unique",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "select",
          "HTTPException",
          "where",
          "scalar",
          "exists",
          "execute"
        ],
        "line_start": 685,
        "line_end": 693
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\forms.py",
        "module": "forms",
        "class_name": "MapOverlaySchema",
        "function_name": "validate_convert_overlay_possible",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "select",
          "HTTPException",
          "where",
          "scalar",
          "execute"
        ],
        "line_start": 695,
        "line_end": 703
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\forms.py",
        "module": "forms",
        "class_name": "MapOverlaySchema",
        "function_name": "convert_dxf",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "orm_obj"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "select",
          "Path",
          "where",
          "scalar",
          "first",
          "DXFConverter",
          "convert_dxf_to_geojson",
          "execute"
        ],
        "line_start": 705,
        "line_end": 724
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\forms.py",
        "module": "forms",
        "class_name": "PlannedIdleSchema",
        "function_name": "vehicle_type_allowed",
        "arguments": [
          {
            "name": "cls"
          },
          {
            "name": "v"
          }
        ],
        "return_type": null,
        "returns": [
          "v"
        ],
        "docstring": null,
        "decorators": [
          "field_validator('vehicle_type')",
          "classmethod"
        ],
        "is_public": true,
        "calls": [
          "field_validator",
          "ValueError"
        ],
        "line_start": 737,
        "line_end": 742
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\forms.py",
        "module": "forms",
        "class_name": "PlannedIdleSchema",
        "function_name": "validate_vehicle_id_exists",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "select",
          "next",
          "HTTPException",
          "filter",
          "where",
          "scalar",
          "exists",
          "execute"
        ],
        "line_start": 744,
        "line_end": 755
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\forms.py",
        "module": "forms",
        "class_name": "PlannedIdleSchema",
        "function_name": "validate_no_time_overlap",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "select",
          "or_",
          "HTTPException",
          "where",
          "scalar",
          "exists",
          "and_",
          "execute"
        ],
        "line_start": 757,
        "line_end": 781
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\geojson_schema.py",
    "imports": [],
    "functions": []
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\geo_utils.py",
    "imports": [
      "import math",
      "from pyproj import Geod"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\geo_utils.py",
        "module": "geo_utils",
        "class_name": null,
        "function_name": "calc_distance",
        "arguments": [
          {
            "name": "coord0",
            "type": "tuple[float, float, float | None]"
          },
          {
            "name": "coord1",
            "type": "tuple[float, float, float | None]"
          },
          {
            "name": "geod",
            "type": "Geod | None",
            "default": "None"
          }
        ],
        "return_type": "float",
        "returns": [
          "distance"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "inv",
          "Geod",
          "hypot"
        ],
        "line_start": 11,
        "line_end": 23
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\geo_utils.py",
        "module": "geo_utils",
        "class_name": null,
        "function_name": "local_to_global",
        "arguments": [
          {
            "name": "x",
            "type": "float"
          },
          {
            "name": "y",
            "type": "float"
          },
          {
            "name": "z",
            "type": "float | None"
          },
          {
            "name": "lat0",
            "type": "float"
          },
          {
            "name": "lon0",
            "type": "float"
          },
          {
            "name": "alt0",
            "type": "float | None"
          }
        ],
        "return_type": "tuple[float, float, float | None]",
        "returns": [
          "(lat0 + delta_lat, lon0 + delta_lon, alt)"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "sin",
          "cos"
        ],
        "line_start": 26,
        "line_end": 49
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\gunicorn.conf.py",
    "imports": [
      "import os"
    ],
    "functions": []
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\models.py",
    "imports": [
      "import json",
      "import pathlib",
      "from datetime import datetime",
      "from typing import Any, List, Optional",
      "from sqlalchemy import JSON, Boolean, DateTime, ForeignKey, String, Text, text",
      "from sqlalchemy.dialects.postgresql import JSONB",
      "from sqlalchemy.orm import Mapped, scoped_session, mapped_column, relationship, DeclarativeBase, Session",
      "from sqlalchemy.sql import func, delete, or_",
      "from sqlalchemy.sql.schema import CheckConstraint, Index",
      "from sqlalchemy import MetaData",
      "from fastapi import HTTPException",
      "from app.consts import COMMON_SHIFT_CONFIG",
      "from app.enums import PayloadType, TrailType, UnloadType",
      "from app.utils import TZ, utc_now"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\models.py",
        "module": "models",
        "class_name": "DefaultValuesMixin",
        "function_name": "collect_default_values",
        "arguments": [
          {
            "name": "cls"
          }
        ],
        "return_type": "dict[str, Any]",
        "returns": [
          "result"
        ],
        "docstring": null,
        "decorators": [
          "classmethod"
        ],
        "is_public": true,
        "calls": [
          "values",
          "getattr"
        ],
        "line_start": 61,
        "line_end": 68
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\models.py",
        "module": "models",
        "class_name": "DefaultValuesMixin",
        "function_name": "collect_default_values_of_all_models",
        "arguments": [
          {
            "name": "cls"
          }
        ],
        "return_type": null,
        "returns": [
          "result"
        ],
        "docstring": null,
        "decorators": [
          "classmethod"
        ],
        "is_public": true,
        "calls": [
          "collect_default_values",
          "issubclass"
        ],
        "line_start": 71,
        "line_end": 82
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\models.py",
        "module": "models",
        "class_name": "LocationMixin",
        "function_name": "initial_location",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": "List[float]",
        "returns": [
          "[self.initial_lat, self.initial_lon, self.initial_height]"
        ],
        "docstring": null,
        "decorators": [
          "property"
        ],
        "is_public": true,
        "calls": [],
        "line_start": 96,
        "line_end": 97
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\models.py",
        "module": "models",
        "class_name": "LocationMixin",
        "function_name": "set_location",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "location",
            "type": "List[float]"
          }
        ],
        "return_type": "None",
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "len"
        ],
        "line_start": 101,
        "line_end": 110
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\models.py",
        "module": "models",
        "class_name": "BaseObject",
        "function_name": "__repr__",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [
          "f'<{self.__class__.__name__} {self.id}: {self.name}>'"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": false,
        "calls": [],
        "line_start": 136,
        "line_end": 137
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\models.py",
        "module": "models",
        "class_name": "IdleArea",
        "function_name": "types",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": "List[str]",
        "returns": [
          "types_list"
        ],
        "docstring": null,
        "decorators": [
          "property"
        ],
        "is_public": true,
        "calls": [
          "append"
        ],
        "line_start": 419,
        "line_end": 429
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\models.py",
        "module": "models",
        "class_name": "Trail",
        "function_name": "__repr__",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [
          "f'<{self.__class__.__name__} {self.id}: Shovel {self.shovel_id}, Unload {self.unload_id}>'"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": false,
        "calls": [],
        "line_start": 463,
        "line_end": 464
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\models.py",
        "module": "models",
        "class_name": "TrailTruckAssociation",
        "function_name": "__repr__",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [
          "f'<{self.__class__.__name__}: Trail {self.trail_id}, Truck {self.truck_id}>'"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": false,
        "calls": [],
        "line_start": 487,
        "line_end": 488
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\models.py",
        "module": "models",
        "class_name": "RoadNet",
        "function_name": "__repr__",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [
          "f'<{self.__class__.__name__} {self.id}>'"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": false,
        "calls": [],
        "line_start": 604,
        "line_end": 605
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\models.py",
        "module": "models",
        "class_name": "UploadedFile",
        "function_name": "__repr__",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [
          "f'<{self.__class__.__name__}: {self.name}>'"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": false,
        "calls": [],
        "line_start": 626,
        "line_end": 627
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\models.py",
        "module": "models",
        "class_name": "UploadedFile",
        "function_name": "delete_with_file",
        "arguments": [
          {
            "name": "cls"
          },
          {
            "name": "session",
            "type": "scoped_session[Session]"
          },
          {
            "name": "id_",
            "type": "int | None",
            "default": "None"
          },
          {
            "name": "name",
            "type": "str | None",
            "default": "None"
          }
        ],
        "return_type": "bool",
        "returns": [
          "True"
        ],
        "docstring": null,
        "decorators": [
          "classmethod"
        ],
        "is_public": true,
        "calls": [
          "returning",
          "resolve",
          "Path",
          "where",
          "scalar",
          "delete",
          "unlink",
          "execute"
        ],
        "line_start": 630,
        "line_end": 647
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\models.py",
        "module": "models",
        "class_name": null,
        "function_name": "validate_schedule_type",
        "arguments": [
          {
            "name": "type",
            "type": "str"
          }
        ],
        "return_type": null,
        "returns": [
          "type"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "HTTPException",
          "list",
          "keys"
        ],
        "line_start": 761,
        "line_end": 767
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\models.py",
        "module": "models",
        "class_name": null,
        "function_name": "validate_object_type",
        "arguments": [
          {
            "name": "type",
            "type": "str"
          }
        ],
        "return_type": null,
        "returns": [
          "type"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "HTTPException",
          "list",
          "keys"
        ],
        "line_start": 769,
        "line_end": 776
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\road_net.py",
    "imports": [
      "from collections import defaultdict",
      "from sqlalchemy import select",
      "from roadnet.core import RoadNetGraph, BaseRoadNetCleaner",
      "from app import SessionLocal",
      "from app.models import FuelStation, IdleArea, Shovel, Unload, TYPE_MODEL_MAP"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\road_net.py",
        "module": "road_net",
        "class_name": "RoadNetCleaner",
        "function_name": "__init__",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "quarry_id",
            "type": "int"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 18,
        "line_end": 19
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\road_net.py",
        "module": "road_net",
        "class_name": "RoadNetCleaner",
        "function_name": "clean",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "graph",
            "type": "RoadNetGraph"
          },
          {
            "name": "*args",
            "kind": "vararg"
          },
          {
            "name": "**kwargs",
            "kind": "kwarg"
          }
        ],
        "return_type": "None",
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "__clean_graph_bonds_by_data",
          "__clean_graph_bonds_by_schema"
        ],
        "line_start": 21,
        "line_end": 23
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\road_net.py",
        "module": "road_net",
        "class_name": "RoadNetCleaner",
        "function_name": "__clean_graph_bonds_by_schema",
        "arguments": [
          {
            "name": "graph",
            "type": "RoadNetGraph"
          }
        ],
        "return_type": "None",
        "returns": [],
        "docstring": "Internal helper for sanitizing point bonds schema.\nBroken and forbidden entries are silently dropped",
        "decorators": [
          "staticmethod"
        ],
        "is_public": false,
        "calls": [
          "int",
          "add",
          "enumerate",
          "set",
          "append",
          "reversed",
          "get"
        ],
        "line_start": 26,
        "line_end": 57
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\road_net.py",
        "module": "road_net",
        "class_name": "RoadNetCleaner",
        "function_name": "__clean_graph_bonds_by_data",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "graph",
            "type": "RoadNetGraph"
          }
        ],
        "return_type": "None",
        "returns": [],
        "docstring": "Internal helper for sanitizing point bonds data.\nBroken and forbidden entries are silently dropped",
        "decorators": [],
        "is_public": false,
        "calls": [
          "select",
          "defaultdict",
          "scalars",
          "add",
          "where",
          "in_",
          "enumerate",
          "set",
          "execute",
          "items"
        ],
        "line_start": 60,
        "line_end": 85
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\routes.py",
    "imports": [
      "import json",
      "import os",
      "import pathlib",
      "import uuid",
      "from datetime import datetime, timedelta",
      "from operator import itemgetter",
      "from zoneinfo import ZoneInfo",
      "from typing import Optional, List, Dict, Any",
      "from fastapi import APIRouter, Depends, HTTPException, UploadFile, File, Form, Request",
      "from fastapi.responses import FileResponse, HTMLResponse, RedirectResponse",
      "from fastapi.templating import Jinja2Templates",
      "from sqlalchemy import delete, select",
      "from sqlalchemy.orm import Session",
      "from pydantic import BaseModel, ValidationError",
      "from app import get_db, get_redis",
      "from app.consts import STORED_RESULTS_NUMBER",
      "from app.forms import BlastingSchema, PlannedIdleSchema",
      "from app.models import TYPE_MODEL_MAP, TYPE_SCHEDULE_MAP, DefaultValuesMixin, MapOverlay, RoadNet, UploadedFile, validate_schedule_type",
      "from app.forms import ObjectActionRequest",
      "from app.services.date_time_service import StartEndTimeGenerateService",
      "from app.services.template_service import AllTemplatesListService",
      "from app.services.quarry_data_service import QuarryDataService",
      "from app.services.schedule_data_service import ScheduleDataService, ScheduleDataResponseDTO",
      "from app.services.scenario_service import ScenarioService, ScenarioDTO",
      "from app.services.object_service import ObjectService",
      "from app.services.simulation_id_service import GetSimIdService, SimulationRequestDTO",
      "from app.shift import ShiftConfigDataException, ShiftConfigParseException",
      "from app.sim_engine.writer import BatchWriter",
      "from app.simulate_test import generate_simulation_data",
      "from app.sim_engine.simulation_manager import SimulationManager",
      "from app.utils import secure_filename"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\routes.py",
        "module": "routes",
        "class_name": null,
        "function_name": "index",
        "arguments": [
          {
            "name": "request",
            "type": "Request"
          }
        ],
        "return_type": null,
        "returns": [
          "FileResponse('static/index.html')"
        ],
        "docstring": null,
        "decorators": [
          "router.get('/handbook', response_class=HTMLResponse)"
        ],
        "is_public": true,
        "calls": [
          "FileResponse",
          "get"
        ],
        "line_start": 94,
        "line_end": 95
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\routes.py",
        "module": "routes",
        "class_name": null,
        "function_name": "quarry_data",
        "arguments": [
          {
            "name": "db",
            "type": "Session",
            "default": "Depends(get_db)"
          }
        ],
        "return_type": null,
        "returns": [
          "result_dict"
        ],
        "docstring": null,
        "decorators": [
          "router.get('/api/quarry-data', response_model=QuarryDataResponse)"
        ],
        "is_public": true,
        "calls": [
          "AllTemplatesListService",
          "StartEndTimeGenerateService",
          "QuarryDataService",
          "Depends",
          "model_dump",
          "get"
        ],
        "line_start": 98,
        "line_end": 109
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\routes.py",
        "module": "routes",
        "class_name": null,
        "function_name": "schedule_data_by_date_shift",
        "arguments": [
          {
            "name": "date",
            "type": "str"
          },
          {
            "name": "quarry_id",
            "type": "int"
          },
          {
            "name": "type",
            "type": "str",
            "default": "Depends(validate_schedule_type)"
          },
          {
            "name": "shift_number",
            "type": "Optional[int]",
            "default": "None"
          },
          {
            "name": "start_time",
            "type": "Optional[str]",
            "default": "None"
          },
          {
            "name": "end_time",
            "type": "Optional[str]",
            "default": "None"
          },
          {
            "name": "db",
            "default": "Depends(get_db)"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [
          "router.get('/api/schedule-data-by-date-shift', response_model=ScheduleDataResponseDTO)"
        ],
        "is_public": true,
        "calls": [
          "get",
          "HTTPException",
          "Depends",
          "getenv",
          "str",
          "ZoneInfo",
          "ScheduleDataService",
          "service"
        ],
        "line_start": 112,
        "line_end": 140
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\routes.py",
        "module": "routes",
        "class_name": null,
        "function_name": "update_location",
        "arguments": [
          {
            "name": "data",
            "type": "UpdateLocationRequest"
          },
          {
            "name": "db",
            "type": "Session",
            "default": "Depends(get_db)"
          }
        ],
        "return_type": null,
        "returns": [
          "{'success': True, 'id': obj.id, 'lat': obj.initial_lat, 'lon': obj.initial_lon}"
        ],
        "docstring": null,
        "decorators": [
          "router.post('/api/update-location')"
        ],
        "is_public": true,
        "calls": [
          "select",
          "execute",
          "HTTPException",
          "where",
          "scalar",
          "Depends",
          "commit",
          "post",
          "get"
        ],
        "line_start": 143,
        "line_end": 157
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\routes.py",
        "module": "routes",
        "class_name": null,
        "function_name": "get_scenarios",
        "arguments": [
          {
            "name": "db",
            "type": "Session",
            "default": "Depends(get_db)"
          }
        ],
        "return_type": null,
        "returns": [
          "scenarios"
        ],
        "docstring": null,
        "decorators": [
          "router.get('/api/scenarios', response_model=List[ScenarioDTO])"
        ],
        "is_public": true,
        "calls": [
          "ScenarioService",
          "Depends",
          "get"
        ],
        "line_start": 160,
        "line_end": 162
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\routes.py",
        "module": "routes",
        "class_name": null,
        "function_name": "get_road_net",
        "arguments": [
          {
            "name": "rn_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session",
            "default": "Depends(get_db)"
          }
        ],
        "return_type": null,
        "returns": [
          "rn.geojson_data"
        ],
        "docstring": null,
        "decorators": [
          "router.get('/api/road-net/{rn_id}')"
        ],
        "is_public": true,
        "calls": [
          "select",
          "HTTPException",
          "where",
          "scalar",
          "Depends",
          "execute",
          "get"
        ],
        "line_start": 165,
        "line_end": 169
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\routes.py",
        "module": "routes",
        "class_name": null,
        "function_name": "defaults_data",
        "arguments": [],
        "return_type": null,
        "returns": [
          "defaults_dict"
        ],
        "docstring": null,
        "decorators": [
          "router.get('/api/defaults')"
        ],
        "is_public": true,
        "calls": [
          "collect_default_values_of_all_models",
          "get"
        ],
        "line_start": 172,
        "line_end": 174
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\routes.py",
        "module": "routes",
        "class_name": null,
        "function_name": "create_object",
        "arguments": [
          {
            "name": "data",
            "type": "ObjectActionRequest"
          },
          {
            "name": "db",
            "type": "Session",
            "default": "Depends(get_db)"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": "Создание объекта (ранее action == 'create')",
        "decorators": [
          "router.post('/api/object', status_code=201)"
        ],
        "is_public": true,
        "calls": [
          "str",
          "HTTPException",
          "update_object",
          "Depends",
          "create_object",
          "post",
          "ObjectService",
          "get"
        ],
        "line_start": 177,
        "line_end": 192
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\routes.py",
        "module": "routes",
        "class_name": null,
        "function_name": "update_object",
        "arguments": [
          {
            "name": "obj_id",
            "type": "int"
          },
          {
            "name": "data",
            "type": "ObjectActionRequest"
          },
          {
            "name": "db",
            "type": "Session",
            "default": "Depends(get_db)"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": "Обновление объекта (ранее action == 'update')",
        "decorators": [
          "router.put('/api/object/{obj_id}')"
        ],
        "is_public": true,
        "calls": [
          "ObjectService",
          "HTTPException",
          "update_object",
          "Depends",
          "put",
          "str"
        ],
        "line_start": 195,
        "line_end": 206
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\routes.py",
        "module": "routes",
        "class_name": null,
        "function_name": "delete_object",
        "arguments": [
          {
            "name": "data",
            "type": "DeleteObjectRequest"
          },
          {
            "name": "db",
            "type": "Session",
            "default": "Depends(get_db)"
          }
        ],
        "return_type": null,
        "returns": [
          "{'success': True}"
        ],
        "docstring": null,
        "decorators": [
          "router.delete('/api/object')"
        ],
        "is_public": true,
        "calls": [
          "select",
          "BlastingSchema",
          "PlannedIdleSchema",
          "returning",
          "issubclass",
          "execute",
          "HTTPException",
          "where",
          "scalar",
          "Depends",
          "delete",
          "commit",
          "handle_schedule_delete",
          "dict",
          "delete_with_file",
          "get"
        ],
        "line_start": 209,
        "line_end": 247
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\routes.py",
        "module": "routes",
        "class_name": null,
        "function_name": "run_simulation",
        "arguments": [
          {
            "name": "data",
            "type": "SimulationRequestDTO"
          },
          {
            "name": "db",
            "type": "Session",
            "default": "Depends(get_db)"
          },
          {
            "name": "redis_client",
            "default": "Depends(get_redis)"
          }
        ],
        "return_type": null,
        "returns": [
          "RedirectResponse(url=f'/simulation_view/{sim_id}', status_code=303)"
        ],
        "docstring": null,
        "decorators": [
          "router.post('/run-simulation')"
        ],
        "is_public": true,
        "calls": [
          "post",
          "Depends",
          "GetSimIdService",
          "RedirectResponse"
        ],
        "line_start": 252,
        "line_end": 258
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\routes.py",
        "module": "routes",
        "class_name": null,
        "function_name": "api_run_simulation",
        "arguments": [
          {
            "name": "data",
            "type": "SimulationRequestDTO"
          },
          {
            "name": "db",
            "type": "Session",
            "default": "Depends(get_db)"
          },
          {
            "name": "redis_client",
            "default": "Depends(get_redis)"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [
          "router.post('/api/run-simulation')"
        ],
        "is_public": true,
        "calls": [
          "GetSimIdService",
          "HTTPException",
          "Depends",
          "post",
          "type"
        ],
        "line_start": 261,
        "line_end": 270
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\routes.py",
        "module": "routes",
        "class_name": null,
        "function_name": "get_simulation_meta",
        "arguments": [
          {
            "name": "sim_id",
            "type": "str"
          },
          {
            "name": "redis_client",
            "default": "Depends(get_redis)"
          }
        ],
        "return_type": null,
        "returns": [
          "json.loads(meta_json)"
        ],
        "docstring": null,
        "decorators": [
          "router.get('/api/simulation/{sim_id}/meta')"
        ],
        "is_public": true,
        "calls": [
          "loads",
          "next",
          "HTTPException",
          "Depends",
          "scan_iter",
          "get"
        ],
        "line_start": 273,
        "line_end": 282
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\routes.py",
        "module": "routes",
        "class_name": null,
        "function_name": "get_simulation_batch",
        "arguments": [
          {
            "name": "sim_id",
            "type": "str"
          },
          {
            "name": "batch_index",
            "type": "int"
          },
          {
            "name": "redis_client",
            "default": "Depends(get_redis)"
          }
        ],
        "return_type": null,
        "returns": [
          "json.loads(batch_data)"
        ],
        "docstring": null,
        "decorators": [
          "router.get('/api/simulation/{sim_id}/batch/{batch_index}')"
        ],
        "is_public": true,
        "calls": [
          "loads",
          "next",
          "HTTPException",
          "Depends",
          "scan_iter",
          "get"
        ],
        "line_start": 285,
        "line_end": 294
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\routes.py",
        "module": "routes",
        "class_name": null,
        "function_name": "get_simulation_batches",
        "arguments": [
          {
            "name": "sim_id",
            "type": "str"
          },
          {
            "name": "indices",
            "type": "List[int]",
            "default": "None"
          },
          {
            "name": "redis_client",
            "default": "Depends(get_redis)"
          }
        ],
        "return_type": null,
        "returns": [
          "{'batches': batches}"
        ],
        "docstring": null,
        "decorators": [
          "router.get('/api/simulation/{sim_id}/batches')"
        ],
        "is_public": true,
        "calls": [
          "loads",
          "extend",
          "mget",
          "next",
          "HTTPException",
          "Depends",
          "scan_iter",
          "replace",
          "get"
        ],
        "line_start": 297,
        "line_end": 315
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\routes.py",
        "module": "routes",
        "class_name": null,
        "function_name": "get_simulation_summary",
        "arguments": [
          {
            "name": "sim_id",
            "type": "str"
          },
          {
            "name": "redis_client",
            "default": "Depends(get_redis)"
          }
        ],
        "return_type": null,
        "returns": [
          "json.loads(summary_data)"
        ],
        "docstring": null,
        "decorators": [
          "router.get('/api/simulation/{sim_id}/summary')"
        ],
        "is_public": true,
        "calls": [
          "loads",
          "next",
          "HTTPException",
          "Depends",
          "scan_iter",
          "get"
        ],
        "line_start": 318,
        "line_end": 327
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\routes.py",
        "module": "routes",
        "class_name": null,
        "function_name": "get_simulation_events",
        "arguments": [
          {
            "name": "sim_id",
            "type": "str"
          },
          {
            "name": "redis_client",
            "default": "Depends(get_redis)"
          }
        ],
        "return_type": null,
        "returns": [
          "json.loads(events_data)"
        ],
        "docstring": null,
        "decorators": [
          "router.get('/api/simulation/{sim_id}/events')"
        ],
        "is_public": true,
        "calls": [
          "loads",
          "next",
          "HTTPException",
          "Depends",
          "scan_iter",
          "get"
        ],
        "line_start": 330,
        "line_end": 339
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\routes.py",
        "module": "routes",
        "class_name": null,
        "function_name": "handle_file_get",
        "arguments": [
          {
            "name": "id_or_name",
            "type": "str"
          },
          {
            "name": "db",
            "type": "Session",
            "default": "Depends(get_db)"
          }
        ],
        "return_type": null,
        "returns": [
          "{'id': uf.id, 'name': uf.name, 'path': uf.path, 'size': uf.size, 'created_at': uf.created_at.isoformat(), 'url': f'/upload/{uf.name}'}"
        ],
        "docstring": null,
        "decorators": [
          "router.get('/api/file/{id_or_name}')"
        ],
        "is_public": true,
        "calls": [
          "select",
          "int",
          "HTTPException",
          "isoformat",
          "where",
          "scalar",
          "Depends",
          "execute",
          "get"
        ],
        "line_start": 344,
        "line_end": 367
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\routes.py",
        "module": "routes",
        "class_name": null,
        "function_name": "handle_file_post",
        "arguments": [
          {
            "name": "request",
            "type": "Request"
          },
          {
            "name": "file",
            "type": "UploadFile",
            "default": "File(...)"
          },
          {
            "name": "name",
            "type": "str",
            "default": "Form(None)"
          },
          {
            "name": "db",
            "type": "Session",
            "default": "Depends(get_db)"
          }
        ],
        "return_type": null,
        "returns": [
          "{'success': True, 'file': {'id': uf.id, 'name': uf.name, 'url': f'/upload/{uf.name}'}}"
        ],
        "docstring": null,
        "decorators": [
          "router.post('/api/file')"
        ],
        "is_public": true,
        "calls": [
          "write",
          "stat",
          "Form",
          "Path",
          "read",
          "open",
          "UploadedFile",
          "add",
          "secure_filename",
          "Depends",
          "exists",
          "len",
          "File",
          "with_stem",
          "commit",
          "unlink",
          "post",
          "str"
        ],
        "line_start": 370,
        "line_end": 412
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\routes.py",
        "module": "routes",
        "class_name": null,
        "function_name": "handle_file_delete",
        "arguments": [
          {
            "name": "id_or_name",
            "type": "str"
          },
          {
            "name": "db",
            "type": "Session",
            "default": "Depends(get_db)"
          }
        ],
        "return_type": null,
        "returns": [
          "{'success': True}"
        ],
        "docstring": null,
        "decorators": [
          "router.delete('/api/file/{id_or_name}')"
        ],
        "is_public": true,
        "calls": [
          "int",
          "HTTPException",
          "Depends",
          "delete",
          "commit",
          "delete_with_file"
        ],
        "line_start": 415,
        "line_end": 427
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\routes.py",
        "module": "routes",
        "class_name": null,
        "function_name": "uploaded_file_route",
        "arguments": [
          {
            "name": "filename",
            "type": "str"
          },
          {
            "name": "request",
            "type": "Request"
          }
        ],
        "return_type": null,
        "returns": [
          "FileResponse(upload_dir / filename)"
        ],
        "docstring": null,
        "decorators": [
          "router.get('/upload/{filename:path}')"
        ],
        "is_public": true,
        "calls": [
          "FileResponse",
          "resolve",
          "get",
          "Path"
        ],
        "line_start": 430,
        "line_end": 432
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\routes.py",
        "module": "routes",
        "class_name": null,
        "function_name": "get_map_overlay",
        "arguments": [
          {
            "name": "mo_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session",
            "default": "Depends(get_db)"
          }
        ],
        "return_type": null,
        "returns": [
          "{'success': True, 'id': mo.id, 'name': mo.name, 'created_at': mo.created_at.isoformat(), 'updated_at': mo.updated_at.isoformat(), 'is_active': mo.is_active, 'quarry_id': mo.quarry_id, 'source_file_id': mo.source_file_id, 'anchor_lat': mo.anchor_lat, 'anchor_lon': mo.anchor_lon, 'anchor_height': mo.anchor_height, 'color': mo.color, 'geojson_data': mo.geojson_data}"
        ],
        "docstring": null,
        "decorators": [
          "router.get('/api/map-overlay/{mo_id}')"
        ],
        "is_public": true,
        "calls": [
          "select",
          "HTTPException",
          "isoformat",
          "where",
          "scalar",
          "Depends",
          "execute",
          "get"
        ],
        "line_start": 435,
        "line_end": 454
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\shift.py",
    "imports": [
      "import json",
      "from dataclasses import dataclass",
      "from datetime import date, datetime, time, timedelta, timezone, tzinfo",
      "from typing import Any, Mapping, Sequence, Tuple",
      "import jsonschema",
      "from app.consts import COMMON_SHIFT_CONFIG, THREEFOLD_SHIFT_CONFIG"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\shift.py",
        "module": "shift",
        "class_name": "ShiftConfigException",
        "function_name": "__init__",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "message",
            "type": "str"
          },
          {
            "name": "status_code",
            "default": "None"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "super",
          "__init__"
        ],
        "line_start": 54,
        "line_end": 57
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\shift.py",
        "module": "shift",
        "class_name": "ShiftConfigException",
        "function_name": "__str__",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": "str",
        "returns": [
          "self.message"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": false,
        "calls": [],
        "line_start": 59,
        "line_end": 60
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\shift.py",
        "module": "shift",
        "class_name": "ShiftLogic",
        "function_name": "__init__",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "offsets_tuple",
            "type": "Tuple['ShiftOffsetsDTO', ...]"
          }
        ],
        "return_type": "None",
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 80,
        "line_end": 81
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\shift.py",
        "module": "shift",
        "class_name": "ShiftLogic",
        "function_name": "factory",
        "arguments": [
          {
            "name": "cls"
          },
          {
            "name": "shift_config",
            "type": "str | Mapping | Sequence"
          }
        ],
        "return_type": "'ShiftLogic'",
        "returns": [
          "cls(offsets_tuple)"
        ],
        "docstring": null,
        "decorators": [
          "classmethod"
        ],
        "is_public": true,
        "calls": [
          "validate_shift_config",
          "isinstance",
          "loads",
          "ShiftOffsetsDTO",
          "ShiftConfigParseException",
          "cls",
          "tuple",
          "timedelta"
        ],
        "line_start": 84,
        "line_end": 111
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\shift.py",
        "module": "shift",
        "class_name": "ShiftLogic",
        "function_name": "validate_shift_config",
        "arguments": [
          {
            "name": "cls"
          },
          {
            "name": "shift_config",
            "type": "Any"
          }
        ],
        "return_type": "None",
        "returns": [],
        "docstring": null,
        "decorators": [
          "classmethod"
        ],
        "is_public": true,
        "calls": [
          "ShiftConfigSchemaException",
          "ShiftConfigDataException",
          "enumerate",
          "validate"
        ],
        "line_start": 114,
        "line_end": 126
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\shift.py",
        "module": "shift",
        "class_name": "ShiftLogic",
        "function_name": "for_date",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "day",
            "type": "date"
          },
          {
            "name": "tzinfo",
            "type": "tzinfo | None",
            "default": "None"
          }
        ],
        "return_type": "list['ShiftDTO']",
        "returns": [
          "result"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "append",
          "enumerate",
          "combine",
          "ShiftDTO"
        ],
        "line_start": 128,
        "line_end": 143
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\shift.py",
        "module": "shift",
        "class_name": "ShiftLogic",
        "function_name": "for_datetime",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "moment",
            "type": "datetime"
          }
        ],
        "return_type": "'ShiftDTO'",
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "date",
          "ShiftConfigDataException",
          "combine",
          "ShiftDTO",
          "enumerate",
          "timedelta"
        ],
        "line_start": 145,
        "line_end": 164
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\shift.py",
        "module": "shift",
        "class_name": "ShiftLogic",
        "function_name": "for_range",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "start",
            "type": "datetime"
          },
          {
            "name": "stop",
            "type": "datetime"
          }
        ],
        "return_type": "list['ShiftDTO']",
        "returns": [
          "result"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "combine",
          "ShiftDTO",
          "for_datetime",
          "len",
          "append",
          "timedelta"
        ],
        "line_start": 166,
        "line_end": 194
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\shift.py",
        "module": "shift",
        "class_name": "ShiftLogic",
        "function_name": "prev_from",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "shift",
            "type": "'ShiftDTO'"
          }
        ],
        "return_type": "'ShiftDTO'",
        "returns": [
          "ShiftDTO(day=prev_day, begin_time=prev_day_start + offsets.begin_offset, end_time=prev_day_start + offsets.end_offset, number=prev_number, length=offsets.end_offset - offsets.begin_offset, begin_offset=offsets.begin_offset, end_offset=offsets.end_offset)"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "len",
          "combine",
          "ShiftDTO",
          "timedelta"
        ],
        "line_start": 196,
        "line_end": 213
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\shift.py",
        "module": "shift",
        "class_name": "ShiftLogic",
        "function_name": "next_from",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "shift",
            "type": "'ShiftDTO'"
          }
        ],
        "return_type": "'ShiftDTO'",
        "returns": [
          "ShiftDTO(day=next_day, begin_time=next_day_start + offsets.begin_offset, end_time=next_day_start + offsets.end_offset, number=next_number, length=offsets.end_offset - offsets.begin_offset, begin_offset=offsets.begin_offset, end_offset=offsets.end_offset)"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "len",
          "combine",
          "ShiftDTO",
          "timedelta"
        ],
        "line_start": 215,
        "line_end": 232
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\simulate_test.py",
    "imports": [
      "import random",
      "from datetime import datetime, timedelta",
      "from app.sim_engine.enums import ObjectType"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\simulate_test.py",
        "module": "simulate_test",
        "class_name": null,
        "function_name": "generate_simulation_data",
        "arguments": [],
        "return_type": null,
        "returns": [
          "{'status': 'ok', 'telemetry': telemetry, 'summary': summary}"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "now",
          "key",
          "randint",
          "range",
          "min",
          "append",
          "str",
          "timedelta"
        ],
        "line_start": 7,
        "line_end": 107
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\utils.py",
    "imports": [
      "import os",
      "import pathlib",
      "import re",
      "import unicodedata",
      "from datetime import datetime, timezone",
      "from zoneinfo import ZoneInfo"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\utils.py",
        "module": "utils",
        "class_name": null,
        "function_name": "utc_now",
        "arguments": [],
        "return_type": null,
        "returns": [
          "datetime.now(timezone.utc)"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "now"
        ],
        "line_start": 34,
        "line_end": 35
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\utils.py",
        "module": "utils",
        "class_name": null,
        "function_name": "utc_to_enterprise",
        "arguments": [
          {
            "name": "utc_time",
            "type": "str"
          },
          {
            "name": "tz",
            "type": "str",
            "default": "TZ"
          }
        ],
        "return_type": "datetime",
        "returns": [
          "datetime.fromisoformat(utc_time.replace('Z', '+00:00')).replace(tzinfo=timezone.utc).astimezone(ZoneInfo(tz))"
        ],
        "docstring": "Конвертирует UTC время в указанную таймзону",
        "decorators": [],
        "is_public": true,
        "calls": [
          "replace",
          "ZoneInfo",
          "fromisoformat",
          "astimezone"
        ],
        "line_start": 38,
        "line_end": 42
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\utils.py",
        "module": "utils",
        "class_name": null,
        "function_name": "enterprise_to_utc",
        "arguments": [
          {
            "name": "local_time",
            "type": "str"
          },
          {
            "name": "tz",
            "type": "str",
            "default": "TZ"
          }
        ],
        "return_type": "datetime",
        "returns": [
          "datetime.fromisoformat(local_time).replace(tzinfo=ZoneInfo(tz)).astimezone(timezone.utc)"
        ],
        "docstring": "Конвертирует локальное время предприятия в UTC",
        "decorators": [],
        "is_public": true,
        "calls": [
          "replace",
          "ZoneInfo",
          "fromisoformat",
          "astimezone"
        ],
        "line_start": 45,
        "line_end": 49
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\utils.py",
        "module": "utils",
        "class_name": null,
        "function_name": "str_to_snake_case",
        "arguments": [
          {
            "name": "s",
            "type": "str"
          }
        ],
        "return_type": "str",
        "returns": [
          "s"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "sub",
          "lower"
        ],
        "line_start": 52,
        "line_end": 59
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\utils.py",
        "module": "utils",
        "class_name": null,
        "function_name": "secure_filename",
        "arguments": [
          {
            "name": "filename",
            "type": "str"
          },
          {
            "name": "allow_unicode",
            "type": "bool",
            "default": "False"
          }
        ],
        "return_type": "str",
        "returns": [
          "filename"
        ],
        "docstring": "Copy of :func:`werkzeug.utils.secure_filename`, but with `allow_unicode` arg\n\nPass it a filename and it will return a secure version of it.  This\nfilename can then safely be stored on a regular file system and passed\nto :func:`os.path.join`.  The filename returned is an ASCII only string\nfor maximum portability.\n\nOn windows systems the function also makes sure that the file is not\nnamed after one of the special device files.\n\n>>> secure_filename(\"My cool movie.mov\")\n'My_cool_movie.mov'\n>>> secure_filename(\"../../../etc/passwd\")\n'etc_passwd'\n>>> secure_filename('i contain cool \\xfcml\\xe4uts.txt')\n'i_contain_cool_umlauts.txt'\n\nThe function might return an empty filename.  It's your responsibility\nto ensure that the filename is unique and that you abort or\ngenerate a random filename if the function returned an empty one.\n\n.. versionadded:: 0.5\n\n:param filename: the filename to secure",
        "decorators": [],
        "is_public": true,
        "calls": [
          "strip",
          "sub",
          "encode",
          "split",
          "decode",
          "upper",
          "normalize",
          "replace",
          "str",
          "join"
        ],
        "line_start": 62,
        "line_end": 113
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\utils.py",
        "module": "utils",
        "class_name": null,
        "function_name": "human_size",
        "arguments": [
          {
            "name": "path",
            "type": "pathlib.Path"
          }
        ],
        "return_type": "str",
        "returns": [
          "f'{size:.1f}PB'"
        ],
        "docstring": "Return human-readable file size",
        "decorators": [],
        "is_public": true,
        "calls": [
          "stat"
        ],
        "line_start": 116,
        "line_end": 123
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\__init__.py",
    "imports": [
      "import os",
      "from contextlib import asynccontextmanager",
      "from pathlib import Path",
      "import redis",
      "from dotenv import load_dotenv",
      "from fastapi import FastAPI",
      "from fastapi.middleware.cors import CORSMiddleware",
      "from fastapi.staticfiles import StaticFiles",
      "from sqlalchemy import create_engine",
      "from sqlalchemy.orm import sessionmaker",
      "from app.sim_engine.infra.logger.logger import Logger",
      "from app.routes import router"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\__init__.py",
        "module": "__init__",
        "class_name": null,
        "function_name": "get_db",
        "arguments": [],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "SessionLocal",
          "close"
        ],
        "line_start": 37,
        "line_end": 42
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\__init__.py",
        "module": "__init__",
        "class_name": null,
        "function_name": "get_redis",
        "arguments": [],
        "return_type": null,
        "returns": [
          "redis_client"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 44,
        "line_end": 45
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\__init__.py",
        "module": "__init__",
        "class_name": null,
        "function_name": "lifespan",
        "arguments": [
          {
            "name": "app",
            "type": "FastAPI"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [
          "asynccontextmanager"
        ],
        "is_public": true,
        "calls": [
          "print"
        ],
        "line_start": 48,
        "line_end": 51
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\__init__.py",
        "module": "__init__",
        "class_name": null,
        "function_name": "create_app",
        "arguments": [
          {
            "name": "test_config",
            "default": "None"
          }
        ],
        "return_type": null,
        "returns": [
          "app"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "FastAPI",
          "Path",
          "mount",
          "add_middleware",
          "mkdir",
          "StaticFiles",
          "getenv",
          "include_router"
        ],
        "line_start": 53,
        "line_end": 80
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\env.py",
    "imports": [
      "import logging",
      "from logging.config import fileConfig",
      "from sqlalchemy import pool",
      "from alembic import context",
      "from app import engine"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\env.py",
        "module": "env",
        "class_name": null,
        "function_name": "run_migrations_offline",
        "arguments": [],
        "return_type": null,
        "returns": [],
        "docstring": "Запуск миграций в оффлайн-режиме.",
        "decorators": [],
        "is_public": true,
        "calls": [
          "configure",
          "run_migrations",
          "replace",
          "str",
          "begin_transaction"
        ],
        "line_start": 20,
        "line_end": 31
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\env.py",
        "module": "env",
        "class_name": null,
        "function_name": "run_migrations_online",
        "arguments": [],
        "return_type": null,
        "returns": [],
        "docstring": "Запуск миграций в онлайн-режиме.",
        "decorators": [],
        "is_public": true,
        "calls": [
          "run_migrations",
          "configure",
          "connect",
          "begin_transaction"
        ],
        "line_start": 34,
        "line_end": 42
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\049327069ed2_add_arm_turn_angle_to_shovel.py",
    "imports": [
      "from alembic import op",
      "import sqlalchemy"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\049327069ed2_add_arm_turn_angle_to_shovel.py",
        "module": "049327069ed2_add_arm_turn_angle_to_shovel",
        "class_name": null,
        "function_name": "upgrade",
        "arguments": [],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "batch_alter_table",
          "Column",
          "add_column",
          "Float"
        ],
        "line_start": 19,
        "line_end": 25
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\049327069ed2_add_arm_turn_angle_to_shovel.py",
        "module": "049327069ed2_add_arm_turn_angle_to_shovel",
        "class_name": null,
        "function_name": "downgrade",
        "arguments": [],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "batch_alter_table",
          "drop_column"
        ],
        "line_start": 30,
        "line_end": 36
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\173b757501f6_add_scenario_model.py",
    "imports": [
      "from alembic import op",
      "import sqlalchemy"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\173b757501f6_add_scenario_model.py",
        "module": "173b757501f6_add_scenario_model",
        "class_name": null,
        "function_name": "upgrade",
        "arguments": [],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "String",
          "f",
          "Boolean",
          "PrimaryKeyConstraint",
          "text",
          "DateTime",
          "Column",
          "create_table",
          "Integer",
          "ForeignKeyConstraint"
        ],
        "line_start": 19,
        "line_end": 32
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\173b757501f6_add_scenario_model.py",
        "module": "173b757501f6_add_scenario_model",
        "class_name": null,
        "function_name": "downgrade",
        "arguments": [],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "drop_table"
        ],
        "line_start": 36,
        "line_end": 38
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\2f3ca3217c27_add_blasting_model.py",
    "imports": [
      "from alembic import op",
      "import sqlalchemy",
      "from sqlalchemy.dialects import postgresql"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\2f3ca3217c27_add_blasting_model.py",
        "module": "2f3ca3217c27_add_blasting_model",
        "class_name": null,
        "function_name": "upgrade",
        "arguments": [],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "f",
          "PrimaryKeyConstraint",
          "text",
          "Column",
          "DateTime",
          "Text",
          "create_table",
          "Integer",
          "JSONB",
          "ForeignKeyConstraint"
        ],
        "line_start": 19,
        "line_end": 31
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\2f3ca3217c27_add_blasting_model.py",
        "module": "2f3ca3217c27_add_blasting_model",
        "class_name": null,
        "function_name": "downgrade",
        "arguments": [],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "drop_table"
        ],
        "line_start": 35,
        "line_end": 37
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\34d2db5b9f3c_drop_columns.py",
    "imports": [
      "from alembic import op",
      "import sqlalchemy"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\34d2db5b9f3c_drop_columns.py",
        "module": "34d2db5b9f3c_drop_columns",
        "class_name": null,
        "function_name": "upgrade",
        "arguments": [],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "batch_alter_table",
          "alter_column",
          "drop_column"
        ],
        "line_start": 19,
        "line_end": 43
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\34d2db5b9f3c_drop_columns.py",
        "module": "34d2db5b9f3c_drop_columns",
        "class_name": null,
        "function_name": "downgrade",
        "arguments": [],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "batch_alter_table",
          "DOUBLE_PRECISION",
          "add_column",
          "Column",
          "INTEGER",
          "drop_column"
        ],
        "line_start": 48,
        "line_end": 74
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\5e034f7cece7_initial_migration_attempt_3.py",
    "imports": [
      "from alembic import op",
      "import sqlalchemy"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\5e034f7cece7_initial_migration_attempt_3.py",
        "module": "5e034f7cece7_initial_migration_attempt_3",
        "class_name": null,
        "function_name": "upgrade",
        "arguments": [],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "String",
          "Integer",
          "f",
          "Boolean",
          "Enum",
          "PrimaryKeyConstraint",
          "Column",
          "DateTime",
          "Text",
          "Float",
          "create_table",
          "ForeignKeyConstraint"
        ],
        "line_start": 19,
        "line_end": 90
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\5e034f7cece7_initial_migration_attempt_3.py",
        "module": "5e034f7cece7_initial_migration_attempt_3",
        "class_name": null,
        "function_name": "downgrade",
        "arguments": [],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "execute",
          "drop_table"
        ],
        "line_start": 94,
        "line_end": 103
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\660043dae00e_add_shoveltemplate_trucktemplate_.py",
    "imports": [
      "from alembic import op",
      "import sqlalchemy",
      "from sqlalchemy.dialects import postgresql"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\660043dae00e_add_shoveltemplate_trucktemplate_.py",
        "module": "660043dae00e_add_shoveltemplate_trucktemplate_",
        "class_name": null,
        "function_name": "upgrade",
        "arguments": [],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "String",
          "batch_alter_table",
          "create_foreign_key",
          "f",
          "ENUM",
          "add_column",
          "PrimaryKeyConstraint",
          "Column",
          "DateTime",
          "create_table",
          "Integer",
          "Float"
        ],
        "line_start": 20,
        "line_end": 77
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\660043dae00e_add_shoveltemplate_trucktemplate_.py",
        "module": "660043dae00e_add_shoveltemplate_trucktemplate_",
        "class_name": null,
        "function_name": "downgrade",
        "arguments": [],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "batch_alter_table",
          "f",
          "drop_constraint",
          "drop_table",
          "drop_column"
        ],
        "line_start": 82,
        "line_end": 98
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\689dff3c9f22_new_fields_for_shovel_truck_and_unload.py",
    "imports": [
      "from alembic import op",
      "import sqlalchemy"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\689dff3c9f22_new_fields_for_shovel_truck_and_unload.py",
        "module": "689dff3c9f22_new_fields_for_shovel_truck_and_unload",
        "class_name": null,
        "function_name": "upgrade",
        "arguments": [],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "batch_alter_table",
          "Column",
          "add_column",
          "Integer"
        ],
        "line_start": 19,
        "line_end": 51
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\689dff3c9f22_new_fields_for_shovel_truck_and_unload.py",
        "module": "689dff3c9f22_new_fields_for_shovel_truck_and_unload",
        "class_name": null,
        "function_name": "downgrade",
        "arguments": [],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "batch_alter_table",
          "drop_column"
        ],
        "line_start": 56,
        "line_end": 88
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\741a88f7abe1_add_scenario_relation_to_.py",
    "imports": [
      "from alembic import op",
      "from datetime import datetime",
      "import sqlalchemy"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\741a88f7abe1_add_scenario_relation_to_.py",
        "module": "741a88f7abe1_add_scenario_relation_to_",
        "class_name": null,
        "function_name": "upgrade",
        "arguments": [],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "batch_alter_table",
          "get_bind",
          "now",
          "create_foreign_key",
          "f",
          "execute",
          "add_column",
          "scalar",
          "text",
          "Column",
          "Integer",
          "bindparams",
          "datetime"
        ],
        "line_start": 20,
        "line_end": 59
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\741a88f7abe1_add_scenario_relation_to_.py",
        "module": "741a88f7abe1_add_scenario_relation_to_",
        "class_name": null,
        "function_name": "downgrade",
        "arguments": [],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "batch_alter_table",
          "drop_column",
          "drop_constraint",
          "f"
        ],
        "line_start": 62,
        "line_end": 66
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\77aa09bc992e_add_primary_key_to_scenario_id_in_.py",
    "imports": [
      "from alembic import op",
      "import sqlalchemy"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\77aa09bc992e_add_primary_key_to_scenario_id_in_.py",
        "module": "77aa09bc992e_add_primary_key_to_scenario_id_in_",
        "class_name": null,
        "function_name": "upgrade",
        "arguments": [],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "batch_alter_table",
          "drop_constraint",
          "alter_column",
          "create_primary_key",
          "INTEGER"
        ],
        "line_start": 19,
        "line_end": 32
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\77aa09bc992e_add_primary_key_to_scenario_id_in_.py",
        "module": "77aa09bc992e_add_primary_key_to_scenario_id_in_",
        "class_name": null,
        "function_name": "downgrade",
        "arguments": [],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "batch_alter_table",
          "drop_constraint",
          "alter_column",
          "create_primary_key",
          "INTEGER"
        ],
        "line_start": 36,
        "line_end": 49
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\8520318762c4_rename_shiftchangearea_to_idlearea.py",
    "imports": [
      "from alembic import op",
      "import sqlalchemy"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\8520318762c4_rename_shiftchangearea_to_idlearea.py",
        "module": "8520318762c4_rename_shiftchangearea_to_idlearea",
        "class_name": null,
        "function_name": "upgrade",
        "arguments": [],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "add_column",
          "Column",
          "rename_table",
          "Boolean"
        ],
        "line_start": 17,
        "line_end": 21
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\8520318762c4_rename_shiftchangearea_to_idlearea.py",
        "module": "8520318762c4_rename_shiftchangearea_to_idlearea",
        "class_name": null,
        "function_name": "downgrade",
        "arguments": [],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "rename_table",
          "drop_column"
        ],
        "line_start": 24,
        "line_end": 28
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\8d394792dc14_add_shift_change_fields_to_quarry.py",
    "imports": [
      "from alembic import op",
      "import sqlalchemy"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\8d394792dc14_add_shift_change_fields_to_quarry.py",
        "module": "8d394792dc14_add_shift_change_fields_to_quarry",
        "class_name": null,
        "function_name": "upgrade",
        "arguments": [],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "batch_alter_table",
          "Column",
          "add_column",
          "Integer"
        ],
        "line_start": 19,
        "line_end": 23
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\8d394792dc14_add_shift_change_fields_to_quarry.py",
        "module": "8d394792dc14_add_shift_change_fields_to_quarry",
        "class_name": null,
        "function_name": "downgrade",
        "arguments": [],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "batch_alter_table",
          "drop_column"
        ],
        "line_start": 28,
        "line_end": 32
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\9daa452a370b_new_reliability_related_fields_for_.py",
    "imports": [
      "from alembic import op",
      "import sqlalchemy"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\9daa452a370b_new_reliability_related_fields_for_.py",
        "module": "9daa452a370b_new_reliability_related_fields_for_",
        "class_name": null,
        "function_name": "upgrade",
        "arguments": [],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "batch_alter_table",
          "Boolean",
          "add_column",
          "Column",
          "Float",
          "Integer"
        ],
        "line_start": 19,
        "line_end": 31
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\9daa452a370b_new_reliability_related_fields_for_.py",
        "module": "9daa452a370b_new_reliability_related_fields_for_",
        "class_name": null,
        "function_name": "downgrade",
        "arguments": [],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "batch_alter_table",
          "drop_column"
        ],
        "line_start": 36,
        "line_end": 48
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\a06b87cc0807_add_shiftchangearea_and_fuelstation_.py",
    "imports": [
      "from alembic import op",
      "import sqlalchemy"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\a06b87cc0807_add_shiftchangearea_and_fuelstation_.py",
        "module": "a06b87cc0807_add_shiftchangearea_and_fuelstation_",
        "class_name": null,
        "function_name": "upgrade",
        "arguments": [],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "String",
          "batch_alter_table",
          "Integer",
          "f",
          "add_column",
          "PrimaryKeyConstraint",
          "text",
          "Column",
          "DateTime",
          "Float",
          "create_table",
          "ForeignKeyConstraint"
        ],
        "line_start": 19,
        "line_end": 76
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\a06b87cc0807_add_shiftchangearea_and_fuelstation_.py",
        "module": "a06b87cc0807_add_shiftchangearea_and_fuelstation_",
        "class_name": null,
        "function_name": "downgrade",
        "arguments": [],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "batch_alter_table",
          "drop_column",
          "drop_table"
        ],
        "line_start": 81,
        "line_end": 105
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\a43abb6acab2_add_uploadedfile_and_mapoverlay.py",
    "imports": [
      "from alembic import op",
      "import sqlalchemy",
      "from sqlalchemy.dialects import postgresql"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\a43abb6acab2_add_uploadedfile_and_mapoverlay.py",
        "module": "a43abb6acab2_add_uploadedfile_and_mapoverlay",
        "class_name": null,
        "function_name": "upgrade",
        "arguments": [],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "String",
          "f",
          "Boolean",
          "UniqueConstraint",
          "PrimaryKeyConstraint",
          "text",
          "DateTime",
          "Column",
          "Text",
          "create_table",
          "Integer",
          "Float",
          "ForeignKeyConstraint",
          "JSONB",
          "CheckConstraint"
        ],
        "line_start": 19,
        "line_end": 49
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\a43abb6acab2_add_uploadedfile_and_mapoverlay.py",
        "module": "a43abb6acab2_add_uploadedfile_and_mapoverlay",
        "class_name": null,
        "function_name": "downgrade",
        "arguments": [],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "drop_table"
        ],
        "line_start": 53,
        "line_end": 56
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\b7dcacd91b4a_add_quarry.py",
    "imports": [
      "from alembic import op",
      "import sqlalchemy"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\b7dcacd91b4a_add_quarry.py",
        "module": "b7dcacd91b4a_add_quarry",
        "class_name": null,
        "function_name": "upgrade",
        "arguments": [],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "create_foreign_key",
          "f",
          "Column",
          "create_table",
          "String",
          "values",
          "alter_column",
          "PrimaryKeyConstraint",
          "text",
          "column",
          "table",
          "execute",
          "update",
          "DateTime",
          "JSON",
          "batch_alter_table",
          "add_column",
          "insert",
          "Float",
          "Integer"
        ],
        "line_start": 19,
        "line_end": 82
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\b7dcacd91b4a_add_quarry.py",
        "module": "b7dcacd91b4a_add_quarry",
        "class_name": null,
        "function_name": "downgrade",
        "arguments": [],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "batch_alter_table",
          "f",
          "drop_constraint",
          "drop_table",
          "drop_column"
        ],
        "line_start": 87,
        "line_end": 101
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\c5fb8550f985_add_plannedidle.py",
    "imports": [
      "from alembic import op",
      "import sqlalchemy"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\c5fb8550f985_add_plannedidle.py",
        "module": "c5fb8550f985_add_plannedidle",
        "class_name": null,
        "function_name": "upgrade",
        "arguments": [],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "String",
          "batch_alter_table",
          "f",
          "PrimaryKeyConstraint",
          "text",
          "DateTime",
          "Column",
          "create_table",
          "Integer",
          "create_index",
          "ForeignKeyConstraint",
          "CheckConstraint"
        ],
        "line_start": 19,
        "line_end": 36
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\c5fb8550f985_add_plannedidle.py",
        "module": "c5fb8550f985_add_plannedidle",
        "class_name": null,
        "function_name": "downgrade",
        "arguments": [],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "batch_alter_table",
          "drop_table",
          "drop_index"
        ],
        "line_start": 41,
        "line_end": 47
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\f07a8f73270d_update_unload_payload_type_values.py",
    "imports": [
      "from alembic import op",
      "import sqlalchemy"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\f07a8f73270d_update_unload_payload_type_values.py",
        "module": "f07a8f73270d_update_unload_payload_type_values",
        "class_name": null,
        "function_name": "upgrade",
        "arguments": [],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "values",
          "update",
          "Enum",
          "column",
          "table",
          "execute"
        ],
        "line_start": 19,
        "line_end": 26
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\f07a8f73270d_update_unload_payload_type_values.py",
        "module": "f07a8f73270d_update_unload_payload_type_values",
        "class_name": null,
        "function_name": "downgrade",
        "arguments": [],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 29,
        "line_end": 30
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\fa791c45aefa_add_field_is_repair_area_to_idlearea.py",
    "imports": [
      "from alembic import op",
      "import sqlalchemy"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\fa791c45aefa_add_field_is_repair_area_to_idlearea.py",
        "module": "fa791c45aefa_add_field_is_repair_area_to_idlearea",
        "class_name": null,
        "function_name": "upgrade",
        "arguments": [],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "add_column",
          "Column",
          "Boolean"
        ],
        "line_start": 19,
        "line_end": 20
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\fa791c45aefa_add_field_is_repair_area_to_idlearea.py",
        "module": "fa791c45aefa_add_field_is_repair_area_to_idlearea",
        "class_name": null,
        "function_name": "downgrade",
        "arguments": [],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "drop_column"
        ],
        "line_start": 23,
        "line_end": 24
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\fea74ce0faa7_add_roadnet.py",
    "imports": [
      "from alembic import op",
      "import sqlalchemy",
      "from sqlalchemy.dialects import postgresql"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\fea74ce0faa7_add_roadnet.py",
        "module": "fea74ce0faa7_add_roadnet",
        "class_name": null,
        "function_name": "upgrade",
        "arguments": [],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "f",
          "PrimaryKeyConstraint",
          "text",
          "DateTime",
          "Column",
          "Text",
          "create_table",
          "Integer",
          "JSONB",
          "ForeignKeyConstraint"
        ],
        "line_start": 19,
        "line_end": 29
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\migrations\\versions\\fea74ce0faa7_add_roadnet.py",
        "module": "fea74ce0faa7_add_roadnet",
        "class_name": null,
        "function_name": "downgrade",
        "arguments": [],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "drop_table"
        ],
        "line_start": 33,
        "line_end": 35
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\date_time_service.py",
    "imports": [
      "from __future__ import annotations",
      "import os",
      "from datetime import datetime, date",
      "from zoneinfo import ZoneInfo, ZoneInfoNotFoundError",
      "from typing import Optional",
      "from pydantic import BaseModel"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\date_time_service.py",
        "module": "date_time_service",
        "class_name": "StartEndTimeGenerateService",
        "function_name": "__init__",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "tz_name",
            "type": "Optional[str]",
            "default": "None"
          },
          {
            "name": "start_hour",
            "type": "int",
            "default": "10"
          },
          {
            "name": "end_hour",
            "type": "int",
            "default": "18"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": ":param tz_name: имя таймзоны (например, 'Europe/Berlin'). Если None — используется переменная окружения TZ или 'UTC'.\n:param start_hour: час начала рабочего дня в локальном времени предприятия.\n:param end_hour: час конца рабочего дня в локальном времени предприятия.",
        "decorators": [],
        "is_public": true,
        "calls": [
          "getenv",
          "_load_zone",
          "int"
        ],
        "line_start": 25,
        "line_end": 34
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\date_time_service.py",
        "module": "date_time_service",
        "class_name": "StartEndTimeGenerateService",
        "function_name": "_load_zone",
        "arguments": [
          {
            "name": "name",
            "type": "str"
          }
        ],
        "return_type": "ZoneInfo",
        "returns": [],
        "docstring": null,
        "decorators": [
          "staticmethod"
        ],
        "is_public": false,
        "calls": [
          "ZoneInfo"
        ],
        "line_start": 37,
        "line_end": 41
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\date_time_service.py",
        "module": "date_time_service",
        "class_name": "StartEndTimeGenerateService",
        "function_name": "_current_date_in_enterprise_tz",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": "date",
        "returns": [
          "now.date()"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": false,
        "calls": [
          "now",
          "date"
        ],
        "line_start": 43,
        "line_end": 45
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\date_time_service.py",
        "module": "date_time_service",
        "class_name": "StartEndTimeGenerateService",
        "function_name": "_generate_time_in_enterprise_tz",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "on_date",
            "type": "date"
          },
          {
            "name": "hour",
            "type": "int"
          }
        ],
        "return_type": "datetime",
        "returns": [
          "datetime(on_date.year, on_date.month, on_date.day, hour, 0, 0, tzinfo=self.tz)"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": false,
        "calls": [
          "datetime"
        ],
        "line_start": 47,
        "line_end": 48
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\date_time_service.py",
        "module": "date_time_service",
        "class_name": "StartEndTimeGenerateService",
        "function_name": "_to_utc",
        "arguments": [
          {
            "name": "dt",
            "type": "datetime"
          }
        ],
        "return_type": "datetime",
        "returns": [
          "dt.astimezone(ZoneInfo('UTC'))"
        ],
        "docstring": null,
        "decorators": [
          "staticmethod"
        ],
        "is_public": false,
        "calls": [
          "ZoneInfo",
          "astimezone"
        ],
        "line_start": 51,
        "line_end": 52
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\date_time_service.py",
        "module": "date_time_service",
        "class_name": "StartEndTimeGenerateService",
        "function_name": "__call__",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": "StartEndTimeDTO",
        "returns": [
          "StartEndTimeDTO(start_time=start_utc, end_time=end_utc)"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": false,
        "calls": [
          "StartEndTimeDTO",
          "_generate_time_in_enterprise_tz",
          "_current_date_in_enterprise_tz",
          "_to_utc"
        ],
        "line_start": 54,
        "line_end": 63
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\object_service.py",
    "imports": [
      "import json",
      "from fastapi import HTTPException",
      "from sqlalchemy.orm import Session",
      "from sqlalchemy import select, delete",
      "from pydantic import ValidationError",
      "from app.models import TrailTruckAssociation, TYPE_MODEL_MAP, validate_object_type",
      "from app.forms import BlastingSchema, TemplateMixin, TemplateRefMixin, RoadNetSchema, MapOverlaySchema, TYPE_SCHEMA_MAP, ObjectActionRequest"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\object_service.py",
        "module": "object_service",
        "class_name": "ObjectDAO",
        "function_name": "__init__",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 20,
        "line_end": 21
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\object_service.py",
        "module": "object_service",
        "class_name": "ObjectDAO",
        "function_name": "get_by_id",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "model"
          },
          {
            "name": "obj_id",
            "type": "int"
          }
        ],
        "return_type": null,
        "returns": [
          "self.db.execute(stmt).scalar()"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "select",
          "execute",
          "scalar",
          "where"
        ],
        "line_start": 23,
        "line_end": 25
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\object_service.py",
        "module": "object_service",
        "class_name": "ObjectDAO",
        "function_name": "delete_scenario_associations",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "scenario_id",
            "type": "int"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "delete",
          "execute",
          "where"
        ],
        "line_start": 27,
        "line_end": 32
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\object_service.py",
        "module": "object_service",
        "class_name": "ObjectDAO",
        "function_name": "association_exists",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "scenario_id",
            "type": "int"
          },
          {
            "name": "trail_id",
            "type": "int"
          },
          {
            "name": "truck_id",
            "type": "int"
          }
        ],
        "return_type": "bool",
        "returns": [
          "self.db.execute(stmt).scalar() is not None"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "select",
          "execute",
          "scalar",
          "where"
        ],
        "line_start": 34,
        "line_end": 40
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\object_service.py",
        "module": "object_service",
        "class_name": "ObjectDAO",
        "function_name": "create_association",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "scenario_id",
            "type": "int"
          },
          {
            "name": "trail_id",
            "type": "int"
          },
          {
            "name": "truck_id",
            "type": "int"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "TrailTruckAssociation",
          "add"
        ],
        "line_start": 42,
        "line_end": 48
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\object_service.py",
        "module": "object_service",
        "class_name": "ObjectService",
        "function_name": "__init__",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "ObjectDAO"
        ],
        "line_start": 53,
        "line_end": 55
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\object_service.py",
        "module": "object_service",
        "class_name": "ObjectService",
        "function_name": "create_object",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "data",
            "type": "ObjectActionRequest"
          }
        ],
        "return_type": null,
        "returns": [
          "self._dispatch(data, action='create')"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "_dispatch"
        ],
        "line_start": 57,
        "line_end": 58
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\object_service.py",
        "module": "object_service",
        "class_name": "ObjectService",
        "function_name": "update_object",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "obj_id",
            "type": "int"
          },
          {
            "name": "data",
            "type": "ObjectActionRequest"
          }
        ],
        "return_type": null,
        "returns": [
          "self._dispatch(data, action='update')"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "_dispatch"
        ],
        "line_start": 60,
        "line_end": 62
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\object_service.py",
        "module": "object_service",
        "class_name": "ObjectService",
        "function_name": "_dispatch",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "data",
            "type": "ObjectActionRequest"
          },
          {
            "name": "action",
            "type": "str"
          }
        ],
        "return_type": null,
        "returns": [
          "service.process(data, action)"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": false,
        "calls": [
          "GenericObjectService",
          "ScenarioObjectService",
          "process",
          "ScheduleObjectService",
          "HTTPException",
          "validate_object_type",
          "get"
        ],
        "line_start": 64,
        "line_end": 80
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\object_service.py",
        "module": "object_service",
        "class_name": "BaseObjectService",
        "function_name": "__init__",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "dao",
            "type": "ObjectDAO"
          },
          {
            "name": "model"
          },
          {
            "name": "schema_cls"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 83,
        "line_end": 87
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\object_service.py",
        "module": "object_service",
        "class_name": "BaseObjectService",
        "function_name": "_prepare_data",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "data",
            "type": "dict"
          },
          {
            "name": "action",
            "type": "str"
          }
        ],
        "return_type": "dict",
        "returns": [
          "obj_data"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": false,
        "calls": [
          "dumps",
          "pop",
          "get",
          "copy"
        ],
        "line_start": 89,
        "line_end": 97
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\object_service.py",
        "module": "object_service",
        "class_name": "BaseObjectService",
        "function_name": "_validate_form",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "obj_data",
            "type": "dict"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": false,
        "calls": [
          "errors",
          "schema_cls",
          "HTTPException"
        ],
        "line_start": 99,
        "line_end": 106
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\object_service.py",
        "module": "object_service",
        "class_name": "BaseObjectService",
        "function_name": "_get_or_create",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "obj_id"
          },
          {
            "name": "action",
            "type": "str"
          }
        ],
        "return_type": null,
        "returns": [
          "obj"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": false,
        "calls": [
          "get_by_id",
          "add",
          "HTTPException",
          "model"
        ],
        "line_start": 108,
        "line_end": 118
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\object_service.py",
        "module": "object_service",
        "class_name": "BaseObjectService",
        "function_name": "_apply_form",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "form"
          },
          {
            "name": "obj"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": false,
        "calls": [
          "setattr",
          "dict",
          "items"
        ],
        "line_start": 120,
        "line_end": 125
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\object_service.py",
        "module": "object_service",
        "class_name": "GenericObjectService",
        "function_name": "process",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "data",
            "type": "ObjectActionRequest"
          },
          {
            "name": "action",
            "type": "str"
          }
        ],
        "return_type": null,
        "returns": [
          "{'success': True, 'id': obj.id}"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "str",
          "_prepare_data",
          "isinstance",
          "save_geojson_data",
          "_apply_form",
          "_validate_form",
          "HTTPException",
          "_get_or_create",
          "verify_template_bond",
          "verify_template_bond_reversed",
          "commit",
          "refresh",
          "convert_dxf",
          "get"
        ],
        "line_start": 129,
        "line_end": 156
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\object_service.py",
        "module": "object_service",
        "class_name": "ScheduleObjectService",
        "function_name": "process",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "data",
            "type": "ObjectActionRequest"
          },
          {
            "name": "action",
            "type": "str"
          }
        ],
        "return_type": null,
        "returns": [
          "{'success': True, 'id': obj.id}"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "_prepare_data",
          "isinstance",
          "_apply_form",
          "_validate_form",
          "_get_or_create",
          "handle_schedule_create",
          "commit",
          "refresh",
          "get"
        ],
        "line_start": 160,
        "line_end": 173
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\object_service.py",
        "module": "object_service",
        "class_name": "ScenarioObjectService",
        "function_name": "process",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "data",
            "type": "ObjectActionRequest"
          },
          {
            "name": "action",
            "type": "str"
          }
        ],
        "return_type": null,
        "returns": [
          "{'success': True, 'id': obj.id}"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "_prepare_data",
          "create_association",
          "isinstance",
          "_apply_form",
          "_validate_form",
          "delete_scenario_associations",
          "_get_or_create",
          "verify_template_bond",
          "association_exists",
          "commit",
          "refresh",
          "get"
        ],
        "line_start": 177,
        "line_end": 199
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\quarry_data_service.py",
    "imports": [
      "from typing import List, Dict, Any, Tuple",
      "import json",
      "from pydantic import BaseModel",
      "from sqlalchemy import select",
      "from sqlalchemy.orm import Session, defer, selectinload",
      "from app.models import Quarry, Shovel, Truck, Unload, Trail, FuelStation, IdleArea, Scenario, MapOverlay, PlannedIdle, RoadNet"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\quarry_data_service.py",
        "module": "quarry_data_service",
        "class_name": "QuarryDAO",
        "function_name": "__init__",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "db_session",
            "type": "Session"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 26,
        "line_end": 27
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\quarry_data_service.py",
        "module": "quarry_data_service",
        "class_name": "QuarryDAO",
        "function_name": "fetch_all",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "model"
          }
        ],
        "return_type": "List",
        "returns": [
          "self.db.execute(stmt).scalars().all()"
        ],
        "docstring": "Универсальный fetch для простых моделей: select(model).order_by(model.id.asc()).\nВозвращает список экземпляров модели.",
        "decorators": [],
        "is_public": true,
        "calls": [
          "select",
          "all",
          "scalars",
          "order_by",
          "asc",
          "execute"
        ],
        "line_start": 29,
        "line_end": 35
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\quarry_data_service.py",
        "module": "quarry_data_service",
        "class_name": "QuarryDAO",
        "function_name": "fetch_roadnet_id_pairs",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": "List[Tuple[int, int]]",
        "returns": [
          "self.db.execute(stmt).all()"
        ],
        "docstring": "Возвращает список (roadnet.id, roadnet.quarry_id) упорядоченных по id ASC.",
        "decorators": [],
        "is_public": true,
        "calls": [
          "select",
          "all",
          "order_by",
          "asc",
          "execute"
        ],
        "line_start": 37,
        "line_end": 42
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\quarry_data_service.py",
        "module": "quarry_data_service",
        "class_name": "QuarryDAO",
        "function_name": "fetch_map_overlays_deferred_geojson",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": "List",
        "returns": [
          "self.db.execute(stmt).scalars().all()"
        ],
        "docstring": "Возвращает MapOverlay без подгрузки большого поля geojson_data.",
        "decorators": [],
        "is_public": true,
        "calls": [
          "select",
          "all",
          "scalars",
          "order_by",
          "asc",
          "defer",
          "options",
          "execute"
        ],
        "line_start": 44,
        "line_end": 49
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\quarry_data_service.py",
        "module": "quarry_data_service",
        "class_name": "QuarryDAO",
        "function_name": "fetch_trails_with_quarry_id",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": "List[Tuple['Trail', int]]",
        "returns": [
          "self.db.execute(stmt).all()"
        ],
        "docstring": "Возвращает список кортежей (Trail, quarry_id) — делается join через Shovel.\nТакже подгружаем associations (selectinload).",
        "decorators": [],
        "is_public": true,
        "calls": [
          "select",
          "all",
          "options",
          "order_by",
          "asc",
          "join",
          "selectinload",
          "execute"
        ],
        "line_start": 51,
        "line_end": 62
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\quarry_data_service.py",
        "module": "quarry_data_service",
        "class_name": "QuarryDataService",
        "function_name": "__init__",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "db_session",
            "type": "Session"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "QuarryDAO"
        ],
        "line_start": 82,
        "line_end": 83
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\quarry_data_service.py",
        "module": "quarry_data_service",
        "class_name": "QuarryDataService",
        "function_name": "_model_to_dict",
        "arguments": [
          {
            "name": "model"
          },
          {
            "name": "instance"
          }
        ],
        "return_type": "Dict[str, Any]",
        "returns": [
          "{col_name: getattr(instance, col_name) for col_name in column_names}"
        ],
        "docstring": "Преобразовать экземпляр модели в словарь по колонкам таблицы.",
        "decorators": [
          "staticmethod"
        ],
        "is_public": false,
        "calls": [
          "getattr"
        ],
        "line_start": 86,
        "line_end": 91
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\quarry_data_service.py",
        "module": "quarry_data_service",
        "class_name": "QuarryDataService",
        "function_name": "__call__",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": "QuarryDataDTO",
        "returns": [
          "dto"
        ],
        "docstring": "Выполнить сбор всей информации и вернуть QuarryDataDTO.",
        "decorators": [],
        "is_public": false,
        "calls": [
          "_load_map_overlays",
          "values",
          "list",
          "_init_quarries",
          "_load_trails",
          "_load_related_models",
          "QuarryDataDTO",
          "_apply_roadnet"
        ],
        "line_start": 93,
        "line_end": 116
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\quarry_data_service.py",
        "module": "quarry_data_service",
        "class_name": "QuarryDataService",
        "function_name": "_init_quarries",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "quarry_map",
            "type": "Dict[int, Dict[str, Any]]"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": "Создаёт запись в quarry_map для каждого Quarry: копирует все колонки таблицы\nи создаёт пустые списки для связанных коллекций.",
        "decorators": [],
        "is_public": false,
        "calls": [
          "fetch_all",
          "getattr"
        ],
        "line_start": 118,
        "line_end": 133
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\quarry_data_service.py",
        "module": "quarry_data_service",
        "class_name": "QuarryDataService",
        "function_name": "_load_related_models",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "quarry_map",
            "type": "Dict[int, Dict[str, Any]]"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": "Загружает простые связанные сущности (без специальных преобразований).",
        "decorators": [],
        "is_public": false,
        "calls": [
          "fetch_all",
          "append",
          "getattr"
        ],
        "line_start": 135,
        "line_end": 149
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\quarry_data_service.py",
        "module": "quarry_data_service",
        "class_name": "QuarryDataService",
        "function_name": "_apply_roadnet",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "quarry_map",
            "type": "Dict[int, Dict[str, Any]]"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": "Устанавливает первую встреченную roadnet.id для каждого карьера (roadnet_id).",
        "decorators": [],
        "is_public": false,
        "calls": [
          "fetch_roadnet_id_pairs"
        ],
        "line_start": 151,
        "line_end": 160
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\quarry_data_service.py",
        "module": "quarry_data_service",
        "class_name": "QuarryDataService",
        "function_name": "_load_map_overlays",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "quarry_map",
            "type": "Dict[int, Dict[str, Any]]"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": "Загружает MapOverlay без поля geojson_data.",
        "decorators": [],
        "is_public": false,
        "calls": [
          "append",
          "getattr",
          "fetch_map_overlays_deferred_geojson"
        ],
        "line_start": 162,
        "line_end": 175
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\quarry_data_service.py",
        "module": "quarry_data_service",
        "class_name": "QuarryDataService",
        "function_name": "_load_trails",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "quarry_map",
            "type": "Dict[int, Dict[str, Any]]"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": "Загружает Trail c преобразованием raw_graph -> segments и сбором truck_associations.\nDAO возвращает [(Trail, quarry_id), ...]",
        "decorators": [],
        "is_public": false,
        "calls": [
          "getattr",
          "append",
          "fetch_trails_with_quarry_id",
          "loads"
        ],
        "line_start": 177,
        "line_end": 209
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\scenario_service.py",
    "imports": [
      "from typing import List, Dict, Any, Optional",
      "import json",
      "from datetime import datetime",
      "from pydantic import BaseModel",
      "from datetime import datetime",
      "from sqlalchemy import select",
      "from sqlalchemy.orm import Session, selectinload",
      "from app.models import Scenario, Trail, Shovel"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\scenario_service.py",
        "module": "scenario_service",
        "class_name": "ScenarioDAO",
        "function_name": "__init__",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "db_session",
            "type": "Session"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 34,
        "line_end": 35
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\scenario_service.py",
        "module": "scenario_service",
        "class_name": "ScenarioDAO",
        "function_name": "fetch_all_with_assocs",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": "List[Scenario]",
        "returns": [
          "self.db.execute(stmt).scalars().all()"
        ],
        "docstring": "Возвращает все Scenario.",
        "decorators": [],
        "is_public": true,
        "calls": [
          "select",
          "all",
          "scalars",
          "options",
          "order_by",
          "asc",
          "selectinload",
          "execute"
        ],
        "line_start": 37,
        "line_end": 49
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\scenario_service.py",
        "module": "scenario_service",
        "class_name": "ScenarioDAO",
        "function_name": "fetch_trails_by_quarry",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "quarry_id",
            "type": "int"
          }
        ],
        "return_type": "List[Trail]",
        "returns": [
          "self.db.execute(stmt).scalars().all()"
        ],
        "docstring": "Возвращает Trail, принадлежащие карьерам quarry_id (через Shovel).",
        "decorators": [],
        "is_public": true,
        "calls": [
          "select",
          "selectinload",
          "all",
          "scalars",
          "where",
          "order_by",
          "asc",
          "join",
          "options",
          "execute"
        ],
        "line_start": 51,
        "line_end": 62
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\scenario_service.py",
        "module": "scenario_service",
        "class_name": "ScenarioService",
        "function_name": "__init__",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "db_session",
            "type": "Session"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "ScenarioDAO"
        ],
        "line_start": 67,
        "line_end": 68
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\scenario_service.py",
        "module": "scenario_service",
        "class_name": "ScenarioService",
        "function_name": "__call__",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": "List[ScenarioDTO]",
        "returns": [
          "[self._scenario_to_dto(scenario) for scenario in scenarios]"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": false,
        "calls": [
          "fetch_all_with_assocs",
          "_scenario_to_dto"
        ],
        "line_start": 70,
        "line_end": 72
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\scenario_service.py",
        "module": "scenario_service",
        "class_name": "ScenarioService",
        "function_name": "_scenario_to_dto",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "scenario"
          }
        ],
        "return_type": "ScenarioDTO",
        "returns": [
          "ScenarioDTO(id=scenario.id, name=scenario.name, start_time=getattr(scenario, 'start_time', None), end_time=getattr(scenario, 'end_time', None), quarry_id=getattr(scenario, 'quarry_id', None), is_auto_truck_distribution=getattr(scenario, 'is_auto_truck_distribution', None), is_calc_reliability_enabled=getattr(scenario, 'is_calc_reliability_enabled', None), trails=trails)"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": false,
        "calls": [
          "_load_and_transform_trails",
          "_build_assoc_map",
          "getattr",
          "ScenarioDTO"
        ],
        "line_start": 74,
        "line_end": 87
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\scenario_service.py",
        "module": "scenario_service",
        "class_name": "ScenarioService",
        "function_name": "_build_assoc_map",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "scenario"
          }
        ],
        "return_type": "Dict[int, List[int]]",
        "returns": [
          "assoc_by_trail"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": false,
        "calls": [
          "append",
          "setdefault",
          "getattr"
        ],
        "line_start": 89,
        "line_end": 97
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\scenario_service.py",
        "module": "scenario_service",
        "class_name": "ScenarioService",
        "function_name": "_load_and_transform_trails",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "quarry_id",
            "type": "Optional[int]"
          },
          {
            "name": "assoc_by_trail",
            "type": "Dict[int, List[int]]"
          }
        ],
        "return_type": "List[TrailDTO]",
        "returns": [
          "trails_dto"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": false,
        "calls": [
          "_trail_to_dto",
          "fetch_trails_by_quarry"
        ],
        "line_start": 99,
        "line_end": 111
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\scenario_service.py",
        "module": "scenario_service",
        "class_name": "ScenarioService",
        "function_name": "_trail_to_dto",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "trail"
          },
          {
            "name": "assoc_by_trail",
            "type": "Dict[int, List[int]]"
          }
        ],
        "return_type": "TrailDTO",
        "returns": [
          "TrailDTO(id=trail.id, trail_type=trail.trail_type, shovel_id=trail.shovel_id, unload_id=trail.unload_id, segments=segments, trucks=trucks_in_scenario)"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": false,
        "calls": [
          "_parse_segments",
          "get",
          "getattr",
          "TrailDTO"
        ],
        "line_start": 113,
        "line_end": 124
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\scenario_service.py",
        "module": "scenario_service",
        "class_name": "ScenarioService",
        "function_name": "_parse_segments",
        "arguments": [
          {
            "name": "raw_graph",
            "type": "Optional[str]"
          }
        ],
        "return_type": "List[Any]",
        "returns": [],
        "docstring": null,
        "decorators": [
          "staticmethod"
        ],
        "is_public": false,
        "calls": [
          "isinstance",
          "loads"
        ],
        "line_start": 127,
        "line_end": 135
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\schedule_data_service.py",
    "imports": [
      "import json",
      "from datetime import datetime",
      "from typing import List, Optional, Any",
      "from zoneinfo import ZoneInfo",
      "from sqlalchemy import select",
      "from sqlalchemy.orm import Session",
      "from pydantic import BaseModel",
      "from app.models import Quarry",
      "from app.shift import ShiftLogic",
      "from app.shift import ShiftConfigDataException, ShiftConfigParseException"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\schedule_data_service.py",
        "module": "schedule_data_service",
        "class_name": "ScheduleDAO",
        "function_name": "__init__",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "db_session",
            "type": "Session"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 45,
        "line_end": 46
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\schedule_data_service.py",
        "module": "schedule_data_service",
        "class_name": "ScheduleDAO",
        "function_name": "fetch_filtered",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "model"
          },
          {
            "name": "start_time_utc",
            "type": "datetime"
          },
          {
            "name": "end_time_utc",
            "type": "datetime"
          },
          {
            "name": "quarry_id",
            "type": "int"
          },
          {
            "name": "schedule_type",
            "type": "str"
          }
        ],
        "return_type": "List[ScheduleItemDTO]",
        "returns": [
          "items"
        ],
        "docstring": "Возвращает список отфильтрованных элементов расписания в виде DTO.",
        "decorators": [],
        "is_public": true,
        "calls": [
          "select",
          "isinstance",
          "all",
          "getattr",
          "scalars",
          "loads",
          "where",
          "keys",
          "order_by",
          "ScheduleItemDTO",
          "asc",
          "set",
          "append",
          "execute",
          "get"
        ],
        "line_start": 48,
        "line_end": 83
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\schedule_data_service.py",
        "module": "schedule_data_service",
        "class_name": "ScheduleDataService",
        "function_name": "__init__",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "db_session",
            "type": "Session"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "ScheduleDAO"
        ],
        "line_start": 90,
        "line_end": 92
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\schedule_data_service.py",
        "module": "schedule_data_service",
        "class_name": "ScheduleDataService",
        "function_name": "__call__",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "model"
          },
          {
            "name": "date_str",
            "type": "str"
          },
          {
            "name": "quarry_id",
            "type": "int"
          },
          {
            "name": "schedule_type",
            "type": "str"
          },
          {
            "name": "enterprise_tz",
            "type": "ZoneInfo"
          },
          {
            "name": "shift_number",
            "type": "Optional[int]",
            "default": "None"
          },
          {
            "name": "start_time",
            "type": "Optional[str]",
            "default": "None"
          },
          {
            "name": "end_time",
            "type": "Optional[str]",
            "default": "None"
          }
        ],
        "return_type": "ScheduleDataResponseDTO",
        "returns": [
          "ScheduleDataResponseDTO(time={'start_time': start_time_utc.isoformat(), 'end_time': end_time_utc.isoformat()}, filters={'date': date_str, 'quarry_id': quarry_id, 'type': schedule_type, 'shift_number': shift_number, 'start_time': start_time, 'end_time': end_time}, items=items, shift_details=ShiftDetailsDTO(number=target_shift.number, begin_time_enterprise=target_shift.begin_time.isoformat(), end_time_enterprise=target_shift.end_time.isoformat(), day=target_shift.day.isoformat()) if target_shift else None)"
        ],
        "docstring": "Основная точка входа.",
        "decorators": [],
        "is_public": false,
        "calls": [
          "fetch_filtered",
          "ScheduleDataResponseDTO",
          "ShiftConfigDataException",
          "isoformat",
          "_resolve_time_window",
          "ShiftDetailsDTO",
          "get"
        ],
        "line_start": 94,
        "line_end": 148
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\schedule_data_service.py",
        "module": "schedule_data_service",
        "class_name": "ScheduleDataService",
        "function_name": "_resolve_time_window",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "quarry"
          },
          {
            "name": "date_str",
            "type": "str"
          },
          {
            "name": "enterprise_tz",
            "type": "ZoneInfo"
          },
          {
            "name": "shift_number",
            "type": "Optional[int]"
          },
          {
            "name": "start_time",
            "type": "Optional[str]"
          },
          {
            "name": "end_time",
            "type": "Optional[str]"
          }
        ],
        "return_type": null,
        "returns": [
          "(start_time_utc, end_time_utc, target_shift)"
        ],
        "docstring": "Определяет временной диапазон по номеру смены или вручную заданным временам.",
        "decorators": [],
        "is_public": false,
        "calls": [
          "astimezone",
          "ShiftConfigDataException",
          "fromisoformat",
          "factory",
          "ShiftConfigParseException",
          "len",
          "strptime",
          "for_date",
          "replace",
          "str",
          "ZoneInfo",
          "date"
        ],
        "line_start": 152,
        "line_end": 201
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\simulation_id_service.py",
    "imports": [
      "from datetime import datetime, timedelta",
      "from zoneinfo import ZoneInfo",
      "import uuid",
      "import json",
      "from operator import itemgetter",
      "from app.consts import STORED_RESULTS_NUMBER",
      "from app.models import RoadNet",
      "from app.sim_engine.writer import BatchWriter",
      "from app.sim_engine.simulation_manager import SimulationManager",
      "from typing import Any, Dict, Optional",
      "from pydantic import BaseModel, Field, field_validator, ValidationInfo",
      "from sqlalchemy import select",
      "from sqlalchemy.orm import Session",
      "from app.models import RoadNet, TYPE_SCHEDULE_MAP"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\simulation_id_service.py",
        "module": "simulation_id_service",
        "class_name": "SimulationRequestDTO",
        "function_name": "validate_quarry",
        "arguments": [
          {
            "name": "cls"
          },
          {
            "name": "v"
          }
        ],
        "return_type": null,
        "returns": [
          "v"
        ],
        "docstring": null,
        "decorators": [
          "field_validator('quarry')",
          "classmethod"
        ],
        "is_public": true,
        "calls": [
          "field_validator",
          "ValueError"
        ],
        "line_start": 30,
        "line_end": 33
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\simulation_id_service.py",
        "module": "simulation_id_service",
        "class_name": "SimulationRequestDTO",
        "function_name": "validate_times",
        "arguments": [
          {
            "name": "cls"
          },
          {
            "name": "v",
            "type": "str"
          },
          {
            "name": "info",
            "type": "ValidationInfo"
          }
        ],
        "return_type": null,
        "returns": [
          "v"
        ],
        "docstring": null,
        "decorators": [
          "field_validator('end_time')",
          "classmethod"
        ],
        "is_public": true,
        "calls": [
          "ValueError",
          "field_validator",
          "replace",
          "get",
          "fromisoformat"
        ],
        "line_start": 37,
        "line_end": 51
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\simulation_id_service.py",
        "module": "simulation_id_service",
        "class_name": "SimulationDAO",
        "function_name": "__init__",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "db_session",
            "type": "Session"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 56,
        "line_end": 57
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\simulation_id_service.py",
        "module": "simulation_id_service",
        "class_name": "SimulationDAO",
        "function_name": "fetch_road_net_by_id",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "road_net_id",
            "type": "int"
          }
        ],
        "return_type": null,
        "returns": [
          "self.db.execute(stmt).scalar()"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "select",
          "execute",
          "scalar",
          "where"
        ],
        "line_start": 59,
        "line_end": 61
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\simulation_id_service.py",
        "module": "simulation_id_service",
        "class_name": "SimulationDAO",
        "function_name": "get_filtered_schedule_items",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "model"
          },
          {
            "name": "start_time_utc"
          },
          {
            "name": "end_time_utc"
          },
          {
            "name": "quarry_id"
          },
          {
            "name": "schedule_type"
          }
        ],
        "return_type": "list",
        "returns": [
          "item_list"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "select",
          "isinstance",
          "set",
          "getattr",
          "scalars",
          "loads",
          "where",
          "order_by",
          "asc",
          "keys",
          "append",
          "execute"
        ],
        "line_start": 63,
        "line_end": 88
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\simulation_id_service.py",
        "module": "simulation_id_service",
        "class_name": "SimulationDAO",
        "function_name": "fetch_schedules",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "quarry_id",
            "type": "int"
          },
          {
            "name": "start_time",
            "type": "datetime"
          },
          {
            "name": "end_time",
            "type": "datetime"
          }
        ],
        "return_type": "dict",
        "returns": [
          "schedules"
        ],
        "docstring": "Получает blasting и planned_idle расписания для карьера.",
        "decorators": [],
        "is_public": true,
        "calls": [
          "get_filtered_schedule_items",
          "get"
        ],
        "line_start": 92,
        "line_end": 103
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\simulation_id_service.py",
        "module": "simulation_id_service",
        "class_name": "GetSimIdService",
        "function_name": "__init__",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "data",
            "type": "SimulationRequestDTO"
          },
          {
            "name": "db"
          },
          {
            "name": "redis_client"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "SimulationDAO"
        ],
        "line_start": 108,
        "line_end": 112
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\simulation_id_service.py",
        "module": "simulation_id_service",
        "class_name": "GetSimIdService",
        "function_name": "__call__",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [
          "sim_id"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": false,
        "calls": [
          "BatchWriter",
          "str",
          "timedelta",
          "_store_simulation_data",
          "SimulationManager",
          "astimezone",
          "fetch_schedules",
          "fetch_road_net_by_id",
          "run",
          "uuid4",
          "model_dump",
          "replace",
          "_cleanup_old_simulations",
          "get",
          "ZoneInfo",
          "fromisoformat"
        ],
        "line_start": 114,
        "line_end": 162
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\simulation_id_service.py",
        "module": "simulation_id_service",
        "class_name": "GetSimIdService",
        "function_name": "_store_simulation_data",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "sim_key_base",
            "type": "str"
          },
          {
            "name": "sim_data",
            "type": "dict"
          },
          {
            "name": "ttl",
            "type": "timedelta"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": "Сохраняет результаты симуляции в Redis.",
        "decorators": [],
        "is_public": false,
        "calls": [
          "setex",
          "dumps",
          "pipeline",
          "execute",
          "items"
        ],
        "line_start": 165,
        "line_end": 174
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\simulation_id_service.py",
        "module": "simulation_id_service",
        "class_name": "GetSimIdService",
        "function_name": "_cleanup_old_simulations",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "sim_key_base",
            "type": "str"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": "Удаляет старые симуляции, если их слишком много.",
        "decorators": [],
        "is_public": false,
        "calls": [
          "ttl",
          "len",
          "delete",
          "scan_iter",
          "replace",
          "itemgetter",
          "sort"
        ],
        "line_start": 176,
        "line_end": 196
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\template_service.py",
    "imports": [
      "from typing import List, Dict, Any, Optional",
      "from pydantic import BaseModel",
      "from sqlalchemy import select",
      "from sqlalchemy.orm import Session",
      "from app.forms import ShovelTemplate, TruckTemplate, UnloadTemplate, FuelStationTemplate"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\template_service.py",
        "module": "template_service",
        "class_name": "TemplateDAO",
        "function_name": "__init__",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "db_session",
            "type": "Session"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 21,
        "line_end": 22
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\template_service.py",
        "module": "template_service",
        "class_name": "TemplateDAO",
        "function_name": "fetch_all",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "model"
          }
        ],
        "return_type": "List",
        "returns": [
          "result"
        ],
        "docstring": "Вернуть все строки модели, упорядоченные по id ASC.",
        "decorators": [],
        "is_public": true,
        "calls": [
          "select",
          "all",
          "scalars",
          "order_by",
          "asc",
          "execute"
        ],
        "line_start": 24,
        "line_end": 30
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\template_service.py",
        "module": "template_service",
        "class_name": "AllTemplatesListService",
        "function_name": "__init__",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "db_session",
            "type": "Session"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "TemplateDAO"
        ],
        "line_start": 47,
        "line_end": 48
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\template_service.py",
        "module": "template_service",
        "class_name": "AllTemplatesListService",
        "function_name": "_model_to_dict_list",
        "arguments": [
          {
            "name": "model"
          },
          {
            "name": "instances",
            "type": "List"
          }
        ],
        "return_type": "List[Dict[str, Any]]",
        "returns": [
          "[{col_name: getattr(inst, col_name) for col_name in column_names} for inst in instances]"
        ],
        "docstring": "Преобразование модели в List[Dict].",
        "decorators": [
          "staticmethod"
        ],
        "is_public": false,
        "calls": [
          "getattr"
        ],
        "line_start": 51,
        "line_end": 60
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\template_service.py",
        "module": "template_service",
        "class_name": "AllTemplatesListService",
        "function_name": "_generate_templates_dict",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": "Dict[str, List[Dict[str, Any]]]",
        "returns": [
          "result"
        ],
        "docstring": "Генерация словаря для шаблонов.",
        "decorators": [],
        "is_public": false,
        "calls": [
          "fetch_all",
          "_model_to_dict_list"
        ],
        "line_start": 62,
        "line_end": 70
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\services\\template_service.py",
        "module": "template_service",
        "class_name": "AllTemplatesListService",
        "function_name": "__call__",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": "AllTemplatesDTO",
        "returns": [
          "AllTemplatesDTO(**dto_payload)"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": false,
        "calls": [
          "_generate_templates_dict",
          "AllTemplatesDTO",
          "get"
        ],
        "line_start": 72,
        "line_end": 82
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\config.py",
    "imports": [],
    "functions": []
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\enums.py",
    "imports": [
      "import enum"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\enums.py",
        "module": "enums",
        "class_name": "ObjectType",
        "function_name": "__str__",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [
          "self.key()"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": false,
        "calls": [
          "key"
        ],
        "line_start": 13,
        "line_end": 14
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\enums.py",
        "module": "enums",
        "class_name": "ObjectType",
        "function_name": "ru",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": "str",
        "returns": [
          "self.value[2]"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 16,
        "line_end": 17
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\enums.py",
        "module": "enums",
        "class_name": "ObjectType",
        "function_name": "key",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": "str",
        "returns": [
          "self.value[1]"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 19,
        "line_end": 20
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\enums.py",
        "module": "enums",
        "class_name": "ObjectType",
        "function_name": "code",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": "int",
        "returns": [
          "self.value[0]"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 22,
        "line_end": 23
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\enums.py",
        "module": "enums",
        "class_name": "IdleAreaType",
        "function_name": "__str__",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [
          "self.key()"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": false,
        "calls": [
          "key"
        ],
        "line_start": 32,
        "line_end": 33
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\enums.py",
        "module": "enums",
        "class_name": "IdleAreaType",
        "function_name": "ru",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": "str",
        "returns": [
          "self.value[2]"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 35,
        "line_end": 36
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\enums.py",
        "module": "enums",
        "class_name": "IdleAreaType",
        "function_name": "key",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": "str",
        "returns": [
          "self.value[1]"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 38,
        "line_end": 39
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\enums.py",
        "module": "enums",
        "class_name": "IdleAreaType",
        "function_name": "code",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": "int",
        "returns": [
          "self.value[0]"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 41,
        "line_end": 42
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\events.py",
    "imports": [
      "import enum",
      "from dataclasses import dataclass, fields, is_dataclass, asdict",
      "from enum import Enum",
      "from typing import Any",
      "from app.sim_engine.core.simulations.utils.mixins import DataclassEnumSerializerMixin",
      "from app.sim_engine.enums import ObjectType"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\events.py",
        "module": "events",
        "class_name": "EventType",
        "function_name": "__str__",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [
          "self.value[1]"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": false,
        "calls": [],
        "line_start": 29,
        "line_end": 30
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\events.py",
        "module": "events",
        "class_name": "EventType",
        "function_name": "code",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [
          "self.value[0]"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 32,
        "line_end": 33
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\events.py",
        "module": "events",
        "class_name": "EventType",
        "function_name": "ru",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [
          "self.value[2]"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 35,
        "line_end": 36
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\events.py",
        "module": "events",
        "class_name": "EventType",
        "function_name": "en",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [
          "self.value[1]"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 38,
        "line_end": 39
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\planner.py",
    "imports": [
      "from __future__ import annotations",
      "import logging",
      "from collections import defaultdict",
      "from copy import deepcopy",
      "from dataclasses import dataclass",
      "from datetime import datetime",
      "from typing import Dict, Tuple, List, Optional",
      "from math import floor",
      "from ortools.sat.python import cp_model",
      "from pulp import LpProblem, LpMaximize, LpVariable, LpBinary, LpInteger, lpSum, LpStatus, value, PULP_CBC_CMD, HiGHS_CMD, SCIP_CMD",
      "import os",
      "from app.sim_engine.core.calculations.shovel import ShovelCalc",
      "from app.sim_engine.core.calculations.truck import TruckCalc",
      "from app.sim_engine.core.calculations.unload import UnloadCalc",
      "from app.sim_engine.core.geometry import build_route_edges_by_road_net, build_route_edges_by_road_net_from_position",
      "from app.sim_engine.core.props import SimData, PlannedTrip",
      "from app.sim_engine.core.simulations.utils.dependency_resolver import DependencyResolver",
      "from app.sim_engine.enums import ObjectType"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\planner.py",
        "module": "planner",
        "class_name": "InputPlanningData",
        "function_name": "truck_ids",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": "List[int]",
        "returns": [
          "sorted({i for i, _ in self.T_load.keys()})"
        ],
        "docstring": null,
        "decorators": [
          "property"
        ],
        "is_public": true,
        "calls": [
          "sorted",
          "keys"
        ],
        "line_start": 53,
        "line_end": 54
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\planner.py",
        "module": "planner",
        "class_name": "InputPlanningData",
        "function_name": "shovel_ids",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": "List[int]",
        "returns": [
          "sorted({j for _, j in self.T_load.keys()})"
        ],
        "docstring": null,
        "decorators": [
          "property"
        ],
        "is_public": true,
        "calls": [
          "sorted",
          "keys"
        ],
        "line_start": 57,
        "line_end": 58
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\planner.py",
        "module": "planner",
        "class_name": "InputPlanningData",
        "function_name": "unload_ids",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": "List[int]",
        "returns": [
          "sorted({z for _, z in self.T_unload.keys()})"
        ],
        "docstring": null,
        "decorators": [
          "property"
        ],
        "is_public": true,
        "calls": [
          "sorted",
          "keys"
        ],
        "line_start": 61,
        "line_end": 62
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\planner.py",
        "module": "planner",
        "class_name": null,
        "function_name": "compute_Kmax_i",
        "arguments": [
          {
            "name": "inst",
            "type": "InputPlanningData"
          },
          {
            "name": "i",
            "type": "int"
          }
        ],
        "return_type": "int",
        "returns": [
          "max(0, floor(available / max(1, min_d)))"
        ],
        "docstring": "Грубая верхняя граница числа рейсов для самосвала i",
        "decorators": [],
        "is_public": true,
        "calls": [
          "floor",
          "max",
          "min",
          "keys"
        ],
        "line_start": 65,
        "line_end": 76
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\planner.py",
        "module": "planner",
        "class_name": null,
        "function_name": "default_Kmax",
        "arguments": [
          {
            "name": "inst",
            "type": "InputPlanningData"
          }
        ],
        "return_type": "Dict[int, int]",
        "returns": [
          "{i: compute_Kmax_i(inst, i) for i in inst.truck_ids}"
        ],
        "docstring": "Если Kmax не задан, вычислить его для каждого самосвала",
        "decorators": [],
        "is_public": true,
        "calls": [
          "compute_Kmax_i"
        ],
        "line_start": 79,
        "line_end": 81
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\planner.py",
        "module": "planner",
        "class_name": null,
        "function_name": "a_use",
        "arguments": [
          {
            "name": "i"
          },
          {
            "name": "k"
          },
          {
            "name": "j"
          }
        ],
        "return_type": null,
        "returns": [
          "lpSum((x[i, k, j, z] for z in Z))"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "lpSum"
        ],
        "line_start": 136,
        "line_end": 137
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\planner.py",
        "module": "planner",
        "class_name": null,
        "function_name": "b_use",
        "arguments": [
          {
            "name": "i"
          },
          {
            "name": "k"
          },
          {
            "name": "z"
          }
        ],
        "return_type": null,
        "returns": [
          "lpSum((x[i, k, j, z] for j in J))"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "lpSum"
        ],
        "line_start": 139,
        "line_end": 140
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\planner.py",
        "module": "planner",
        "class_name": null,
        "function_name": "build_model",
        "arguments": [
          {
            "name": "inst",
            "type": "InputPlanningData"
          },
          {
            "name": "shovel_queue",
            "type": "bool",
            "default": "True"
          }
        ],
        "return_type": null,
        "returns": [
          "(model, vars_pack)"
        ],
        "docstring": "Собираем все ограничения и условия поиска решения",
        "decorators": [],
        "is_public": true,
        "calls": [
          "lpSum"
        ],
        "line_start": 84,
        "line_end": 243
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\planner.py",
        "module": "planner",
        "class_name": null,
        "function_name": "solve_and_extract",
        "arguments": [
          {
            "name": "inst",
            "type": "InputPlanningData"
          }
        ],
        "return_type": null,
        "returns": [
          "result"
        ],
        "docstring": "Решить модель и получить расписание\n    ",
        "decorators": [],
        "is_public": true,
        "calls": [
          "int",
          "ValueError",
          "cpu_count",
          "value",
          "PULP_CBC_CMD",
          "solve",
          "range",
          "HiGHS_CMD",
          "round",
          "append",
          "build_model",
          "info",
          "sim_conf",
          "sort"
        ],
        "line_start": 246,
        "line_end": 319
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\planner.py",
        "module": "planner",
        "class_name": null,
        "function_name": "build_cp_model",
        "arguments": [
          {
            "name": "inst",
            "type": "InputPlanningData"
          },
          {
            "name": "use_individual_kmax",
            "type": "bool",
            "default": "True"
          }
        ],
        "return_type": null,
        "returns": [
          "(model, V)"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "int",
          "CpModel",
          "OnlyEnforceIf",
          "sum",
          "Add",
          "values",
          "range",
          "max",
          "dict",
          "round",
          "compute_Kmax_i",
          "NewBoolVar",
          "append",
          "AddNoOverlap",
          "Maximize",
          "Not",
          "NewOptionalIntervalVar",
          "AddBoolOr",
          "NewIntVar"
        ],
        "line_start": 323,
        "line_end": 452
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\planner.py",
        "module": "planner",
        "class_name": null,
        "function_name": "solve_and_extract_cp",
        "arguments": [
          {
            "name": "inst",
            "type": "InputPlanningData"
          },
          {
            "name": "time_limit",
            "type": "Optional[int]",
            "default": "None"
          },
          {
            "name": "num_workers",
            "type": "int",
            "default": "16"
          }
        ],
        "return_type": null,
        "returns": [
          "result"
        ],
        "docstring": "Решение CP‑SAT и извлечение расписания в прежнем формате.",
        "decorators": [],
        "is_public": true,
        "calls": [
          "build_cp_model",
          "int",
          "float",
          "range",
          "BooleanValue",
          "Solve",
          "ObjectiveValue",
          "CpSolver",
          "append",
          "Value",
          "get",
          "info",
          "sim_conf",
          "sort"
        ],
        "line_start": 455,
        "line_end": 545
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\planner.py",
        "module": "planner",
        "class_name": null,
        "function_name": "make_example",
        "arguments": [],
        "return_type": "InputPlanningData",
        "returns": [
          "InputPlanningData(N=N, M=M, Z=Z, D_work=D_work, T_haul=T_haul, T_return=T_return, T_load=T_load, T_unload=T_unload, T_start=T_start, T_end=T_end, m_tons=m_tons)"
        ],
        "docstring": "Заполняем исходные данные\nКоличество техники, матрица времен выполнение каждой операции (полный перебор)",
        "decorators": [],
        "is_public": true,
        "calls": [
          "range",
          "InputPlanningData"
        ],
        "line_start": 548,
        "line_end": 595
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\planner.py",
        "module": "planner",
        "class_name": null,
        "function_name": "dummy_func",
        "arguments": [],
        "return_type": null,
        "returns": [
          "0"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 598,
        "line_end": 599
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\planner.py",
        "module": "planner",
        "class_name": null,
        "function_name": "get_planning_data",
        "arguments": [
          {
            "name": "simdata",
            "type": "SimData"
          }
        ],
        "return_type": "InputPlanningData",
        "returns": [
          "planning_data"
        ],
        "docstring": "Метод набивающий матрицу данных",
        "decorators": [],
        "is_public": true,
        "calls": [
          "values",
          "int",
          "build_route_edges_by_road_net_from_position",
          "unload_calculation_by_norm",
          "len",
          "build_route_edges_by_road_net",
          "calculate_load_cycles",
          "dict",
          "calculate_time_motion_by_edges",
          "InputPlanningData"
        ],
        "line_start": 602,
        "line_end": 729
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\planner.py",
        "module": "planner",
        "class_name": null,
        "function_name": "run_planning",
        "arguments": [
          {
            "name": "simdata",
            "type": "SimData"
          }
        ],
        "return_type": null,
        "returns": [
          "out"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "get_planning_data",
          "solve_and_extract_cp",
          "info",
          "sim_conf"
        ],
        "line_start": 732,
        "line_end": 747
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\planner.py",
        "module": "planner",
        "class_name": null,
        "function_name": "run_planning_trips",
        "arguments": [
          {
            "name": "sim_data",
            "type": "SimData"
          },
          {
            "name": "exclude_objects",
            "type": "dict[str, list[int]]"
          }
        ],
        "return_type": "dict",
        "returns": [
          "planned_trips"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "defaultdict",
          "int",
          "run_planning",
          "PlannedTrip",
          "append",
          "pop",
          "total_seconds"
        ],
        "line_start": 750,
        "line_end": 784
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\reliability.py",
    "imports": [
      "import logging",
      "import random",
      "import numpy",
      "from scipy import stats"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\reliability.py",
        "module": "reliability",
        "class_name": null,
        "function_name": "extract_metric",
        "arguments": [
          {
            "name": "runs",
            "type": "list[dict]"
          },
          {
            "name": "metric",
            "type": "str"
          }
        ],
        "return_type": "np.ndarray",
        "returns": [
          "x[~np.isnan(x)]"
        ],
        "docstring": "Извлекает выбранную метрику из первых записей\n\nПараметры:\n    runs   : исходные записи симуляций\n    metric : название метрики: \"trips\" | \"volume\" | \"weight\"\n\nВозвращает:\n    Массив значений выбранной метрики без пропусков.",
        "decorators": [],
        "is_public": true,
        "calls": [
          "ValueError",
          "float",
          "append",
          "asarray",
          "isnan",
          "get"
        ],
        "line_start": 18,
        "line_end": 43
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\reliability.py",
        "module": "reliability",
        "class_name": null,
        "function_name": "descriptive_stats",
        "arguments": [
          {
            "name": "x",
            "type": "np.ndarray"
          }
        ],
        "return_type": "dict",
        "returns": [
          "dict(n=n, mean=m, std=s, median=med, q1=q1, q3=q3, iqr=iqr, skew=sk, kurtosis=kurt, xmin=float(np.min(x)), xmax=float(np.max(x)))"
        ],
        "docstring": "Краткая описательная статистика, полезная для понимания формы распределения\n\nВозвращает:\n    n        : объём выборки\n    mean     : среднее\n    std      : выборочное стандартное отклонение\n    median   : медиана\n    q1, q3   : квартильный интервал\n    iqr      : межквартильный размах\n    skew     : асимметрия\n    kurtosis : избыточный эксцесс\n    xmin,xmax: минимальное и максимальное наблюдения",
        "decorators": [],
        "is_public": true,
        "calls": [
          "quantile",
          "kurtosis",
          "float",
          "len",
          "skew",
          "max",
          "median",
          "dict",
          "std",
          "min",
          "mean",
          "asarray"
        ],
        "line_start": 50,
        "line_end": 75
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\reliability.py",
        "module": "reliability",
        "class_name": null,
        "function_name": "predictive_interval_t",
        "arguments": [
          {
            "name": "x",
            "type": "np.ndarray"
          },
          {
            "name": "alpha",
            "type": "float",
            "default": "0.05"
          }
        ],
        "return_type": "tuple[float, float]",
        "returns": [
          "(m - half, m + half)"
        ],
        "docstring": "Двусторонний t-предиктивный интервал уровня 1-α для будущего наблюдения\n\nИдея:\n    Если данные близки к симметрии и нормальности, то\n    (X_new - среднее)/[S*sqrt(1+1/n)] ~ t_{n-1}.\n    Отсюда границы: среднее ± t_{1-α/2, n-1} * S * sqrt(1+1/n).\n\nВозвращает:\n    (нижняя, верхняя) границы вероятностного коридора",
        "decorators": [],
        "is_public": true,
        "calls": [
          "ppf",
          "float",
          "len",
          "sqrt",
          "std",
          "mean",
          "asarray"
        ],
        "line_start": 82,
        "line_end": 105
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\reliability.py",
        "module": "reliability",
        "class_name": null,
        "function_name": "robust_pi_quantiles",
        "arguments": [
          {
            "name": "x",
            "type": "np.ndarray"
          },
          {
            "name": "alpha",
            "type": "float",
            "default": "0.05"
          }
        ],
        "return_type": "tuple[float, float]",
        "returns": [
          "(float(lo), float(hi))"
        ],
        "docstring": "Робастный предиктивный интервал по эмпирическим квантилям.\n\nИдея:\n    Никаких предположений о форме: берём квантиль α/2 и 1-α/2.\n    Интервал естественно подстраивается под асимметрию распределения",
        "decorators": [],
        "is_public": true,
        "calls": [
          "float",
          "len",
          "asarray",
          "quantile"
        ],
        "line_start": 107,
        "line_end": 119
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\reliability.py",
        "module": "reliability",
        "class_name": null,
        "function_name": "split_conformal_pi",
        "arguments": [
          {
            "name": "x",
            "type": "np.ndarray"
          },
          {
            "name": "alpha",
            "type": "float",
            "default": "0.05"
          },
          {
            "name": "seed",
            "type": "int",
            "default": "123"
          }
        ],
        "return_type": "tuple[float, float]",
        "returns": [
          "(mu - q, mu + q)"
        ],
        "docstring": "Симметричный split-conformal интервал с гарантией покрытия ≈ 1-α\n\nИдея:\n    Делим данные на обучение и калибровку.\n    На обучении считаем центр (среднее), на калибровке - остатки |X-центр|\n    Берём дискретный квантиль остатка уровня 1-α\n    симметрично откладываем от центра.",
        "decorators": [],
        "is_public": true,
        "calls": [
          "clip",
          "int",
          "ceil",
          "float",
          "partition",
          "shuffle",
          "abs",
          "sort",
          "default_rng",
          "len",
          "mean",
          "asarray",
          "copy"
        ],
        "line_start": 121,
        "line_end": 148
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\reliability.py",
        "module": "reliability",
        "class_name": null,
        "function_name": "lognormal_pi",
        "arguments": [
          {
            "name": "x",
            "type": "np.ndarray"
          },
          {
            "name": "alpha",
            "type": "float",
            "default": "0.05"
          }
        ],
        "return_type": "tuple[float, float]",
        "returns": [
          "(float(np.exp(m - half)), float(np.exp(m + half)))"
        ],
        "docstring": "Интервал при лог-нормальной аппроксимации",
        "decorators": [],
        "is_public": true,
        "calls": [
          "ppf",
          "predictive_interval_t",
          "float",
          "log",
          "len",
          "any",
          "sqrt",
          "std",
          "mean",
          "asarray",
          "exp"
        ],
        "line_start": 150,
        "line_end": 162
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\reliability.py",
        "module": "reliability",
        "class_name": null,
        "function_name": "kde_hdi",
        "arguments": [
          {
            "name": "x",
            "type": "np.ndarray"
          },
          {
            "name": "alpha",
            "type": "float",
            "default": "0.05"
          },
          {
            "name": "grids",
            "type": "int",
            "default": "2048"
          }
        ],
        "return_type": "tuple[float, float]",
        "returns": [
          "(float(sel[0]), float(sel[-1]))"
        ],
        "docstring": "Интервал наибольшей плотности (HDI) по сглаженной оценке плотности (KDE).",
        "decorators": [],
        "is_public": true,
        "calls": [
          "gaussian_kde",
          "float",
          "linspace",
          "kde",
          "argsort",
          "max",
          "cumsum",
          "min",
          "len",
          "asarray",
          "sort"
        ],
        "line_start": 169,
        "line_end": 185
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\reliability.py",
        "module": "reliability",
        "class_name": null,
        "function_name": "bootstrap_pi",
        "arguments": [
          {
            "name": "x",
            "type": "np.ndarray"
          },
          {
            "name": "alpha",
            "type": "float",
            "default": "0.05"
          },
          {
            "name": "B",
            "type": "int",
            "default": "5000"
          },
          {
            "name": "seed",
            "type": "int",
            "default": "123"
          }
        ],
        "return_type": "tuple[float, float]",
        "returns": [
          "(float(lo), float(hi))"
        ],
        "docstring": "Бутстрэп-интервал (перцентильный): эмпирическое предиктивное распределение.",
        "decorators": [],
        "is_public": true,
        "calls": [
          "quantile",
          "float",
          "default_rng",
          "choice",
          "asarray"
        ],
        "line_start": 187,
        "line_end": 195
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\reliability.py",
        "module": "reliability",
        "class_name": null,
        "function_name": "jackknife_plus_pi",
        "arguments": [
          {
            "name": "x",
            "type": "np.ndarray"
          },
          {
            "name": "alpha",
            "type": "float",
            "default": "0.05"
          }
        ],
        "return_type": "tuple[float, float]",
        "returns": [
          "(float(mu_full - q), float(mu_full + q))"
        ],
        "docstring": "Интервал Jackknife+",
        "decorators": [],
        "is_public": true,
        "calls": [
          "quantile",
          "predictive_interval_t",
          "float",
          "abs",
          "array",
          "len",
          "sum",
          "mean",
          "asarray"
        ],
        "line_start": 197,
        "line_end": 209
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\reliability.py",
        "module": "reliability",
        "class_name": null,
        "function_name": "split_conformal_asymmetric",
        "arguments": [
          {
            "name": "x",
            "type": "np.ndarray"
          },
          {
            "name": "alpha",
            "type": "float",
            "default": "0.05"
          },
          {
            "name": "seed",
            "type": "int",
            "default": "123"
          }
        ],
        "return_type": "tuple[float, float]",
        "returns": [
          "(float(mu + q_lo), float(mu + q_hi))"
        ],
        "docstring": "Асимметричный split-conformal",
        "decorators": [],
        "is_public": true,
        "calls": [
          "quantile",
          "float",
          "shuffle",
          "default_rng",
          "len",
          "mean",
          "asarray",
          "copy"
        ],
        "line_start": 211,
        "line_end": 229
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\reliability.py",
        "module": "reliability",
        "class_name": null,
        "function_name": "inv_yj",
        "arguments": [
          {
            "name": "yv",
            "type": "np.ndarray"
          },
          {
            "name": "lmbda",
            "type": "float"
          }
        ],
        "return_type": "np.ndarray",
        "returns": [
          "out"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "finfo",
          "empty_like",
          "power",
          "abs",
          "errstate",
          "any",
          "expm1",
          "maximum",
          "exp",
          "asarray"
        ],
        "line_start": 250,
        "line_end": 278
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\reliability.py",
        "module": "reliability",
        "class_name": null,
        "function_name": "yeojohnson_pi",
        "arguments": [
          {
            "name": "x",
            "type": "np.ndarray"
          },
          {
            "name": "alpha",
            "type": "float",
            "default": "0.05"
          }
        ],
        "return_type": "tuple[float, float]",
        "returns": [
          "(lo, hi)"
        ],
        "docstring": "Интервал на основе преобразования Йео–Джонсона",
        "decorators": [],
        "is_public": true,
        "calls": [
          "finfo",
          "empty_like",
          "power",
          "abs",
          "errstate",
          "any",
          "expm1",
          "maximum",
          "exp",
          "asarray"
        ],
        "line_start": 231,
        "line_end": 283
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\reliability.py",
        "module": "reliability",
        "class_name": null,
        "function_name": "half_sample_mode",
        "arguments": [
          {
            "name": "x",
            "type": "np.ndarray"
          }
        ],
        "return_type": "float",
        "returns": [
          "half_sample_mode(y[j:j + k + n % 2])"
        ],
        "docstring": "Робастная мода (Half-Sample Mode, HSM).",
        "decorators": [],
        "is_public": true,
        "calls": [
          "argmin",
          "int",
          "float",
          "len",
          "half_sample_mode",
          "mean",
          "asarray",
          "sort"
        ],
        "line_start": 285,
        "line_end": 296
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\reliability.py",
        "module": "reliability",
        "class_name": null,
        "function_name": "kde_mode",
        "arguments": [
          {
            "name": "x",
            "type": "np.ndarray"
          },
          {
            "name": "grids",
            "type": "int",
            "default": "512"
          }
        ],
        "return_type": "float",
        "returns": [
          "float(grid[np.argmax(dens)])"
        ],
        "docstring": "Мода по сглаженной плотности (KDE)",
        "decorators": [],
        "is_public": true,
        "calls": [
          "gaussian_kde",
          "float",
          "linspace",
          "kde",
          "max",
          "min",
          "argmax"
        ],
        "line_start": 298,
        "line_end": 305
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\reliability.py",
        "module": "reliability",
        "class_name": null,
        "function_name": "loo_coverage",
        "arguments": [
          {
            "name": "x",
            "type": "np.ndarray"
          },
          {
            "name": "get_interval"
          },
          {
            "name": "alpha",
            "type": "float",
            "default": "0.05"
          },
          {
            "name": "**kwargs",
            "kind": "kwarg"
          }
        ],
        "return_type": "float",
        "returns": [
          "inside / n"
        ],
        "docstring": "Эмпирическое покрытие leave-one-out кросс-валидайция",
        "decorators": [],
        "is_public": true,
        "calls": [
          "int",
          "get_interval",
          "range",
          "len",
          "delete",
          "asarray"
        ],
        "line_start": 312,
        "line_end": 326
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\reliability.py",
        "module": "reliability",
        "class_name": null,
        "function_name": "pit_values_t_predictive",
        "arguments": [
          {
            "name": "x",
            "type": "np.ndarray"
          }
        ],
        "return_type": "np.ndarray",
        "returns": [
          "stats.t.cdf(z, df=max(n - 1, 1))"
        ],
        "docstring": "PIT (вероятностное преобразование) для t-предиктивной модели",
        "decorators": [],
        "is_public": true,
        "calls": [
          "float",
          "len",
          "max",
          "sqrt",
          "cdf",
          "std",
          "mean",
          "asarray"
        ],
        "line_start": 328,
        "line_end": 338
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\reliability.py",
        "module": "reliability",
        "class_name": null,
        "function_name": "interval_width",
        "arguments": [
          {
            "name": "iv",
            "type": "tuple[float, float]"
          }
        ],
        "return_type": "float",
        "returns": [
          "float(hi - lo) if np.isfinite(hi) and np.isfinite(lo) else np.inf"
        ],
        "docstring": "Ширина интервала. Если границы нечисловые - вернуть бесконечность,\nчтобы такой метод оказался в конце при сравнении",
        "decorators": [],
        "is_public": true,
        "calls": [
          "float",
          "isfinite"
        ],
        "line_start": 345,
        "line_end": 351
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\reliability.py",
        "module": "reliability",
        "class_name": null,
        "function_name": "score",
        "arguments": [
          {
            "name": "name",
            "type": "str"
          }
        ],
        "return_type": null,
        "returns": [
          "(ok, -shortfall, robust_bonus, -width)"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "interval_width",
          "max",
          "abs",
          "isnan",
          "get"
        ],
        "line_start": 377,
        "line_end": 390
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\reliability.py",
        "module": "reliability",
        "class_name": null,
        "function_name": "select_best_interval",
        "arguments": [
          {
            "name": "alpha",
            "type": "float"
          },
          {
            "name": "intervals",
            "type": "dict[str, tuple[float, float]]"
          },
          {
            "name": "coverages",
            "type": "dict[str, float]"
          },
          {
            "name": "skew",
            "type": "float"
          },
          {
            "name": "tol",
            "type": "float",
            "default": "0.03"
          }
        ],
        "return_type": "tuple[str, tuple[float, float], str]",
        "returns": [
          "(best, iv, '; '.join(reasons))"
        ],
        "docstring": "Выбирает лучший интервал по простому и понятному правилу.\n\nПравило:\n    1) Сначала фильтруем методы с покрытием LOO не хуже цели (1-α-допуск)\n    2) Среди них берём наименьшую ширину\n    3) При сильной асимметрии (|skew|>1) отдаём предпочтение робастным методам\n\nВозвращает:\n    (название метода, его интервал, строка-обоснование выбора)",
        "decorators": [],
        "is_public": true,
        "calls": [
          "interval_width",
          "max",
          "abs",
          "isnan",
          "get"
        ],
        "line_start": 353,
        "line_end": 408
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\reliability.py",
        "module": "reliability",
        "class_name": null,
        "function_name": "assess_stability",
        "arguments": [
          {
            "name": "results",
            "type": "list[dict]"
          },
          {
            "name": "metric",
            "type": "str",
            "default": "'weight'"
          },
          {
            "name": "prev_metric_median",
            "type": "float | None",
            "default": "None"
          },
          {
            "name": "cur_stable_streak",
            "type": "int",
            "default": "0"
          },
          {
            "name": "alpha",
            "type": "float",
            "default": "0.05"
          },
          {
            "name": "r_target",
            "type": "float",
            "default": "0.05"
          },
          {
            "name": "delta_target",
            "type": "float",
            "default": "0.01"
          },
          {
            "name": "consecutive",
            "type": "int",
            "default": "2"
          }
        ],
        "return_type": "tuple[bool, np.ndarray, float, int]",
        "returns": [
          "(stability_achieved, metric_array, metric_median, stable_streak)"
        ],
        "docstring": "Оценка стабильности переданного набора данных с учётом предыдущих оценок на более\nузкой выборке (от предыдущего запуска требуются `prev_metric_median` и `cur_stable_streak`).\n\nКритерии оценки:\n    1) Относительная половина ширины t-интервала мала:\n       ((верх - низ)/2) / |медиана| ≤ r_target.\n       Это означает, что коридор неопределённости относительно уровня\n       метрики уже достаточно узок\n    2) Медиана почти не меняется относительно предыдущего шага:\n       |сдвиг медианы| / |медиана| ≤ delta_target\n\nПараметр `consecutive` требует, чтобы оба условия выполнялись указанное\nчисло шагов подряд - так мы избегаем преждевременной остановки\nиз-за случайных колебаний",
        "decorators": [],
        "is_public": true,
        "calls": [
          "predictive_interval_t",
          "float",
          "extract_metric",
          "len",
          "max",
          "median",
          "abs",
          "info"
        ],
        "line_start": 415,
        "line_end": 472
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\reliability.py",
        "module": "reliability",
        "class_name": null,
        "function_name": "calc_reliability",
        "arguments": [
          {
            "name": "metric_array",
            "type": "np.ndarray"
          },
          {
            "name": "alpha",
            "type": "float",
            "default": "0.05"
          },
          {
            "name": "boot_b",
            "type": "int",
            "default": "5000"
          },
          {
            "name": "seed",
            "type": "int | None",
            "default": "None"
          }
        ],
        "return_type": "tuple[float, float, float]",
        "returns": [
          "(mode_hsm, best_lo, best_hi)"
        ],
        "docstring": "Расчёт наиболее правдоподобного значения на основании стабильной выборки данных",
        "decorators": [],
        "is_public": true,
        "calls": [
          "bootstrap_pi",
          "split_conformal_pi",
          "interval_width",
          "kstest",
          "descriptive_stats",
          "jackknife_plus_pi",
          "pit_values_t_predictive",
          "anderson",
          "float",
          "kde_hdi",
          "half_sample_mode",
          "median",
          "lognormal_pi",
          "info",
          "isnan",
          "split_conformal_asymmetric",
          "yeojohnson_pi",
          "loo_coverage",
          "getrandbits",
          "kde_mode",
          "mean",
          "get",
          "items",
          "predictive_interval_t",
          "shapiro",
          "len",
          "select_best_interval",
          "robust_pi_quantiles"
        ],
        "line_start": 475,
        "line_end": 561
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\reliability.py",
        "module": "reliability",
        "class_name": null,
        "function_name": "find_closest_result",
        "arguments": [
          {
            "name": "results",
            "type": "list[dict]"
          },
          {
            "name": "metric_reliable",
            "type": "float"
          },
          {
            "name": "metric_best_max",
            "type": "float"
          },
          {
            "name": "metric",
            "type": "str",
            "default": "'weight'"
          }
        ],
        "return_type": "dict",
        "returns": [
          "closest_result"
        ],
        "docstring": "Поиск ближайшего к правдоподобному значению результата, не превышающего лучшее максимальное",
        "decorators": [],
        "is_public": true,
        "calls": [
          "abs",
          "enumerate"
        ],
        "line_start": 564,
        "line_end": 582
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\serializer.py",
    "imports": [
      "import json",
      "from datetime import datetime, timedelta",
      "from app.sim_engine.core.props import TruckProperties, ShovelProperties, UnlProperties, FuelStationProperties, Truck, Shovel, Unload, FuelStation, SimData, Route, Segment, Point, ShiftChangeArea, Blasting, PlannedIdle, IdleAreaStorage, IdleArea",
      "from app.utils import utc_to_enterprise, TZ"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\serializer.py",
        "module": "serializer",
        "class_name": null,
        "function_name": "calculate_lunch_breaks",
        "arguments": [
          {
            "name": "start_time",
            "type": "datetime"
          },
          {
            "name": "end_time",
            "type": "datetime"
          },
          {
            "name": "shift_config",
            "type": "list[dict]"
          },
          {
            "name": "lunch_break_offset",
            "type": "int"
          },
          {
            "name": "lunch_break_duration",
            "type": "int"
          }
        ],
        "return_type": null,
        "returns": [
          "lunch_breaks"
        ],
        "docstring": "Расчитывает обеденные перерывы в заданном временном интервале",
        "decorators": [],
        "is_public": true,
        "calls": [
          "append",
          "sort",
          "max",
          "any",
          "min",
          "replace",
          "abs",
          "total_seconds",
          "timedelta"
        ],
        "line_start": 17,
        "line_end": 63
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\serializer.py",
        "module": "serializer",
        "class_name": null,
        "function_name": "collect_planned_idles",
        "arguments": [
          {
            "name": "idles_data",
            "type": "list[dict]"
          }
        ],
        "return_type": null,
        "returns": [
          "result"
        ],
        "docstring": "Организует список плановых простоев в словарь,\nсгруппированный по vehicle_type и vehicle_id,\nс сортировкой по start_time.\n\nArgs:\n    idles_data (list): Список словарей с информацией о простоях\n\nReturns:\n    dict: Словарь вида {(vehicle_type, vehicle_id): [sorted_downtimes]}}",
        "decorators": [],
        "is_public": true,
        "calls": [
          "values",
          "isinstance",
          "PlannedIdle",
          "isoformat",
          "utc_to_enterprise",
          "append",
          "sort"
        ],
        "line_start": 66,
        "line_end": 105
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\serializer.py",
        "module": "serializer",
        "class_name": null,
        "function_name": "create_blasting_list",
        "arguments": [
          {
            "name": "data",
            "type": "dict"
          },
          {
            "name": "timezone",
            "type": "str",
            "default": "TZ"
          }
        ],
        "return_type": "list[Blasting]",
        "returns": [
          "blasting_list"
        ],
        "docstring": "Создает список объектов Blasting из данных взрывных работ.\n\nArgs:\n    data: Словарь с данными взрывных работ\n    timezone: Часовой пояс\n\nReturns:\n    List[Blasting]: Отсортированный по start_time список объектов Blasting",
        "decorators": [],
        "is_public": true,
        "calls": [
          "isinstance",
          "utc_to_enterprise",
          "isoformat",
          "Blasting",
          "append",
          "sort"
        ],
        "line_start": 108,
        "line_end": 142
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\serializer.py",
        "module": "serializer",
        "class_name": "SimDataSerializer",
        "function_name": "serialize",
        "arguments": [
          {
            "name": "cls"
          },
          {
            "name": "data",
            "type": "dict"
          }
        ],
        "return_type": "SimData",
        "returns": [
          "SimData(start_time=start_time, end_time=end_time, duration=seconds, seed=seed, trucks=trucks, shovels=shovels, unloads=unloads, fuel_stations=fuel_stations, routes=routes, road_net=data['quarry']['road_net'], idle_areas=idle_areas_storage, lunch_times=lunch_times, planned_idles=planned_idles, blasting_list=blasting_list)"
        ],
        "docstring": null,
        "decorators": [
          "classmethod"
        ],
        "is_public": true,
        "calls": [
          "collect_planned_idles",
          "int",
          "ShovelProperties",
          "Shovel",
          "create_blasting_list",
          "calculate_lunch_breaks",
          "Point",
          "utc_to_enterprise",
          "IdleAreaStorage",
          "Segment",
          "append",
          "UnlProperties",
          "get",
          "SimData",
          "Unload",
          "FuelStationProperties",
          "FuelStation",
          "TruckProperties",
          "IdleArea",
          "Route",
          "Truck",
          "total_seconds"
        ],
        "line_start": 149,
        "line_end": 329
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\simulate.py",
    "imports": [
      "import functools",
      "import logging",
      "import multiprocessing",
      "from typing import Callable",
      "from app.sim_engine.core.environment import QSimEnvironment",
      "from app.sim_engine.core.geometry import Point, Route, RouteEdge, build_route_by_road_net, build_route_edges_by_road_net",
      "from app.sim_engine.core.props import SimData, PlannedTrip",
      "from app.sim_engine.core.simulations.fuel_station import FuelStation",
      "from app.sim_engine.core.simulations.quarry import Quarry",
      "from app.sim_engine.core.simulations.shovel import Shovel",
      "from app.sim_engine.core.simulations.truck import Truck",
      "from app.sim_engine.core.simulations.unload import Unload",
      "from app.sim_engine.enums import ObjectType",
      "from app.sim_engine.reliability import assess_stability, calc_reliability, find_closest_result",
      "from app.sim_engine.writer import IWriter, DictReliabilityWriter"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\simulate.py",
        "module": "simulate",
        "class_name": null,
        "function_name": "wrapper",
        "arguments": [
          {
            "name": "*args",
            "kind": "vararg"
          },
          {
            "name": "**kwargs",
            "kind": "kwarg"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [
          "functools.wraps(func)"
        ],
        "is_public": true,
        "calls": [
          "func",
          "wraps",
          "DataValidateError"
        ],
        "line_start": 27,
        "line_end": 34
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\simulate.py",
        "module": "simulate",
        "class_name": null,
        "function_name": "sim_data_validate",
        "arguments": [
          {
            "name": "func"
          }
        ],
        "return_type": null,
        "returns": [
          "wrapper"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "func",
          "wraps",
          "DataValidateError"
        ],
        "line_start": 25,
        "line_end": 36
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\simulate.py",
        "module": "simulate",
        "class_name": null,
        "function_name": "run_simulation",
        "arguments": [
          {
            "name": "sim_data",
            "type": "SimData"
          },
          {
            "name": "writer",
            "type": "IWriter"
          },
          {
            "name": "sim_conf",
            "type": "dict"
          }
        ],
        "return_type": "dict",
        "returns": [
          "result"
        ],
        "docstring": "Run simulation with manual truck routes\n\nThis func needs to be **picklable** for `run_reliability` (multiprocessing limitations)",
        "decorators": [
          "sim_data_validate"
        ],
        "is_public": true,
        "calls": [
          "Shovel",
          "QSimEnvironment",
          "values",
          "PlannedTrip",
          "get_summary",
          "info",
          "Point",
          "getattr",
          "build_route_by_road_net",
          "run",
          "build_route_edges_by_road_net",
          "append",
          "finalize",
          "Quarry",
          "prepare_seeded_random",
          "Unload",
          "FuelStation",
          "update_data",
          "Truck"
        ],
        "line_start": 40,
        "line_end": 159
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\simulate.py",
        "module": "simulate",
        "class_name": null,
        "function_name": "run_simulation_for_planned_trips",
        "arguments": [
          {
            "name": "sim_data",
            "type": "SimData"
          },
          {
            "name": "writer",
            "type": "IWriter"
          },
          {
            "name": "planned_trips",
            "type": "dict[int, list[PlannedTrip]]"
          },
          {
            "name": "sim_conf",
            "type": "dict"
          }
        ],
        "return_type": "dict",
        "returns": [
          "result"
        ],
        "docstring": "Run simulation with auto truck routes\n\nThis func needs to be **picklable** for `run_reliability` (multiprocessing limitations)",
        "decorators": [],
        "is_public": true,
        "calls": [
          "Unload",
          "finalize",
          "values",
          "Quarry",
          "get_summary",
          "run",
          "FuelStation",
          "update_data",
          "Shovel",
          "info",
          "append",
          "Truck",
          "QSimEnvironment",
          "get",
          "Point",
          "prepare_seeded_random"
        ],
        "line_start": 162,
        "line_end": 258
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\simulate.py",
        "module": "simulate",
        "class_name": null,
        "function_name": "run_reliability",
        "arguments": [
          {
            "name": "run_func",
            "type": "Callable"
          },
          {
            "name": "sim_data",
            "type": "SimData"
          },
          {
            "name": "writer",
            "type": "IWriter"
          },
          {
            "name": "sim_conf",
            "type": "dict"
          },
          {
            "name": "*extra_run_func_args",
            "kind": "vararg"
          }
        ],
        "return_type": "dict",
        "returns": [
          "final_result"
        ],
        "docstring": "Run given simulation engaging reliablility calculation\n\n`run_func` needs to be **picklable** (multiprocessing limitations)",
        "decorators": [],
        "is_public": true,
        "calls": [
          "calc_reliability",
          "int",
          "extend",
          "assess_stability",
          "get_context",
          "Pool",
          "round",
          "info",
          "range",
          "len",
          "DictReliabilityWriter",
          "run_func",
          "find_closest_result",
          "starmap",
          "cpu_count"
        ],
        "line_start": 261,
        "line_end": 370
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\simulation_manager.py",
    "imports": [
      "import inspect",
      "import logging",
      "import multiprocessing",
      "import traceback",
      "from collections import defaultdict",
      "from multiprocessing import Manager",
      "from multiprocessing.managers import DictProxy",
      "from typing import Any",
      "from app.sim_engine.config import SIM_CONFIG",
      "from app.sim_engine.core.planner.manage import Planner",
      "from app.sim_engine.core.props import SimData, PlannedTrip",
      "from app.sim_engine.infra.exception_traceback import catch_errors",
      "from app.sim_engine.serializer import SimDataSerializer",
      "from app.sim_engine.simulate import run_reliability, run_simulation, run_simulation_for_planned_trips",
      "from app.sim_engine.writer import IWriter, DictSimpleWriter"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\simulation_manager.py",
        "module": "simulation_manager",
        "class_name": "IManagerValidator",
        "function_name": "validate",
        "arguments": [
          {
            "name": "data",
            "type": "Any"
          }
        ],
        "return_type": "Any",
        "returns": [],
        "docstring": null,
        "decorators": [
          "staticmethod"
        ],
        "is_public": true,
        "calls": [],
        "line_start": 48,
        "line_end": 49
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\simulation_manager.py",
        "module": "simulation_manager",
        "class_name": "RawSimDataValidator",
        "function_name": "validate",
        "arguments": [
          {
            "name": "data",
            "type": "dict"
          }
        ],
        "return_type": "dict",
        "returns": [
          "data"
        ],
        "docstring": null,
        "decorators": [
          "staticmethod"
        ],
        "is_public": true,
        "calls": [
          "SimDataValidationError",
          "isinstance"
        ],
        "line_start": 54,
        "line_end": 59
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\simulation_manager.py",
        "module": "simulation_manager",
        "class_name": "SimConfigOptionsValidator",
        "function_name": "validate",
        "arguments": [
          {
            "name": "data",
            "type": "dict"
          }
        ],
        "return_type": "dict",
        "returns": [
          "data"
        ],
        "docstring": null,
        "decorators": [
          "staticmethod"
        ],
        "is_public": true,
        "calls": [
          "isinstance",
          "SimConfigValidationError"
        ],
        "line_start": 64,
        "line_end": 67
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\simulation_manager.py",
        "module": "simulation_manager",
        "class_name": "SimulationManager",
        "function_name": "__init__",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "raw_data",
            "type": "dict"
          },
          {
            "name": "options",
            "type": "dict | None",
            "default": "None"
          },
          {
            "name": "writer",
            "type": "type[IWriter]",
            "default": "DictSimpleWriter"
          },
          {
            "name": "raw_data_validator",
            "type": "type[IManagerValidator]",
            "default": "RawSimDataValidator"
          },
          {
            "name": "options_validator",
            "type": "type[IManagerValidator]",
            "default": "SimConfigOptionsValidator"
          },
          {
            "name": "use_multiprocessing",
            "type": "bool",
            "default": "False"
          }
        ],
        "return_type": "None",
        "returns": [],
        "docstring": "Инициализация менеджера.\n\nАргументы:\nraw_data - сырые данные, необходимые для проведения симуляции/планирования\noptions - опции конфигурации для применения в процессе симуляции/планирования\nwriter - писарь результатов симуляции\nraw_data_validator - валидатор сырых данных raw_data\noptions_validator - валидатор опций конфигурации",
        "decorators": [],
        "is_public": true,
        "calls": [
          "validate_validator",
          "__set_default_config",
          "set_options",
          "validate_writer",
          "validate",
          "serialize"
        ],
        "line_start": 73,
        "line_end": 107
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\simulation_manager.py",
        "module": "simulation_manager",
        "class_name": "SimulationManager",
        "function_name": "simdata",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": "SimData",
        "returns": [
          "self._simdata"
        ],
        "docstring": "Возвращает текущие сериализованные данные, используемые для симуляции",
        "decorators": [
          "property"
        ],
        "is_public": true,
        "calls": [],
        "line_start": 110,
        "line_end": 112
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\simulation_manager.py",
        "module": "simulation_manager",
        "class_name": "SimulationManager",
        "function_name": "config",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": "dict",
        "returns": [
          "self._config"
        ],
        "docstring": "Возвращает текущую конфигурацию",
        "decorators": [
          "property"
        ],
        "is_public": true,
        "calls": [],
        "line_start": 115,
        "line_end": 117
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\simulation_manager.py",
        "module": "simulation_manager",
        "class_name": "SimulationManager",
        "function_name": "writer",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": "IWriter",
        "returns": [
          "self._writer"
        ],
        "docstring": "Возвращает текущий класс логгера симуляции",
        "decorators": [
          "property"
        ],
        "is_public": true,
        "calls": [],
        "line_start": 120,
        "line_end": 122
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\simulation_manager.py",
        "module": "simulation_manager",
        "class_name": "SimulationManager",
        "function_name": "result",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": "dict",
        "returns": [],
        "docstring": "Возвращает результат симуляции при его наличии",
        "decorators": [
          "property"
        ],
        "is_public": true,
        "calls": [
          "RuntimeError"
        ],
        "line_start": 125,
        "line_end": 129
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\simulation_manager.py",
        "module": "simulation_manager",
        "class_name": "SimulationManager",
        "function_name": "set_new_simdata",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "raw_data",
            "type": "dict"
          }
        ],
        "return_type": "None",
        "returns": [],
        "docstring": "Проводит валидацию переданных сырых данных для симуляции и\nустанавливает сериализованные данные в качестве текущих",
        "decorators": [],
        "is_public": true,
        "calls": [
          "serialize",
          "validate"
        ],
        "line_start": 131,
        "line_end": 137
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\simulation_manager.py",
        "module": "simulation_manager",
        "class_name": "SimulationManager",
        "function_name": "set_options",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "options",
            "type": "dict"
          }
        ],
        "return_type": "None",
        "returns": [],
        "docstring": "Проводит валидацию и устанавливает переданные опции конфигурации",
        "decorators": [],
        "is_public": true,
        "calls": [
          "update",
          "validate"
        ],
        "line_start": 139,
        "line_end": 143
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\simulation_manager.py",
        "module": "simulation_manager",
        "class_name": "SimulationManager",
        "function_name": "__set_default_config",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": "Устанавливает опции конфигурации по умолчанию",
        "decorators": [],
        "is_public": false,
        "calls": [
          "copy"
        ],
        "line_start": 145,
        "line_end": 147
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\simulation_manager.py",
        "module": "simulation_manager",
        "class_name": "SimulationManager",
        "function_name": "validate_writer",
        "arguments": [
          {
            "name": "writer",
            "type": "Any"
          }
        ],
        "return_type": "IWriter",
        "returns": [
          "writer() if is_class else writer"
        ],
        "docstring": "Производит валидацию переданного писаря результатов симуляции",
        "decorators": [
          "staticmethod"
        ],
        "is_public": true,
        "calls": [
          "isinstance",
          "issubclass",
          "SimWriterValidationError",
          "writer",
          "isclass"
        ],
        "line_start": 150,
        "line_end": 157
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\simulation_manager.py",
        "module": "simulation_manager",
        "class_name": "SimulationManager",
        "function_name": "validate_validator",
        "arguments": [
          {
            "name": "validator",
            "type": "Any"
          }
        ],
        "return_type": "IManagerValidator",
        "returns": [
          "validator() if is_class else validator"
        ],
        "docstring": "Производит валидацию переданного валидатора",
        "decorators": [
          "staticmethod"
        ],
        "is_public": true,
        "calls": [
          "ValidatorValidationError",
          "isinstance",
          "issubclass",
          "isclass",
          "validator"
        ],
        "line_start": 160,
        "line_end": 171
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\simulation_manager.py",
        "module": "simulation_manager",
        "class_name": "SimulationManager",
        "function_name": "set_raw_data_validator",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "validator",
            "type": "IManagerValidator"
          }
        ],
        "return_type": "None",
        "returns": [],
        "docstring": "Устанавливает валидатор сырых данных для симуляции",
        "decorators": [],
        "is_public": true,
        "calls": [
          "validate_validator"
        ],
        "line_start": 173,
        "line_end": 175
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\simulation_manager.py",
        "module": "simulation_manager",
        "class_name": "SimulationManager",
        "function_name": "set_options_validator",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "validator",
            "type": "IManagerValidator"
          }
        ],
        "return_type": "None",
        "returns": [],
        "docstring": "Устанавливает валидатор опций конфигурации",
        "decorators": [],
        "is_public": true,
        "calls": [
          "validate_validator"
        ],
        "line_start": 177,
        "line_end": 179
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\simulation_manager.py",
        "module": "simulation_manager",
        "class_name": "SimulationManager",
        "function_name": "run",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": "dict",
        "returns": [
          "self._process_simulation()"
        ],
        "docstring": "Запускает симуляцию в ручном/автоматическом режиме (зависит от текущей конфигурации)\nв отдельном процессе",
        "decorators": [],
        "is_public": true,
        "calls": [
          "_process_simulation",
          "_run_using_multiprocessing"
        ],
        "line_start": 181,
        "line_end": 189
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\simulation_manager.py",
        "module": "simulation_manager",
        "class_name": "SimulationManager",
        "function_name": "_run_using_multiprocessing",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": "dict",
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": false,
        "calls": [
          "start",
          "Process",
          "error",
          "Manager",
          "dict",
          "join",
          "RuntimeError"
        ],
        "line_start": 191,
        "line_end": 216
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\simulation_manager.py",
        "module": "simulation_manager",
        "class_name": "SimulationManager",
        "function_name": "_multiprocessing_simulation_callback",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "manager_dict",
            "type": "DictProxy"
          }
        ],
        "return_type": "None",
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": false,
        "calls": [
          "type",
          "str",
          "_process_simulation",
          "format_exc"
        ],
        "line_start": 218,
        "line_end": 229
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\simulation_manager.py",
        "module": "simulation_manager",
        "class_name": "SimulationManager",
        "function_name": "_process_simulation",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": "dict",
        "returns": [],
        "docstring": null,
        "decorators": [
          "catch_errors"
        ],
        "is_public": false,
        "calls": [
          "defaultdict",
          "Planner",
          "run",
          "run_reliability",
          "PlannedTrip",
          "run_simulation_for_planned_trips",
          "run_simulation",
          "RuntimeError",
          "append",
          "get"
        ],
        "line_start": 232,
        "line_end": 310
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\states.py",
    "imports": [
      "from enum import Enum"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\states.py",
        "module": "states",
        "class_name": "TruckState",
        "function_name": "is_work",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [
          "self in [self.MOVING_LOADED, self.MOVING_EMPTY, self.UNLOADING]"
        ],
        "docstring": null,
        "decorators": [
          "property"
        ],
        "is_public": true,
        "calls": [],
        "line_start": 18,
        "line_end": 19
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\states.py",
        "module": "states",
        "class_name": "TruckState",
        "function_name": "is_moving",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [
          "self in [self.MOVING_LOADED, self.MOVING_EMPTY]"
        ],
        "docstring": null,
        "decorators": [
          "property"
        ],
        "is_public": true,
        "calls": [],
        "line_start": 22,
        "line_end": 23
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\states.py",
        "module": "states",
        "class_name": "TruckState",
        "function_name": "__str__",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [
          "self.value[0]"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": false,
        "calls": [],
        "line_start": 25,
        "line_end": 26
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\states.py",
        "module": "states",
        "class_name": "TruckState",
        "function_name": "ru",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [
          "self.value[1]"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 28,
        "line_end": 29
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\states.py",
        "module": "states",
        "class_name": "TruckState",
        "function_name": "en",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [
          "self.value[0]"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 31,
        "line_end": 32
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\states.py",
        "module": "states",
        "class_name": "ExcState",
        "function_name": "is_work",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [
          "self == self.LOADING"
        ],
        "docstring": null,
        "decorators": [
          "property"
        ],
        "is_public": true,
        "calls": [],
        "line_start": 43,
        "line_end": 44
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\states.py",
        "module": "states",
        "class_name": "ExcState",
        "function_name": "__str__",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [
          "self.value[0]"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": false,
        "calls": [],
        "line_start": 46,
        "line_end": 47
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\states.py",
        "module": "states",
        "class_name": "ExcState",
        "function_name": "ru",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [
          "self.value[1]"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 49,
        "line_end": 50
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\states.py",
        "module": "states",
        "class_name": "ExcState",
        "function_name": "en",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [
          "self.value[0]"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 52,
        "line_end": 53
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\states.py",
        "module": "states",
        "class_name": "UnloadState",
        "function_name": "is_work",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [
          "self == self.OPEN"
        ],
        "docstring": null,
        "decorators": [
          "property"
        ],
        "is_public": true,
        "calls": [],
        "line_start": 63,
        "line_end": 64
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\states.py",
        "module": "states",
        "class_name": "UnloadState",
        "function_name": "__str__",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [
          "self.value[0]"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": false,
        "calls": [],
        "line_start": 66,
        "line_end": 67
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\states.py",
        "module": "states",
        "class_name": "UnloadState",
        "function_name": "ru",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [
          "self.value[1]"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 69,
        "line_end": 70
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\states.py",
        "module": "states",
        "class_name": "UnloadState",
        "function_name": "en",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [
          "self.value[0]"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 72,
        "line_end": 73
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\states.py",
        "module": "states",
        "class_name": "FuelStationState",
        "function_name": "__str__",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [
          "self.value[0]"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": false,
        "calls": [],
        "line_start": 80,
        "line_end": 81
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\states.py",
        "module": "states",
        "class_name": "FuelStationState",
        "function_name": "ru",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [
          "self.value[1]"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 83,
        "line_end": 84
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\states.py",
        "module": "states",
        "class_name": "FuelStationState",
        "function_name": "en",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [
          "self.value[0]"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 86,
        "line_end": 87
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\writer.py",
    "imports": [
      "from abc import ABC, abstractmethod",
      "from app.sim_engine.events import Event"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\writer.py",
        "module": "writer",
        "class_name": "IWriter",
        "function_name": "update_data",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "key",
            "type": "str"
          },
          {
            "name": "**kwargs",
            "kind": "kwarg"
          }
        ],
        "return_type": "None",
        "returns": [],
        "docstring": null,
        "decorators": [
          "abstractmethod"
        ],
        "is_public": true,
        "calls": [],
        "line_start": 9,
        "line_end": 10
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\writer.py",
        "module": "writer",
        "class_name": "IWriter",
        "function_name": "push_event",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "evt",
            "type": "Event"
          }
        ],
        "return_type": "None",
        "returns": [],
        "docstring": null,
        "decorators": [
          "abstractmethod"
        ],
        "is_public": true,
        "calls": [],
        "line_start": 13,
        "line_end": 14
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\writer.py",
        "module": "writer",
        "class_name": "IWriter",
        "function_name": "writerow",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "row",
            "type": "dict"
          }
        ],
        "return_type": "None",
        "returns": [],
        "docstring": null,
        "decorators": [
          "abstractmethod"
        ],
        "is_public": true,
        "calls": [],
        "line_start": 17,
        "line_end": 18
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\writer.py",
        "module": "writer",
        "class_name": "IWriter",
        "function_name": "finalize",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [
          "abstractmethod"
        ],
        "is_public": true,
        "calls": [],
        "line_start": 21,
        "line_end": 22
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\writer.py",
        "module": "writer",
        "class_name": "DictSimpleWriter",
        "function_name": "__init__",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": "None",
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 26,
        "line_end": 32
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\writer.py",
        "module": "writer",
        "class_name": "DictSimpleWriter",
        "function_name": "update_data",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "key"
          },
          {
            "name": "**kwargs",
            "kind": "kwarg"
          }
        ],
        "return_type": "None",
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "update"
        ],
        "line_start": 34,
        "line_end": 35
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\writer.py",
        "module": "writer",
        "class_name": "DictSimpleWriter",
        "function_name": "push_event",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "evt",
            "type": "Event"
          }
        ],
        "return_type": "None",
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "to_dict",
          "append"
        ],
        "line_start": 37,
        "line_end": 38
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\writer.py",
        "module": "writer",
        "class_name": "DictSimpleWriter",
        "function_name": "writerow",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "row",
            "type": "dict"
          }
        ],
        "return_type": "None",
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "append"
        ],
        "line_start": 40,
        "line_end": 41
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\writer.py",
        "module": "writer",
        "class_name": "DictSimpleWriter",
        "function_name": "finalize",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": "dict",
        "returns": [
          "self.data"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 43,
        "line_end": 44
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\writer.py",
        "module": "writer",
        "class_name": "DictReliabilityWriter",
        "function_name": "__init__",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": "None",
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "super",
          "__init__",
          "pop"
        ],
        "line_start": 48,
        "line_end": 51
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\writer.py",
        "module": "writer",
        "class_name": "DictReliabilityWriter",
        "function_name": "push_event",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "evt",
            "type": "Event"
          }
        ],
        "return_type": "None",
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 53,
        "line_end": 54
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\writer.py",
        "module": "writer",
        "class_name": "DictReliabilityWriter",
        "function_name": "writerow",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "row",
            "type": "dict"
          }
        ],
        "return_type": "None",
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 56,
        "line_end": 57
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\writer.py",
        "module": "writer",
        "class_name": "BatchWriter",
        "function_name": "__init__",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "batch_size_seconds",
            "type": "int",
            "default": "60"
          }
        ],
        "return_type": "None",
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 61,
        "line_end": 73
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\writer.py",
        "module": "writer",
        "class_name": "BatchWriter",
        "function_name": "update_data",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "key"
          },
          {
            "name": "**kwargs",
            "kind": "kwarg"
          }
        ],
        "return_type": "None",
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "getattr",
          "update"
        ],
        "line_start": 75,
        "line_end": 76
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\writer.py",
        "module": "writer",
        "class_name": "BatchWriter",
        "function_name": "push_event",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "evt",
            "type": "Event"
          }
        ],
        "return_type": "None",
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "to_dict",
          "append"
        ],
        "line_start": 78,
        "line_end": 79
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\writer.py",
        "module": "writer",
        "class_name": "BatchWriter",
        "function_name": "writerow",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "row",
            "type": "dict"
          }
        ],
        "return_type": "None",
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "append",
          "int"
        ],
        "line_start": 81,
        "line_end": 114
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\writer.py",
        "module": "writer",
        "class_name": "BatchWriter",
        "function_name": "finalize",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": "dict",
        "returns": [
          "{'meta': {**self.meta, 'total_batches': len(self.batches), 'batch_keys': list(self.batches.keys())}, 'batches': self.batches, 'events': self.events, 'summary': {}}"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "len",
          "list",
          "keys"
        ],
        "line_start": 116,
        "line_end": 126
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\__init__.py",
    "imports": [],
    "functions": []
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\coefficients.py",
    "imports": [],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\coefficients.py",
        "module": "coefficients",
        "class_name": null,
        "function_name": "koef_vlazhnosti",
        "arguments": [
          {
            "name": "percent",
            "type": "float"
          }
        ],
        "return_type": "float",
        "returns": [
          "1.5 + 0.5 * min(max(p, 0), 1)"
        ],
        "docstring": "Возвращает коэффициент по влажности грунта (%)\n0–5%   → 0.8 (сухой)\n5–15%  → 1.0 (оптимальная)\n15–30% → 1.2 (влажный)\n30–50% → 1.5–2.0 (глинистый)",
        "decorators": [],
        "is_public": true,
        "calls": [
          "max",
          "min"
        ],
        "line_start": 1,
        "line_end": 16
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\constants.py",
    "imports": [
      "from app.enums import PayloadType, UnloadType"
    ],
    "functions": []
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\environment.py",
    "imports": [
      "import simpy",
      "from app.sim_engine.core.planner.solvers.greedy import GreedySolver",
      "from app.sim_engine.core.props import SimData",
      "from app.sim_engine.core.simulations.entities import SimContext",
      "from app.sim_engine.core.simulations.utils.idle_area_service import IdleAreaService",
      "from app.sim_engine.core.simulations.utils.service_locator import ServiceLocator",
      "from app.sim_engine.core.simulations.utils.trip_service import TripService",
      "from app.sim_engine.writer import IWriter"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\environment.py",
        "module": "environment",
        "class_name": "QSimEnvironment",
        "function_name": "__init__",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "sim_data",
            "type": "SimData"
          },
          {
            "name": "writer",
            "type": "IWriter"
          },
          {
            "name": "sim_conf",
            "type": "dict"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "__init__",
          "GreedySolver",
          "SimContext",
          "unbind_all",
          "TripService",
          "super",
          "IdleAreaService",
          "bind"
        ],
        "line_start": 13,
        "line_end": 26
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\geometry.py",
    "imports": [
      "import math",
      "import copy",
      "from dataclasses import dataclass",
      "from typing import Tuple",
      "from roadnet.core import Edge, Vertex, RoadNetFactory",
      "from app.sim_engine.core.props import Route, SimData",
      "from app.sim_engine.enums import ObjectType"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\geometry.py",
        "module": "geometry",
        "class_name": "Route",
        "function_name": "__init__",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "name",
            "type": "str"
          },
          {
            "name": "points",
            "type": "list[Point]"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 19,
        "line_end": 21
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\geometry.py",
        "module": "geometry",
        "class_name": "Route",
        "function_name": "start",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [
          "self.points[0]"
        ],
        "docstring": null,
        "decorators": [
          "property"
        ],
        "is_public": true,
        "calls": [],
        "line_start": 24,
        "line_end": 25
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\geometry.py",
        "module": "geometry",
        "class_name": "Route",
        "function_name": "end",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [
          "self.points[-1]"
        ],
        "docstring": null,
        "decorators": [
          "property"
        ],
        "is_public": true,
        "calls": [],
        "line_start": 28,
        "line_end": 29
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\geometry.py",
        "module": "geometry",
        "class_name": "RouteEdge",
        "function_name": "_reverse",
        "arguments": [
          {
            "name": "edges"
          }
        ],
        "return_type": null,
        "returns": [
          "reversed_edges"
        ],
        "docstring": null,
        "decorators": [
          "staticmethod"
        ],
        "is_public": false,
        "calls": [
          "append",
          "deepcopy",
          "reversed"
        ],
        "line_start": 35,
        "line_end": 41
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\geometry.py",
        "module": "geometry",
        "class_name": "RouteEdge",
        "function_name": "__init__",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "edges",
            "type": "list[Edge]"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "_reverse"
        ],
        "line_start": 43,
        "line_end": 45
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\geometry.py",
        "module": "geometry",
        "class_name": "RouteEdge",
        "function_name": "start_point",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": "Vertex",
        "returns": [
          "self.edges[0].start"
        ],
        "docstring": null,
        "decorators": [
          "property"
        ],
        "is_public": true,
        "calls": [],
        "line_start": 48,
        "line_end": 49
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\geometry.py",
        "module": "geometry",
        "class_name": "RouteEdge",
        "function_name": "end_point",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": "Vertex",
        "returns": [
          "self.edges[-1].stop"
        ],
        "docstring": null,
        "decorators": [
          "property"
        ],
        "is_public": true,
        "calls": [],
        "line_start": 52,
        "line_end": 53
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\geometry.py",
        "module": "geometry",
        "class_name": "RouteEdge",
        "function_name": "move_along_edges_gen",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": "Edge",
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 55,
        "line_end": 57
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\geometry.py",
        "module": "geometry",
        "class_name": "RouteEdge",
        "function_name": "move_along_edges_reversed_gen",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": "Edge",
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 59,
        "line_end": 61
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\geometry.py",
        "module": "geometry",
        "class_name": null,
        "function_name": "cross_product",
        "arguments": [
          {
            "name": "o",
            "type": "Tuple[float, float]"
          },
          {
            "name": "a",
            "type": "Tuple[float, float]"
          },
          {
            "name": "b",
            "type": "Tuple[float, float]"
          }
        ],
        "return_type": null,
        "returns": [
          "(a[0] - o[0]) * (b[1] - o[1]) - (a[1] - o[1]) * (b[0] - o[0])"
        ],
        "docstring": "Векторное произведение координат",
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 66,
        "line_end": 72
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\geometry.py",
        "module": "geometry",
        "class_name": null,
        "function_name": "on_segment",
        "arguments": [
          {
            "name": "a"
          },
          {
            "name": "b"
          },
          {
            "name": "c"
          }
        ],
        "return_type": null,
        "returns": [
          "min(a[0], b[0]) <= c[0] <= max(a[0], b[0]) and min(a[1], b[1]) <= c[1] <= max(a[1], b[1])"
        ],
        "docstring": "Лежит ли точка C на отрезке AB",
        "decorators": [],
        "is_public": true,
        "calls": [
          "max",
          "min"
        ],
        "line_start": 83,
        "line_end": 86
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\geometry.py",
        "module": "geometry",
        "class_name": null,
        "function_name": "segments_intersect",
        "arguments": [
          {
            "name": "a",
            "type": "Tuple[float, float]"
          },
          {
            "name": "b",
            "type": "Tuple[float, float]"
          },
          {
            "name": "c",
            "type": "Tuple[float, float]"
          },
          {
            "name": "d",
            "type": "Tuple[float, float]"
          }
        ],
        "return_type": "bool",
        "returns": [
          "False"
        ],
        "docstring": "Проверяет, пересекаются ли отрезки AB и CD",
        "decorators": [],
        "is_public": true,
        "calls": [
          "max",
          "min"
        ],
        "line_start": 75,
        "line_end": 108
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\geometry.py",
        "module": "geometry",
        "class_name": null,
        "function_name": "path_intersects_polygons",
        "arguments": [
          {
            "name": "path",
            "type": "RouteEdge"
          },
          {
            "name": "polygons",
            "type": "Tuple[Tuple[Tuple[float, float]]] | list[list[list[float]]]"
          }
        ],
        "return_type": null,
        "returns": [
          "False"
        ],
        "docstring": "Проверяет, попадает ли путь на графе хотя бы в один полигон.\n\nArgs:\n    path: объект RouteEdge, хранящий список рёбер пути на графе\n    polygons: список полигонов в виде списков координат\n\nReturns:\n    bool: True если путь пересекает или находится внутри хотя бы одного полигона",
        "decorators": [],
        "is_public": true,
        "calls": [
          "move_along_edges_gen",
          "zip",
          "segments_intersect",
          "list"
        ],
        "line_start": 111,
        "line_end": 136
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\geometry.py",
        "module": "geometry",
        "class_name": null,
        "function_name": "build_route_sim",
        "arguments": [
          {
            "name": "route_dc",
            "type": "SimRoute"
          }
        ],
        "return_type": "Route",
        "returns": [
          "Route(route_dc.id, points)"
        ],
        "docstring": "Конвертирует наш dataclass Route (список сегментов)\nв RouteSim (список уникальных точек по порядку).",
        "decorators": [],
        "is_public": true,
        "calls": [
          "add",
          "Route",
          "set",
          "append",
          "Point"
        ],
        "line_start": 141,
        "line_end": 154
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\geometry.py",
        "module": "geometry",
        "class_name": null,
        "function_name": "build_route_by_road_net",
        "arguments": [
          {
            "name": "shovel_id",
            "type": "int"
          },
          {
            "name": "unload_id",
            "type": "int"
          },
          {
            "name": "road_net",
            "type": "dict"
          }
        ],
        "return_type": "Route",
        "returns": [
          "Route(f'shov_{source[0]} - unl_{target[0]}', points)"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "create_from_geojson",
          "key",
          "RoadNetFactory",
          "add",
          "Route",
          "set",
          "append",
          "search_path_dijkstra",
          "Point"
        ],
        "line_start": 159,
        "line_end": 190
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\geometry.py",
        "module": "geometry",
        "class_name": null,
        "function_name": "build_route_edges_by_road_net",
        "arguments": [
          {
            "name": "from_object_id",
            "type": "int"
          },
          {
            "name": "from_object_type",
            "type": "ObjectType"
          },
          {
            "name": "to_object_id",
            "type": "int"
          },
          {
            "name": "to_object_type",
            "type": "ObjectType"
          },
          {
            "name": "road_net",
            "type": "dict"
          }
        ],
        "return_type": "RouteEdge",
        "returns": [
          "RouteEdge(result.edges)"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "create_from_geojson",
          "key",
          "RoadNetFactory",
          "RouteEdge",
          "search_path_dijkstra"
        ],
        "line_start": 193,
        "line_end": 213
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\geometry.py",
        "module": "geometry",
        "class_name": null,
        "function_name": "build_route_edges_by_road_net_from_position",
        "arguments": [
          {
            "name": "lon",
            "type": "int | float"
          },
          {
            "name": "lat",
            "type": "int | float"
          },
          {
            "name": "height",
            "type": "int | None"
          },
          {
            "name": "edge_idx",
            "type": "int"
          },
          {
            "name": "to_object_id",
            "type": "int"
          },
          {
            "name": "to_object_type",
            "type": "ObjectType"
          },
          {
            "name": "road_net",
            "type": "dict"
          }
        ],
        "return_type": "RouteEdge",
        "returns": [
          "RouteEdge(result.edges)"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "create_from_geojson",
          "key",
          "RoadNetFactory",
          "RouteEdge",
          "search_path_dijkstra"
        ],
        "line_start": 216,
        "line_end": 238
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\geometry.py",
        "module": "geometry",
        "class_name": null,
        "function_name": "build_route_edges_by_road_net_from_position_to_position",
        "arguments": [
          {
            "name": "lon",
            "type": "float"
          },
          {
            "name": "lat",
            "type": "float"
          },
          {
            "name": "height",
            "type": "float | None"
          },
          {
            "name": "edge_idx",
            "type": "int"
          },
          {
            "name": "end_lon",
            "type": "float"
          },
          {
            "name": "end_lat",
            "type": "float"
          },
          {
            "name": "end_height",
            "type": "float | None"
          },
          {
            "name": "end_edge_idx",
            "type": "int | None"
          },
          {
            "name": "road_net",
            "type": "dict"
          }
        ],
        "return_type": "RouteEdge",
        "returns": [
          "RouteEdge(result.edges)"
        ],
        "docstring": "Строит кратчайший путь на графе от позиции до позиции",
        "decorators": [],
        "is_public": true,
        "calls": [
          "RouteEdge",
          "RoadNetFactory",
          "create_from_geojson",
          "search_path_dijkstra"
        ],
        "line_start": 241,
        "line_end": 268
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\geometry.py",
        "module": "geometry",
        "class_name": null,
        "function_name": "find_all_route_edges_by_road_net_from_position_to_position",
        "arguments": [
          {
            "name": "lon",
            "type": "float"
          },
          {
            "name": "lat",
            "type": "float"
          },
          {
            "name": "height",
            "type": "float | None"
          },
          {
            "name": "edge_idx",
            "type": "int | None"
          },
          {
            "name": "end_lon",
            "type": "float"
          },
          {
            "name": "end_lat",
            "type": "float"
          },
          {
            "name": "end_height",
            "type": "float | None"
          },
          {
            "name": "end_edge_idx",
            "type": "int | None"
          },
          {
            "name": "road_net",
            "type": "dict"
          }
        ],
        "return_type": null,
        "returns": [
          "result"
        ],
        "docstring": "Ищет все пути на графе от указанной позиции до указанной позиции",
        "decorators": [],
        "is_public": true,
        "calls": [
          "create_from_geojson",
          "RoadNetFactory",
          "search_all_paths",
          "RouteEdge",
          "sum",
          "sort"
        ],
        "line_start": 271,
        "line_end": 301
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\geometry.py",
        "module": "geometry",
        "class_name": null,
        "function_name": "find_all_route_edges_by_road_net_from_position",
        "arguments": [
          {
            "name": "lon",
            "type": "float"
          },
          {
            "name": "lat",
            "type": "float"
          },
          {
            "name": "height",
            "type": "float | None"
          },
          {
            "name": "edge_idx",
            "type": "int | None"
          },
          {
            "name": "to_object_id",
            "type": "int"
          },
          {
            "name": "to_object_type",
            "type": "ObjectType"
          },
          {
            "name": "road_net",
            "type": "dict"
          }
        ],
        "return_type": null,
        "returns": [
          "result"
        ],
        "docstring": "Ищет все пути на графе от указанной позиции до указанного объекта",
        "decorators": [],
        "is_public": true,
        "calls": [
          "create_from_geojson",
          "key",
          "RoadNetFactory",
          "search_all_paths",
          "RouteEdge",
          "sum",
          "sort"
        ],
        "line_start": 304,
        "line_end": 331
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\geometry.py",
        "module": "geometry",
        "class_name": null,
        "function_name": "find_all_route_edges_by_road_net_from_object_to_object",
        "arguments": [
          {
            "name": "from_object_id",
            "type": "int"
          },
          {
            "name": "from_object_type",
            "type": "ObjectType"
          },
          {
            "name": "to_object_id",
            "type": "int"
          },
          {
            "name": "to_object_type",
            "type": "ObjectType"
          },
          {
            "name": "road_net",
            "type": "dict"
          }
        ],
        "return_type": null,
        "returns": [
          "result"
        ],
        "docstring": "Ищет все пути на графе от указанной позиции до указанного объекта",
        "decorators": [],
        "is_public": true,
        "calls": [
          "create_from_geojson",
          "key",
          "RoadNetFactory",
          "search_all_paths",
          "RouteEdge",
          "sum",
          "sort"
        ],
        "line_start": 334,
        "line_end": 358
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\geometry.py",
        "module": "geometry",
        "class_name": null,
        "function_name": "interpolate_position",
        "arguments": [
          {
            "name": "p1",
            "type": "Point"
          },
          {
            "name": "p2",
            "type": "Point"
          },
          {
            "name": "ratio",
            "type": "float"
          }
        ],
        "return_type": "Point",
        "returns": [
          "Point(lat, lon)"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "Point"
        ],
        "line_start": 363,
        "line_end": 366
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\geometry.py",
        "module": "geometry",
        "class_name": null,
        "function_name": "haversine_km",
        "arguments": [
          {
            "name": "p1",
            "type": "Point"
          },
          {
            "name": "p2",
            "type": "Point"
          }
        ],
        "return_type": "float",
        "returns": [
          "R * c"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "radians",
          "atan2",
          "sqrt",
          "sin",
          "cos"
        ],
        "line_start": 369,
        "line_end": 376
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\geometry.py",
        "module": "geometry",
        "class_name": null,
        "function_name": "find_nearest_point",
        "arguments": [
          {
            "name": "point",
            "type": "Point"
          },
          {
            "name": "point_list",
            "type": "list[Point]"
          }
        ],
        "return_type": null,
        "returns": [
          "nearest_point"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "haversine_km",
          "min"
        ],
        "line_start": 379,
        "line_end": 381
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\geometry.py",
        "module": "geometry",
        "class_name": null,
        "function_name": "find_route_edges_around_restricted_zones_from_base_route",
        "arguments": [
          {
            "name": "base_route",
            "type": "RouteEdge"
          },
          {
            "name": "restricted_zones",
            "type": "Tuple[Tuple[Tuple[float, float]]] | list[list[list[float]]]"
          },
          {
            "name": "road_net",
            "type": "dict"
          }
        ],
        "return_type": "RouteEdge | None",
        "returns": [
          "chosen_route"
        ],
        "docstring": "Поиск маршрута в объезд запрещённых зон (полигонов) на основе заданного маршрута",
        "decorators": [],
        "is_public": true,
        "calls": [
          "find_all_route_edges_by_road_net_from_position_to_position",
          "path_intersects_polygons"
        ],
        "line_start": 387,
        "line_end": 414
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\geometry.py",
        "module": "geometry",
        "class_name": null,
        "function_name": "find_route_edges_around_restricted_zones_from_position_to_object",
        "arguments": [
          {
            "name": "lon",
            "type": "float"
          },
          {
            "name": "lat",
            "type": "float"
          },
          {
            "name": "edge_idx",
            "type": "int | None"
          },
          {
            "name": "to_object_id",
            "type": "int"
          },
          {
            "name": "to_object_type",
            "type": "ObjectType"
          },
          {
            "name": "restricted_zones",
            "type": "Tuple[Tuple[Tuple[float, float]]] | list[list[list[float]]]"
          },
          {
            "name": "road_net",
            "type": "dict"
          }
        ],
        "return_type": "RouteEdge | None",
        "returns": [
          "chosen_route"
        ],
        "docstring": "Поиск маршрута в объезд запрещённых зон (полигонов) от позиции до объекта",
        "decorators": [],
        "is_public": true,
        "calls": [
          "find_all_route_edges_by_road_net_from_position",
          "path_intersects_polygons"
        ],
        "line_start": 417,
        "line_end": 447
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\props.py",
    "imports": [
      "from dataclasses import dataclass, field",
      "from datetime import datetime",
      "from typing import Literal",
      "from app.sim_engine.enums import ObjectType"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\props.py",
        "module": "props",
        "class_name": "IdleAreaStorage",
        "function_name": "all",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [
          "self.areas"
        ],
        "docstring": null,
        "decorators": [
          "property"
        ],
        "is_public": true,
        "calls": [],
        "line_start": 115,
        "line_end": 116
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\props.py",
        "module": "props",
        "class_name": "IdleAreaStorage",
        "function_name": "lunch_areas",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [
          "[area for area in self.areas if area.is_lunch_area]"
        ],
        "docstring": null,
        "decorators": [
          "property"
        ],
        "is_public": true,
        "calls": [],
        "line_start": 119,
        "line_end": 120
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\props.py",
        "module": "props",
        "class_name": "IdleAreaStorage",
        "function_name": "shift_change_areas",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [
          "[area for area in self.areas if area.is_shift_change_area]"
        ],
        "docstring": null,
        "decorators": [
          "property"
        ],
        "is_public": true,
        "calls": [],
        "line_start": 123,
        "line_end": 124
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\props.py",
        "module": "props",
        "class_name": "IdleAreaStorage",
        "function_name": "planned_idle_areas",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [
          "[area for area in self.areas if area.is_planned_idle_area]"
        ],
        "docstring": null,
        "decorators": [
          "property"
        ],
        "is_public": true,
        "calls": [],
        "line_start": 127,
        "line_end": 128
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\props.py",
        "module": "props",
        "class_name": "IdleAreaStorage",
        "function_name": "blast_waiting_areas",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [
          "[area for area in self.areas if area.is_blast_waiting_area]"
        ],
        "docstring": null,
        "decorators": [
          "property"
        ],
        "is_public": true,
        "calls": [],
        "line_start": 131,
        "line_end": 132
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\props.py",
        "module": "props",
        "class_name": "ActualTrip",
        "function_name": "is_finished",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": "bool",
        "returns": [
          "self.end_object is not None and self.end_time is not None and (self.end_trip_data is not None)"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 242,
        "line_end": 247
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\props.py",
        "module": "props",
        "class_name": "ActualTrip",
        "function_name": "to_telemetry",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": "dict",
        "returns": [
          "{'truck_id': self.end_trip_data.truck_id, 'shovel_id': self.end_trip_data.shovel_id, 'unload_id': self.end_trip_data.unload_id, 'volume': int(self.end_trip_data.truck_volume), 'weight': int(self.end_trip_data.truck_weight), 'time': self.end_time.isoformat(), 'start_time': self.start_time.isoformat(), 'end_time': self.end_time.isoformat(), 'start_object': {'id': self.start_object.id, 'type': self.start_object.type.key()}, 'end_object': {'id': self.end_object.id, 'type': self.end_object.type.key()}}"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "key",
          "int",
          "is_finished",
          "isoformat",
          "RuntimeError"
        ],
        "line_start": 249,
        "line_end": 270
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\__init__.py",
    "imports": [],
    "functions": []
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\calculations\\base.py",
    "imports": [
      "import random",
      "from datetime import datetime"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\calculations\\base.py",
        "module": "base",
        "class_name": "BreakdownCalc",
        "function_name": "__init__",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "seeded_random",
            "type": "random.Random"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 8,
        "line_end": 9
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\calculations\\base.py",
        "module": "base",
        "class_name": "BreakdownCalc",
        "function_name": "_calculate_rates",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "**kwargs",
            "kind": "kwarg"
          }
        ],
        "return_type": null,
        "returns": [
          "{'failure_rate': failure_rate, 'repair_rate': repair_rate}"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": false,
        "calls": [],
        "line_start": 11,
        "line_end": 25
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\calculations\\base.py",
        "module": "base",
        "class_name": "BreakdownCalc",
        "function_name": "calculate_failure_time",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "**kwargs",
            "kind": "kwarg"
          }
        ],
        "return_type": null,
        "returns": [
          "self.seeded_random.expovariate(rates['failure_rate'])"
        ],
        "docstring": "Время не секунд семуляции, а секунд работы актора\nсамосвал: работа - движение груженым, движение порожним, разгрузка\nэкскаватор: работа - погрузка\nПР: во время разгрузки",
        "decorators": [],
        "is_public": true,
        "calls": [
          "expovariate",
          "_calculate_rates"
        ],
        "line_start": 27,
        "line_end": 35
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\calculations\\base.py",
        "module": "base",
        "class_name": "BreakdownCalc",
        "function_name": "calculate_repair_time",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "**kwargs",
            "kind": "kwarg"
          }
        ],
        "return_type": null,
        "returns": [
          "self.seeded_random.expovariate(rates['repair_rate'])"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "expovariate",
          "_calculate_rates"
        ],
        "line_start": 37,
        "line_end": 39
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\calculations\\base.py",
        "module": "base",
        "class_name": "FuelCalc",
        "function_name": "calculate_fuel_level_while_moving",
        "arguments": [
          {
            "name": "fuel_lvl"
          },
          {
            "name": "sfc"
          },
          {
            "name": "density"
          },
          {
            "name": "p_engine"
          }
        ],
        "return_type": null,
        "returns": [
          "fuel_lvl"
        ],
        "docstring": null,
        "decorators": [
          "staticmethod"
        ],
        "is_public": true,
        "calls": [],
        "line_start": 45,
        "line_end": 48
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\calculations\\base.py",
        "module": "base",
        "class_name": "FuelCalc",
        "function_name": "calculate_fuel_level_while_idle",
        "arguments": [
          {
            "name": "fuel_lvl"
          },
          {
            "name": "fuel_idle_lph"
          }
        ],
        "return_type": null,
        "returns": [
          "fuel_lvl"
        ],
        "docstring": null,
        "decorators": [
          "staticmethod"
        ],
        "is_public": true,
        "calls": [],
        "line_start": 51,
        "line_end": 54
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\calculations\\base.py",
        "module": "base",
        "class_name": "LunchCalc",
        "function_name": "calculate_lunch_times",
        "arguments": [
          {
            "name": "sim_start_time",
            "type": "datetime"
          },
          {
            "name": "lunch_times",
            "type": "list[tuple[datetime, datetime]]"
          }
        ],
        "return_type": "list[tuple[int, int]]",
        "returns": [
          "result"
        ],
        "docstring": "Рассчитываем моменты начала и конца обеденных перерывов относительно времени симуляции",
        "decorators": [
          "staticmethod"
        ],
        "is_public": true,
        "calls": [
          "append",
          "total_seconds"
        ],
        "line_start": 61,
        "line_end": 81
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\calculations\\shovel.py",
    "imports": [
      "from typing import Tuple, Generator",
      "import numpy",
      "from app.sim_engine.core.coefficients import koef_vlazhnosti",
      "from app.sim_engine.core.constants import koef_soprotivleniya, density_by_material",
      "from app.sim_engine.core.props import ShovelProperties, TruckProperties"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\calculations\\shovel.py",
        "module": "shovel",
        "class_name": "ShovelCalc",
        "function_name": "calculate_cycle",
        "arguments": [
          {
            "name": "cls"
          },
          {
            "name": "props",
            "type": "ShovelProperties"
          },
          {
            "name": "glubina_vrezki_m",
            "default": "0.3"
          },
          {
            "name": "dlina_drag_m",
            "default": "2.0"
          },
          {
            "name": "visota_podem_m",
            "default": "3.0"
          },
          {
            "name": "ugol_swing_rad",
            "default": "np.pi / 2"
          },
          {
            "name": "ugol_dump_rad",
            "default": "np.pi / 6"
          },
          {
            "name": "alpha_idle",
            "default": "0.3"
          }
        ],
        "return_type": "dict",
        "returns": [
          "{'vrezka_s': t1, 'idle_vrezka_s': idles[0], 'napolnenie_s': t2, 'idle_napoln_s': idles[1], 'podem_s': t3, 'idle_podem_s': idles[2], 'povorot_s': t4, 'idle_povorot_s': idles[3], 'razgruzka_s': t5, 'idle_dump_s': idles[4], 'vozvrat_s': t6, 'idle_vozv_s': idles[5], 'K_wear': Kw, 'vsego_s': total_s}"
        ],
        "docstring": "Расчёт времён всех стадий одного цикла работы Экскаватора\nждём самосвал, наполняем ковш, поворачиваемся, грузим и всё с самого начала",
        "decorators": [
          "classmethod"
        ],
        "is_public": true,
        "calls": [
          "get_koef",
          "sum",
          "idle"
        ],
        "line_start": 13,
        "line_end": 55
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\calculations\\shovel.py",
        "module": "shovel",
        "class_name": "ShovelCalc",
        "function_name": "_calculate_load_cycles_generator",
        "arguments": [
          {
            "name": "cls"
          },
          {
            "name": "shovel_props",
            "type": "ShovelProperties"
          },
          {
            "name": "truck_props",
            "type": "TruckProperties"
          }
        ],
        "return_type": "Generator[Tuple[int, float, float], None, None]",
        "returns": [],
        "docstring": "Генератор циклов погрузки для заполнения самосвала.\n\nПоследовательно рассчитывает циклы погрузки экскаватора до полного заполнения\nкузова самосвала, контролируя суммарный вес груза.\n\nParameters\n----------\nshovel_props : ShovelProperties\n    Свойства экскаватора\ntruck_props : TruckProperties\n    Свойства самосвала\n\nYields\n------\nTuple[int, float, float]\n    Кортеж содержащий:\n    - int: продолжительность цикла в секундах\n    - float: вес груза в тоннах за текущий цикл\n    - float: объем груза в м³ за текущий цикл\n\nNotes\n-----\n- Генератор останавливается, когда добавление следующего ковша превысит\n  грузоподъемность самосвала\n- Используется плотность материала из глобального словаря density_by_material\n- Вес рассчитывается с учетом коэффициента заполнения ковша",
        "decorators": [
          "classmethod"
        ],
        "is_public": false,
        "calls": [
          "calculate_cycle",
          "int"
        ],
        "line_start": 58,
        "line_end": 104
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\calculations\\shovel.py",
        "module": "shovel",
        "class_name": "ShovelCalc",
        "function_name": "calculate_load_cycles",
        "arguments": [
          {
            "name": "cls"
          },
          {
            "name": "shovel_props",
            "type": "ShovelProperties"
          },
          {
            "name": "truck_props",
            "type": "TruckProperties"
          }
        ],
        "return_type": "Tuple[int, float, float]",
        "returns": [
          "(total_time, total_weight, total_volime)"
        ],
        "docstring": "Рассчитывает суммарные показатели полного цикла погрузки самосвала.\n\nАгрегирует данные всех циклов погрузки, сгенерированных методом\n`_calculate_load_cycles_generator`, и возвращает общие итоги по времени,\nвесу и объему за всю операцию погрузки одного самосвала.\n\nParameters\n----------\nshovel_props : ShovelProperties\n    Свойства экскаватора\ntruck_props : TruckProperties\n    Свойства самосвала\n\nReturns\n-------\nTuple[int, float, float]\n    Кортеж содержащий:\n    - int: общее время погрузки в секундах\n    - float: суммарный вес груза в тоннах\n    - float: суммарный объем груза в м³\n\nNotes\n-----\n- Метод использует генератор `_calculate_load_cycles_generator` для получения\n  последовательности циклов погрузки\n- Суммирование прекращается при достижении максимальной грузоподъемности самосвала\n- Возвращаемые значения представляют полную загрузку одного самосвала",
        "decorators": [
          "classmethod"
        ],
        "is_public": true,
        "calls": [
          "_calculate_load_cycles_generator"
        ],
        "line_start": 107,
        "line_end": 148
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\calculations\\shovel.py",
        "module": "shovel",
        "class_name": "ShovelCalc",
        "function_name": "calculate_load_cycles_cumulative_generator",
        "arguments": [
          {
            "name": "cls"
          },
          {
            "name": "shovel_props",
            "type": "ShovelProperties"
          },
          {
            "name": "truck_props",
            "type": "TruckProperties"
          }
        ],
        "return_type": "Generator[Tuple[int, float, float], None, None]",
        "returns": [],
        "docstring": "Генератор циклов погрузки с накопленными итогами.\n\nПоследовательно выдает данные каждого цикла погрузки с кумулятивными\n(накопленными) значениями веса и объема. Позволяет отслеживать прогресс\nзаполнения самосвала после каждого цикла.\n\nParameters\n----------\nshovel_props : ShovelProperties\n    Свойства экскаватора для расчета циклов погрузки\ntruck_props : TruckProperties\n    Свойства самосвала, определяющие максимальную грузоподъемность\n\nYields\n------\nTuple[int, float, float]\n    Кортеж содержащий:\n    - int: продолжительность ТЕКУЩЕГО ЦИКЛА в секундах\n    - float: накопленный суммарный вес груза в тоннах (с учетом текущего цикла)\n    - float: накопленный суммарный объем груза в м³ (с учетом текущего цикла)\n\nNotes\n-----\n- В отличие от `_calculate_load_cycles_generator`, возвращает накопленные значения\n- Полезен для анализа прогресса погрузки и построения графиков заполнения\n- ВРЕМЯ ВОЗВРАЩАЕТСЯ ДЛЯ ОТДЕЛЬНОГО ЦИКЛА, а вес и объем - кумулятивные",
        "decorators": [
          "classmethod"
        ],
        "is_public": true,
        "calls": [
          "_calculate_load_cycles_generator"
        ],
        "line_start": 151,
        "line_end": 189
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\calculations\\shovel.py",
        "module": "shovel",
        "class_name": "ShovelCalc",
        "function_name": "get_koef",
        "arguments": [
          {
            "name": "props"
          }
        ],
        "return_type": "dict",
        "returns": [
          "{'K_f': props.koef_zapolneniya, 'K_r': koef_soprotivleniya[props.tip_porody], 'K_w': koef_vlazhnosti(props.vlazhnost_percent), 'K_T': 1.25, 'K_i': props.koef_inertsii, 'K_h': props.koef_gidravliki, 'K_ret': props.koef_vozvrata}"
        ],
        "docstring": null,
        "decorators": [
          "staticmethod"
        ],
        "is_public": true,
        "calls": [
          "koef_vlazhnosti"
        ],
        "line_start": 194,
        "line_end": 203
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\calculations\\truck.py",
    "imports": [
      "from typing import Generator",
      "import numpy",
      "from roadnet.core import Edge",
      "from app.sim_engine.core.geometry import Point, interpolate_position, haversine_km, RouteEdge"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\calculations\\truck.py",
        "module": "truck",
        "class_name": "TruckCalc",
        "function_name": "calculate_segment_motion",
        "arguments": [
          {
            "name": "cls"
          },
          {
            "name": "p1",
            "type": "Point"
          },
          {
            "name": "p2",
            "type": "Point"
          },
          {
            "name": "initial_speed",
            "type": "float"
          },
          {
            "name": "speed_limit",
            "type": "float"
          },
          {
            "name": "acceleration",
            "type": "float"
          },
          {
            "name": "time_step_sec",
            "type": "int",
            "default": "1"
          }
        ],
        "return_type": "Generator[tuple[float, Point], None, None]",
        "returns": [],
        "docstring": "Расчет движения между двумя точками в маршруте",
        "decorators": [
          "classmethod"
        ],
        "is_public": true,
        "calls": [
          "interpolate_position",
          "haversine_km",
          "min"
        ],
        "line_start": 11,
        "line_end": 33
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\calculations\\truck.py",
        "module": "truck",
        "class_name": "TruckCalc",
        "function_name": "calculate_motion",
        "arguments": [
          {
            "name": "cls"
          },
          {
            "name": "route"
          },
          {
            "name": "props"
          },
          {
            "name": "forward"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": "Расчет движения по маршруту состоящего из списка точек",
        "decorators": [
          "classmethod"
        ],
        "is_public": true,
        "calls": [
          "list",
          "calculate_segment_motion",
          "range",
          "len",
          "reversed"
        ],
        "line_start": 36,
        "line_end": 51
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\calculations\\truck.py",
        "module": "truck",
        "class_name": "TruckCalc",
        "function_name": "calculate_edge_motion",
        "arguments": [
          {
            "name": "cls"
          },
          {
            "name": "edge",
            "type": "Edge"
          },
          {
            "name": "initial_speed",
            "type": "float"
          },
          {
            "name": "speed_limit",
            "type": "float"
          },
          {
            "name": "acceleration",
            "type": "float"
          },
          {
            "name": "time_step_sec",
            "type": "int",
            "default": "1"
          }
        ],
        "return_type": "Generator[tuple[float, Point], None, None]",
        "returns": [],
        "docstring": "Расчет движения по ребру графа",
        "decorators": [
          "classmethod"
        ],
        "is_public": true,
        "calls": [
          "interpolate_position",
          "min"
        ],
        "line_start": 54,
        "line_end": 77
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\calculations\\truck.py",
        "module": "truck",
        "class_name": "TruckCalc",
        "function_name": "calculate_motion_by_edges",
        "arguments": [
          {
            "name": "cls"
          },
          {
            "name": "route",
            "type": "RouteEdge"
          },
          {
            "name": "props"
          },
          {
            "name": "forward"
          },
          {
            "name": "is_loaded"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": "Расчет движения по списку ребер графа",
        "decorators": [
          "classmethod"
        ],
        "is_public": true,
        "calls": [
          "generator_path",
          "calculate_edge_motion"
        ],
        "line_start": 80,
        "line_end": 103
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\calculations\\truck.py",
        "module": "truck",
        "class_name": "TruckCalc",
        "function_name": "calculate_time_motion_by_edges",
        "arguments": [
          {
            "name": "cls"
          },
          {
            "name": "route",
            "type": "RouteEdge"
          },
          {
            "name": "props"
          },
          {
            "name": "forward"
          }
        ],
        "return_type": null,
        "returns": [
          "sum([1 for _ in cls.calculate_motion_by_edges(route, props, forward, is_loaded)])"
        ],
        "docstring": null,
        "decorators": [
          "classmethod"
        ],
        "is_public": true,
        "calls": [
          "sum",
          "calculate_motion_by_edges"
        ],
        "line_start": 106,
        "line_end": 108
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\calculations\\truck.py",
        "module": "truck",
        "class_name": "TruckCalc",
        "function_name": "time_empty",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": "int",
        "returns": [
          "int(np.ceil(t / self.driver_skill))"
        ],
        "docstring": "Время движения порожним к экскаватору (сек)\nФормула: t = S / v * 3600 / driver_skill,\nгде S — длина пути (км), v — скорость порожним (км/ч)",
        "decorators": [],
        "is_public": true,
        "calls": [
          "int",
          "ceil"
        ],
        "line_start": 111,
        "line_end": 118
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\calculations\\truck.py",
        "module": "truck",
        "class_name": "TruckCalc",
        "function_name": "time_loaded",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": "int",
        "returns": [
          "int(np.ceil(t / self.driver_skill))"
        ],
        "docstring": "Время движения гружённым к разгрузке (сек)\nФормула: t = S / v * 3600 / driver_skill,\nгде S — длина пути (км), v — скорость гружённым (км/ч)",
        "decorators": [],
        "is_public": true,
        "calls": [
          "int",
          "ceil"
        ],
        "line_start": 120,
        "line_end": 127
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\calculations\\unload.py",
    "imports": [
      "from app.sim_engine.core.constants import koef_soprotivleniya, unloading_speed, density_by_material",
      "from app.sim_engine.core.props import TruckProperties, UnlProperties"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\calculations\\unload.py",
        "module": "unload",
        "class_name": "UnloadCalc",
        "function_name": "unload_calculation",
        "arguments": [
          {
            "name": "cls"
          },
          {
            "name": "props",
            "type": "UnlProperties"
          },
          {
            "name": "truck_volume"
          }
        ],
        "return_type": null,
        "returns": [
          "{'t_drive': t_drive, 't_stop': t_stop, 't_lift': t_lift, 't_dump': t_dump, 't_down': t_down, 't_leave': t_leave, 't_total': total_time, 'params': dict(K_ugl=K_ugl, K_temp=K_temp, K_mat=K_mat, speed=speed)}"
        ],
        "docstring": "1. t_drive — подъезд (сек), фиксированно 30 сек\n2. t_stop — остановка и установка (15 сек)\n3. t_lift — подъем кузова (20 сек)\n4. t_dump — высыпание груза:\n    t_dump = V / (speed * K_угол * K_мат * K_темп)\n5. t_down — опускание кузова (15 сек)\n6. t_leave — уход (30 сек)\nпотом исправлю CHANGE\nдлина участка для маневра\nсредняя скорость маневра\nзамедление",
        "decorators": [
          "classmethod"
        ],
        "is_public": true,
        "calls": [
          "max",
          "dict"
        ],
        "line_start": 8,
        "line_end": 43
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\calculations\\unload.py",
        "module": "unload",
        "class_name": "UnloadCalc",
        "function_name": "unload_calculation_by_norm",
        "arguments": [
          {
            "name": "cls"
          },
          {
            "name": "unload_props",
            "type": "UnlProperties"
          },
          {
            "name": "truck_props",
            "type": "TruckProperties"
          }
        ],
        "return_type": null,
        "returns": [
          "{'t_drive': t_drive, 't_stop': t_stop, 't_lift': t_lift, 't_dump': t_dump, 't_down': t_down, 't_leave': t_leave, 't_total': total_time, 'params': dict(K_ugl=K_ugl, K_temp=K_temp, K_mat=K_mat, speed=speed)}"
        ],
        "docstring": "1. t_drive — подъезд (сек), фиксированно 30 сек\n2. t_stop — остановка и установка (15 сек)\n3. t_lift — подъем кузова (20 сек)\n4. t_dump — высыпание груза:\n    t_dump = V / (speed * K_угол * K_мат * K_темп)\n5. t_down — опускание кузова (15 сек)\n6. t_leave — уход (30 сек)\nпотом исправлю CHANGE\nдлина участка для маневра\nсредняя скорость маневра\nзамедление",
        "decorators": [
          "classmethod"
        ],
        "is_public": true,
        "calls": [
          "max",
          "dict"
        ],
        "line_start": 46,
        "line_end": 80
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\calculations\\__init__.py",
    "imports": [],
    "functions": []
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\planner\\entities.py",
    "imports": [
      "from dataclasses import dataclass",
      "from typing import Dict, Tuple, Optional, List"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\planner\\entities.py",
        "module": "entities",
        "class_name": "InputPlanningData",
        "function_name": "truck_ids",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": "List[int]",
        "returns": [
          "sorted({i for i, _ in self.T_load.keys()})"
        ],
        "docstring": null,
        "decorators": [
          "property"
        ],
        "is_public": true,
        "calls": [
          "sorted",
          "keys"
        ],
        "line_start": 28,
        "line_end": 29
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\planner\\entities.py",
        "module": "entities",
        "class_name": "InputPlanningData",
        "function_name": "shovel_ids",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": "List[int]",
        "returns": [
          "sorted({j for _, j in self.T_load.keys()})"
        ],
        "docstring": null,
        "decorators": [
          "property"
        ],
        "is_public": true,
        "calls": [
          "sorted",
          "keys"
        ],
        "line_start": 32,
        "line_end": 33
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\planner\\entities.py",
        "module": "entities",
        "class_name": "InputPlanningData",
        "function_name": "unload_ids",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": "List[int]",
        "returns": [
          "sorted({z for _, z in self.T_unload.keys()})"
        ],
        "docstring": null,
        "decorators": [
          "property"
        ],
        "is_public": true,
        "calls": [
          "sorted",
          "keys"
        ],
        "line_start": 36,
        "line_end": 37
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\planner\\manage.py",
    "imports": [
      "import logging",
      "from collections import defaultdict",
      "from app.sim_engine.core.calculations.shovel import ShovelCalc",
      "from app.sim_engine.core.calculations.truck import TruckCalc",
      "from app.sim_engine.core.calculations.unload import UnloadCalc",
      "from app.sim_engine.core.geometry import build_route_edges_by_road_net_from_position, build_route_edges_by_road_net",
      "from app.sim_engine.core.planner.entities import InputPlanningData",
      "from app.sim_engine.core.planner.solvers.cp import CPSolver",
      "from app.sim_engine.core.planner.solvers.milp import MILPSolver",
      "from app.sim_engine.core.props import SimData, PlannedTrip",
      "from app.sim_engine.enums import ObjectType"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\planner\\manage.py",
        "module": "manage",
        "class_name": "Planner",
        "function_name": "__init__",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "solver",
            "type": "str",
            "default": "None"
          },
          {
            "name": "msg",
            "type": "bool",
            "default": "False"
          },
          {
            "name": "workers",
            "type": "int",
            "default": "4"
          },
          {
            "name": "time_limit",
            "type": "int",
            "default": "60"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 24,
        "line_end": 34
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\planner\\manage.py",
        "module": "manage",
        "class_name": "Planner",
        "function_name": "_init_solver",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [
          "solver"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": false,
        "calls": [],
        "line_start": 36,
        "line_end": 51
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\planner\\manage.py",
        "module": "manage",
        "class_name": "Planner",
        "function_name": "get_planning_data",
        "arguments": [
          {
            "name": "simdata",
            "type": "SimData"
          }
        ],
        "return_type": "InputPlanningData",
        "returns": [
          "planning_data"
        ],
        "docstring": "Метод набивающий матрицу данных",
        "decorators": [
          "staticmethod"
        ],
        "is_public": true,
        "calls": [
          "values",
          "int",
          "build_route_edges_by_road_net_from_position",
          "unload_calculation_by_norm",
          "len",
          "build_route_edges_by_road_net",
          "calculate_load_cycles",
          "dict",
          "calculate_time_motion_by_edges",
          "InputPlanningData"
        ],
        "line_start": 54,
        "line_end": 179
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\planner\\manage.py",
        "module": "manage",
        "class_name": "Planner",
        "function_name": "run_with_exclude",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "sim_data",
            "type": "SimData"
          },
          {
            "name": "exclude_objects",
            "type": "dict[str, list[int]]"
          }
        ],
        "return_type": "dict",
        "returns": [
          "planned_trips"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "defaultdict",
          "int",
          "run",
          "PlannedTrip",
          "append",
          "pop",
          "info",
          "total_seconds"
        ],
        "line_start": 181,
        "line_end": 219
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\planner\\manage.py",
        "module": "manage",
        "class_name": "Planner",
        "function_name": "run",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "simdata",
            "type": "SimData"
          }
        ],
        "return_type": null,
        "returns": [
          "result"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "get_planning_data",
          "run",
          "_init_solver",
          "info"
        ],
        "line_start": 221,
        "line_end": 240
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\planner\\planning_matrix.py",
    "imports": [
      "from app.sim_engine.core.calculations.shovel import ShovelCalc",
      "from app.sim_engine.core.calculations.truck import TruckCalc",
      "from app.sim_engine.core.calculations.unload import UnloadCalc",
      "from app.sim_engine.core.geometry import build_route_edges_by_road_net_from_position, build_route_edges_by_road_net",
      "from app.sim_engine.core.planner.entities import InputPlanningData",
      "from app.sim_engine.core.props import SimData",
      "from app.sim_engine.enums import ObjectType"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\planner\\planning_matrix.py",
        "module": "planning_matrix",
        "class_name": null,
        "function_name": "get_planning_data",
        "arguments": [
          {
            "name": "simdata",
            "type": "SimData"
          }
        ],
        "return_type": "InputPlanningData",
        "returns": [
          "planning_data"
        ],
        "docstring": "Метод набивающий матрицу данных",
        "decorators": [],
        "is_public": true,
        "calls": [
          "values",
          "int",
          "build_route_edges_by_road_net_from_position",
          "unload_calculation_by_norm",
          "len",
          "build_route_edges_by_road_net",
          "calculate_load_cycles",
          "dict",
          "calculate_time_motion_by_edges",
          "InputPlanningData"
        ],
        "line_start": 10,
        "line_end": 135
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\planner\\__init__.py",
    "imports": [],
    "functions": []
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\planner\\solvers\\cp.py",
    "imports": [
      "import logging",
      "from math import floor",
      "from ortools.sat.python import cp_model",
      "from app.sim_engine.core.planner.entities import InputPlanningData"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\planner\\solvers\\cp.py",
        "module": "cp",
        "class_name": "CPSolver",
        "function_name": "compute_Kmax_i",
        "arguments": [
          {
            "name": "inst",
            "type": "InputPlanningData"
          },
          {
            "name": "i",
            "type": "int"
          }
        ],
        "return_type": "int",
        "returns": [
          "max(0, floor(available / max(1, min_d)))"
        ],
        "docstring": "Грубая верхняя граница числа рейсов для самосвала i",
        "decorators": [
          "staticmethod"
        ],
        "is_public": true,
        "calls": [
          "floor",
          "max",
          "min",
          "keys"
        ],
        "line_start": 17,
        "line_end": 28
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\planner\\solvers\\cp.py",
        "module": "cp",
        "class_name": "CPSolver",
        "function_name": "build_cp_model",
        "arguments": [
          {
            "name": "cls"
          },
          {
            "name": "inst",
            "type": "InputPlanningData"
          },
          {
            "name": "use_individual_kmax",
            "type": "bool",
            "default": "True"
          }
        ],
        "return_type": null,
        "returns": [
          "(model, V)"
        ],
        "docstring": null,
        "decorators": [
          "classmethod"
        ],
        "is_public": true,
        "calls": [
          "int",
          "CpModel",
          "OnlyEnforceIf",
          "sum",
          "Add",
          "values",
          "range",
          "max",
          "dict",
          "round",
          "compute_Kmax_i",
          "NewBoolVar",
          "append",
          "AddNoOverlap",
          "Maximize",
          "Not",
          "NewOptionalIntervalVar",
          "AddBoolOr",
          "NewIntVar"
        ],
        "line_start": 31,
        "line_end": 160
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\planner\\solvers\\cp.py",
        "module": "cp",
        "class_name": "CPSolver",
        "function_name": "run",
        "arguments": [
          {
            "name": "cls"
          },
          {
            "name": "inst",
            "type": "InputPlanningData"
          }
        ],
        "return_type": null,
        "returns": [
          "result"
        ],
        "docstring": "Решение CP‑SAT и извлечение расписания в прежнем формате.",
        "decorators": [
          "classmethod"
        ],
        "is_public": true,
        "calls": [
          "build_cp_model",
          "int",
          "float",
          "range",
          "BooleanValue",
          "Solve",
          "ObjectiveValue",
          "CpSolver",
          "append",
          "Value",
          "get",
          "info",
          "sort"
        ],
        "line_start": 163,
        "line_end": 251
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\planner\\solvers\\greedy.py",
    "imports": [
      "import logging",
      "from copy import deepcopy",
      "from datetime import datetime",
      "from typing import List",
      "from app.sim_engine.core.planner.entities import InputPlanningData",
      "from app.sim_engine.core.planner.planning_matrix import get_planning_data",
      "from app.sim_engine.core.props import PlannedTrip",
      "from app.sim_engine.core.simulations.truck import Truck",
      "from app.sim_engine.core.simulations.utils.dependency_resolver import DependencyResolver",
      "from app.sim_engine.enums import ObjectType",
      "from app.sim_engine.states import TruckState"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\planner\\solvers\\greedy.py",
        "module": "greedy",
        "class_name": "GreedySolver",
        "function_name": "__init__",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "planning_data",
            "type": "InputPlanningData",
            "default": "None"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "deepcopy",
          "env"
        ],
        "line_start": 19,
        "line_end": 30
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\planner\\solvers\\greedy.py",
        "module": "greedy",
        "class_name": "GreedySolver",
        "function_name": "planning_data",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [
          "self._planning_data"
        ],
        "docstring": null,
        "decorators": [
          "property"
        ],
        "is_public": true,
        "calls": [
          "get_planning_data"
        ],
        "line_start": 33,
        "line_end": 36
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\planner\\solvers\\greedy.py",
        "module": "greedy",
        "class_name": "GreedySolver",
        "function_name": "_included_object",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "object_type",
            "type": "ObjectType"
          },
          {
            "name": "object_id",
            "type": "int"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": false,
        "calls": [
          "remove"
        ],
        "line_start": 38,
        "line_end": 39
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\planner\\solvers\\greedy.py",
        "module": "greedy",
        "class_name": "GreedySolver",
        "function_name": "_excluded_object",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "object_type",
            "type": "ObjectType"
          },
          {
            "name": "object_id",
            "type": "int"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": false,
        "calls": [
          "append"
        ],
        "line_start": 41,
        "line_end": 42
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\planner\\solvers\\greedy.py",
        "module": "greedy",
        "class_name": "GreedySolver",
        "function_name": "_included_objects",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "objects",
            "type": "list[tuple[int, ObjectType]]"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": false,
        "calls": [
          "_included_object"
        ],
        "line_start": 44,
        "line_end": 46
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\planner\\solvers\\greedy.py",
        "module": "greedy",
        "class_name": "GreedySolver",
        "function_name": "_excluded_objects",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "objects",
            "type": "list[tuple[int, ObjectType]]"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": false,
        "calls": [
          "_excluded_object"
        ],
        "line_start": 48,
        "line_end": 50
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\planner\\solvers\\greedy.py",
        "module": "greedy",
        "class_name": "GreedySolver",
        "function_name": "_update_trucks_position",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "truck_id"
          },
          {
            "name": "sim_truck"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": false,
        "calls": [],
        "line_start": 52,
        "line_end": 56
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\planner\\solvers\\greedy.py",
        "module": "greedy",
        "class_name": "GreedySolver",
        "function_name": "_reset_cycle",
        "arguments": [
          {
            "name": "sim_truck"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [
          "staticmethod"
        ],
        "is_public": false,
        "calls": [
          "interrupt"
        ],
        "line_start": 59,
        "line_end": 64
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\planner\\solvers\\greedy.py",
        "module": "greedy",
        "class_name": "GreedySolver",
        "function_name": "rebuild_planning_data",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "start_time",
            "default": "None"
          },
          {
            "name": "end_time",
            "default": "None"
          },
          {
            "name": "excluded_object",
            "type": "tuple[int, ObjectType]",
            "default": "None"
          },
          {
            "name": "included_object",
            "type": "tuple[int, ObjectType]",
            "default": "None"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "debug",
          "_update_trucks_position",
          "_included_object",
          "_reset_cycle",
          "_excluded_object",
          "items"
        ],
        "line_start": 66,
        "line_end": 89
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\planner\\solvers\\greedy.py",
        "module": "greedy",
        "class_name": "GreedySolver",
        "function_name": "rebuild_planning_data_cascade",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "start_time",
            "type": "datetime | None",
            "default": "None"
          },
          {
            "name": "end_time",
            "type": "datetime | None",
            "default": "None"
          },
          {
            "name": "excluded_objects",
            "type": "List[tuple[int, ObjectType]] | None",
            "default": "None"
          },
          {
            "name": "included_objects",
            "type": "List[tuple[int, ObjectType]] | None",
            "default": "None"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "debug",
          "_update_trucks_position",
          "_included_objects",
          "_reset_cycle",
          "_excluded_objects",
          "items"
        ],
        "line_start": 91,
        "line_end": 113
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\planner\\solvers\\greedy.py",
        "module": "greedy",
        "class_name": "GreedySolver",
        "function_name": "find_trucks_to_shovel",
        "arguments": [
          {
            "name": "shovel"
          }
        ],
        "return_type": null,
        "returns": [
          "trucks"
        ],
        "docstring": null,
        "decorators": [
          "staticmethod"
        ],
        "is_public": true,
        "calls": [
          "append",
          "values"
        ],
        "line_start": 116,
        "line_end": 121
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\planner\\solvers\\greedy.py",
        "module": "greedy",
        "class_name": "GreedySolver",
        "function_name": "choose_next_trip",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "truck"
          },
          {
            "name": "now",
            "type": "int"
          }
        ],
        "return_type": null,
        "returns": [
          "best_choice"
        ],
        "docstring": "Выбирает лучшую связку (shovel, unload) для данного самосвала",
        "decorators": [],
        "is_public": true,
        "calls": [
          "find_trucks_to_shovel",
          "debug",
          "values",
          "len",
          "append"
        ],
        "line_start": 123,
        "line_end": 164
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\planner\\solvers\\greedy.py",
        "module": "greedy",
        "class_name": "GreedySolver",
        "function_name": "assign_trip",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "truck",
            "type": "Truck"
          },
          {
            "name": "now",
            "type": "int"
          }
        ],
        "return_type": "PlannedTrip | None",
        "returns": [
          "trip"
        ],
        "docstring": "Формирует новый PlannedTrip и обновляет маршруты для самосвала",
        "decorators": [],
        "is_public": true,
        "calls": [
          "choose_next_trip",
          "PlannedTrip"
        ],
        "line_start": 166,
        "line_end": 180
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\planner\\solvers\\milp.py",
    "imports": [
      "import logging",
      "from math import floor",
      "from typing import Dict, List, Tuple",
      "from pulp import LpProblem, LpMaximize, LpVariable, LpBinary, LpInteger, lpSum, LpStatus, value, PULP_CBC_CMD, HiGHS_CMD",
      "from app.sim_engine.core.planner.entities import InputPlanningData",
      "from app.sim_engine.core.simulations.utils.dependency_resolver import DependencyResolver"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\planner\\solvers\\milp.py",
        "module": "milp",
        "class_name": "MILPSolver",
        "function_name": "compute_Kmax_i",
        "arguments": [
          {
            "name": "inst",
            "type": "InputPlanningData"
          },
          {
            "name": "i",
            "type": "int"
          }
        ],
        "return_type": "int",
        "returns": [
          "max(0, floor(available / max(1, min_d)))"
        ],
        "docstring": "Грубая верхняя граница числа рейсов для самосвала i",
        "decorators": [
          "staticmethod"
        ],
        "is_public": true,
        "calls": [
          "floor",
          "max",
          "min",
          "keys"
        ],
        "line_start": 21,
        "line_end": 32
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\planner\\solvers\\milp.py",
        "module": "milp",
        "class_name": "MILPSolver",
        "function_name": "default_Kmax",
        "arguments": [
          {
            "name": "cls"
          },
          {
            "name": "inst",
            "type": "InputPlanningData"
          }
        ],
        "return_type": "Dict[int, int]",
        "returns": [
          "{i: cls.compute_Kmax_i(inst, i) for i in inst.truck_ids}"
        ],
        "docstring": "Если Kmax не задан, вычислить его для каждого самосвала",
        "decorators": [
          "classmethod"
        ],
        "is_public": true,
        "calls": [
          "compute_Kmax_i"
        ],
        "line_start": 35,
        "line_end": 37
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\planner\\solvers\\milp.py",
        "module": "milp",
        "class_name": "MILPSolver",
        "function_name": "a_use",
        "arguments": [
          {
            "name": "i"
          },
          {
            "name": "k"
          },
          {
            "name": "j"
          }
        ],
        "return_type": null,
        "returns": [
          "lpSum((x[i, k, j, z] for z in Z))"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "lpSum"
        ],
        "line_start": 92,
        "line_end": 93
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\planner\\solvers\\milp.py",
        "module": "milp",
        "class_name": "MILPSolver",
        "function_name": "b_use",
        "arguments": [
          {
            "name": "i"
          },
          {
            "name": "k"
          },
          {
            "name": "z"
          }
        ],
        "return_type": null,
        "returns": [
          "lpSum((x[i, k, j, z] for j in J))"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "lpSum"
        ],
        "line_start": 95,
        "line_end": 96
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\planner\\solvers\\milp.py",
        "module": "milp",
        "class_name": "MILPSolver",
        "function_name": "build_model",
        "arguments": [
          {
            "name": "cls"
          },
          {
            "name": "inst",
            "type": "InputPlanningData"
          },
          {
            "name": "shovel_queue",
            "type": "bool",
            "default": "True"
          }
        ],
        "return_type": null,
        "returns": [
          "(model, vars_pack)"
        ],
        "docstring": "Собираем все ограничения и условия поиска решения",
        "decorators": [
          "classmethod"
        ],
        "is_public": true,
        "calls": [
          "lpSum"
        ],
        "line_start": 40,
        "line_end": 199
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\planner\\solvers\\milp.py",
        "module": "milp",
        "class_name": "MILPSolver",
        "function_name": "run",
        "arguments": [
          {
            "name": "cls"
          },
          {
            "name": "inst",
            "type": "InputPlanningData"
          }
        ],
        "return_type": null,
        "returns": [
          "result"
        ],
        "docstring": "Решить модель и получить расписание\n        ",
        "decorators": [
          "classmethod"
        ],
        "is_public": true,
        "calls": [
          "int",
          "ValueError",
          "value",
          "PULP_CBC_CMD",
          "solve",
          "range",
          "HiGHS_CMD",
          "round",
          "append",
          "build_model",
          "info",
          "sim_conf",
          "sort"
        ],
        "line_start": 202,
        "line_end": 282
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\planner\\solvers\\__init__.py",
    "imports": [],
    "functions": []
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\base.py",
    "imports": [
      "from app.sim_engine.core.simulations.utils.dependency_resolver import DependencyResolver"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\base.py",
        "module": "base",
        "class_name": "TelemetryEmitter",
        "function_name": "__init__",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "tick"
          },
          {
            "name": "data_callback"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "process",
          "env",
          "run",
          "writer"
        ],
        "line_start": 6,
        "line_end": 14
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\base.py",
        "module": "base",
        "class_name": "TelemetryEmitter",
        "function_name": "run",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "data_callback",
          "writerow",
          "timeout"
        ],
        "line_start": 16,
        "line_end": 19
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\entities.py",
    "imports": [
      "from dataclasses import dataclass",
      "from app.sim_engine.core.simulations.quarry import Quarry",
      "from app.sim_engine.core.simulations.shovel import Shovel",
      "from app.sim_engine.core.simulations.truck import Truck",
      "from app.sim_engine.core.simulations.unload import Unload"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\entities.py",
        "module": "entities",
        "class_name": "SimContext",
        "function_name": "get_truck_by_id",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "truck_id",
            "type": "int"
          }
        ],
        "return_type": null,
        "returns": [
          "self.trucks[truck_id]"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 22,
        "line_end": 23
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\entities.py",
        "module": "entities",
        "class_name": "SimContext",
        "function_name": "get_shovel_by_id",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "shovel_id",
            "type": "int"
          }
        ],
        "return_type": null,
        "returns": [
          "self.shovels[shovel_id]"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 25,
        "line_end": 26
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\entities.py",
        "module": "entities",
        "class_name": "SimContext",
        "function_name": "get_unload_by_id",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "unload_id",
            "type": "int"
          }
        ],
        "return_type": null,
        "returns": [
          "self.unloads[unload_id]"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 28,
        "line_end": 29
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\fuel_station.py",
    "imports": [
      "import copy",
      "from datetime import timedelta",
      "import simpy",
      "from app.sim_engine.core.props import FuelStationProperties",
      "from app.sim_engine.core.simulations.behaviors.base import BaseTickBehavior",
      "from app.sim_engine.core.simulations.utils.dependency_resolver import DependencyResolver",
      "from app.sim_engine.enums import ObjectType",
      "from app.sim_engine.events import FuelStationEvent, EventType",
      "from app.sim_engine.states import FuelStationState, TruckState"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\fuel_station.py",
        "module": "fuel_station",
        "class_name": "FuelStation",
        "function_name": "__init__",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "properties",
            "type": "FuelStationProperties"
          },
          {
            "name": "unit_id"
          },
          {
            "name": "name"
          },
          {
            "name": "initial_position"
          },
          {
            "name": "tick",
            "default": "1"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "BaseTickBehavior",
          "env",
          "writer",
          "Resource"
        ],
        "line_start": 15,
        "line_end": 31
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\fuel_station.py",
        "module": "fuel_station",
        "class_name": "FuelStation",
        "function_name": "current_time",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [
          "timestamp"
        ],
        "docstring": null,
        "decorators": [
          "property"
        ],
        "is_public": true,
        "calls": [
          "timestamp",
          "timedelta"
        ],
        "line_start": 34,
        "line_end": 37
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\fuel_station.py",
        "module": "fuel_station",
        "class_name": "FuelStation",
        "function_name": "refuelling",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "truck"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "remove",
          "push_event",
          "int",
          "timeout",
          "request",
          "range",
          "append",
          "copy"
        ],
        "line_start": 39,
        "line_end": 55
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\fuel_station.py",
        "module": "fuel_station",
        "class_name": "FuelStation",
        "function_name": "main_tic_process",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 57,
        "line_end": 61
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\fuel_station.py",
        "module": "fuel_station",
        "class_name": "FuelStation",
        "function_name": "push_event",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "event_type",
            "type": "EventType"
          },
          {
            "name": "truck"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "FuelStationEvent",
          "ru",
          "push_event",
          "code"
        ],
        "line_start": 63,
        "line_end": 74
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\fuel_station.py",
        "module": "fuel_station",
        "class_name": "FuelStation",
        "function_name": "telemetry_process",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "writerow",
          "ru",
          "key"
        ],
        "line_start": 76,
        "line_end": 85
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\quarry.py",
    "imports": [
      "import logging",
      "import random",
      "from copy import deepcopy",
      "from datetime import timedelta, datetime",
      "from typing import Tuple",
      "from app.sim_engine.core.planner.manage import Planner",
      "from app.sim_engine.core.props import ShiftChangeArea, SimData, Blasting, IdleArea",
      "from app.sim_engine.core.simulations.behaviors.blasting import QuarryBlastingWatcher",
      "from app.sim_engine.core.simulations.utils.dependency_resolver import DependencyResolver",
      "from app.sim_engine.enums import ObjectType",
      "from app.sim_engine.events import Event, EventType",
      "from app.sim_engine.states import TruckState"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\quarry.py",
        "module": "quarry",
        "class_name": "Quarry",
        "function_name": "__init__",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "trip_service",
          "solver",
          "env",
          "writer",
          "QuarryBlastingWatcher",
          "sim_conf"
        ],
        "line_start": 27,
        "line_end": 61
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\quarry.py",
        "module": "quarry",
        "class_name": "Quarry",
        "function_name": "current_time",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": "datetime",
        "returns": [
          "self.start_time + timedelta(seconds=self.env.now)"
        ],
        "docstring": null,
        "decorators": [
          "property"
        ],
        "is_public": true,
        "calls": [
          "timedelta"
        ],
        "line_start": 64,
        "line_end": 65
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\quarry.py",
        "module": "quarry",
        "class_name": "Quarry",
        "function_name": "current_timestamp",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [
          "self.current_time.timestamp()"
        ],
        "docstring": null,
        "decorators": [
          "property"
        ],
        "is_public": true,
        "calls": [
          "timestamp"
        ],
        "line_start": 68,
        "line_end": 69
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\quarry.py",
        "module": "quarry",
        "class_name": "Quarry",
        "function_name": "prepare_seeded_random",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": "None",
        "returns": [],
        "docstring": "Generate seed if it doesn't exist in `self.sim_data.seed` and init `random.Random` instance with it\n\nNeeds to be called when we already have `self.sim_data`",
        "decorators": [],
        "is_public": true,
        "calls": [
          "getrandbits",
          "Random"
        ],
        "line_start": 71,
        "line_end": 79
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\quarry.py",
        "module": "quarry",
        "class_name": "Quarry",
        "function_name": "update_planned_trips",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "get",
          "interrupt",
          "items"
        ],
        "line_start": 81,
        "line_end": 88
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\quarry.py",
        "module": "quarry",
        "class_name": "Quarry",
        "function_name": "update_trucks_position",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "sim_data"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "items"
        ],
        "line_start": 90,
        "line_end": 95
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\quarry.py",
        "module": "quarry",
        "class_name": "Quarry",
        "function_name": "rebuild_plan_by_add_exclude",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "start_time",
            "type": "datetime",
            "default": "None"
          },
          {
            "name": "end_time",
            "type": "datetime",
            "default": "None"
          },
          {
            "name": "exclude_object_id",
            "type": "int",
            "default": "None"
          },
          {
            "name": "exclude_object_type",
            "type": "ObjectType",
            "default": "None"
          }
        ],
        "return_type": "None",
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "deepcopy",
          "Planner",
          "run_with_exclude",
          "update_trucks_position",
          "update_planned_trips",
          "append"
        ],
        "line_start": 97,
        "line_end": 130
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\quarry.py",
        "module": "quarry",
        "class_name": "Quarry",
        "function_name": "rebuild_plan_by_del_exclude",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "start_time",
            "type": "datetime",
            "default": "None"
          },
          {
            "name": "end_time",
            "type": "datetime",
            "default": "None"
          },
          {
            "name": "exclude_object_id",
            "type": "int",
            "default": "None"
          },
          {
            "name": "exclude_object_type",
            "type": "ObjectType",
            "default": "None"
          }
        ],
        "return_type": "None",
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "remove",
          "deepcopy",
          "run_with_exclude",
          "Planner",
          "update_trucks_position",
          "update_planned_trips"
        ],
        "line_start": 132,
        "line_end": 164
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\quarry.py",
        "module": "quarry",
        "class_name": "Quarry",
        "function_name": "get_summary",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "end_time",
            "type": "datetime"
          }
        ],
        "return_type": "dict",
        "returns": [
          "self.trip_service.get_summary(end_time)"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "get_summary"
        ],
        "line_start": 166,
        "line_end": 167
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\quarry.py",
        "module": "quarry",
        "class_name": "Quarry",
        "function_name": "push_event",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "event_type",
            "type": "EventType"
          },
          {
            "name": "*args",
            "kind": "vararg"
          },
          {
            "name": "**kwargs",
            "kind": "kwarg"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "ru",
          "key",
          "push_event",
          "strftime",
          "check_trucks_state",
          "Event",
          "rebuild_planning_data_cascade",
          "get",
          "code"
        ],
        "line_start": 169,
        "line_end": 203
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\shovel.py",
    "imports": [
      "from datetime import timedelta",
      "import simpy",
      "from app.sim_engine.core.calculations.shovel import ShovelCalc",
      "from app.sim_engine.core.constants import density_by_material",
      "from app.sim_engine.core.geometry import Point",
      "from app.sim_engine.core.props import ShovelProperties",
      "from app.sim_engine.core.simulations.behaviors.base import BreakdownBehavior, BaseTickBehavior, PlannedIdleBehavior",
      "from app.sim_engine.core.simulations.behaviors.blasting import ShovelBlastingWatcher",
      "from app.sim_engine.core.simulations.quarry import Quarry",
      "from app.sim_engine.core.simulations.utils.dependency_resolver import DependencyResolver",
      "from app.sim_engine.enums import ObjectType",
      "from app.sim_engine.events import Event, EventType",
      "from app.sim_engine.states import ExcState, TruckState"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\shovel.py",
        "module": "shovel",
        "class_name": "Shovel",
        "function_name": "__init__",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "unit_id"
          },
          {
            "name": "name"
          },
          {
            "name": "position",
            "type": "Point"
          },
          {
            "name": "quarry",
            "type": "Quarry"
          },
          {
            "name": "properties",
            "type": "ShovelProperties"
          },
          {
            "name": "tick",
            "default": "1"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "solver",
          "ShovelBlastingWatcher",
          "env",
          "PlannedIdleBehavior",
          "writer",
          "BaseTickBehavior",
          "get",
          "BreakdownBehavior",
          "sim_conf",
          "Resource"
        ],
        "line_start": 19,
        "line_end": 65
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\shovel.py",
        "module": "shovel",
        "class_name": "Shovel",
        "function_name": "current_time",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [
          "self.start_time + timedelta(seconds=self.env.now)"
        ],
        "docstring": null,
        "decorators": [
          "property"
        ],
        "is_public": true,
        "calls": [
          "timedelta"
        ],
        "line_start": 68,
        "line_end": 69
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\shovel.py",
        "module": "shovel",
        "class_name": "Shovel",
        "function_name": "current_timestamp",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [
          "self.current_time.timestamp()"
        ],
        "docstring": null,
        "decorators": [
          "property"
        ],
        "is_public": true,
        "calls": [
          "timestamp"
        ],
        "line_start": 72,
        "line_end": 73
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\shovel.py",
        "module": "shovel",
        "class_name": "Shovel",
        "function_name": "_load_truck",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "truck"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": false,
        "calls": [
          "remove",
          "int",
          "timeout",
          "request",
          "calculate_cycle",
          "range",
          "append"
        ],
        "line_start": 76,
        "line_end": 111
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\shovel.py",
        "module": "shovel",
        "class_name": "Shovel",
        "function_name": "load_truck",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "truck"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "remove",
          "timeout",
          "request",
          "calculate_load_cycles_cumulative_generator",
          "release",
          "append"
        ],
        "line_start": 113,
        "line_end": 131
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\shovel.py",
        "module": "shovel",
        "class_name": "Shovel",
        "function_name": "main_tic_process",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 133,
        "line_end": 143
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\shovel.py",
        "module": "shovel",
        "class_name": "Shovel",
        "function_name": "push_event",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "event_type",
            "type": "EventType"
          },
          {
            "name": "write_event",
            "type": "bool",
            "default": "True"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "ru",
          "push_event",
          "rebuild_plan_by_add_exclude",
          "Event",
          "rebuild_planning_data",
          "rebuild_plan_by_del_exclude",
          "code"
        ],
        "line_start": 145,
        "line_end": 185
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\shovel.py",
        "module": "shovel",
        "class_name": "Shovel",
        "function_name": "telemetry_process",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "writerow",
          "ru",
          "key",
          "round"
        ],
        "line_start": 187,
        "line_end": 199
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\truck.py",
    "imports": [
      "from datetime import timedelta",
      "from typing import List, Callable, Optional, Set",
      "import simpy",
      "from app.sim_engine.core.calculations.truck import TruckCalc",
      "from app.sim_engine.core.geometry import Point, Route, haversine_km, RouteEdge, build_route_edges_by_road_net, build_route_edges_by_road_net_from_position, build_route_edges_by_road_net_from_position_to_position, path_intersects_polygons, find_route_edges_around_restricted_zones_from_base_route",
      "from app.sim_engine.core.props import TruckProperties, PlannedTrip, TripData",
      "from app.sim_engine.core.simulations.behaviors.base import BaseTickBehavior, BreakdownBehavior, FuelBehavior, LunchBehavior, PlannedIdleBehavior",
      "from app.sim_engine.core.simulations.behaviors.blasting import TruckBlastingWatcher",
      "from app.sim_engine.core.simulations.fuel_station import FuelStation",
      "from app.sim_engine.core.simulations.quarry import Quarry",
      "from app.sim_engine.core.simulations.shovel import Shovel",
      "from app.sim_engine.core.simulations.unload import Unload",
      "from app.sim_engine.core.simulations.utils.dependency_resolver import DependencyResolver",
      "from app.sim_engine.enums import ObjectType, IdleAreaType",
      "from app.sim_engine.events import EventType, Event",
      "from app.sim_engine.states import TruckState"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\truck.py",
        "module": "truck",
        "class_name": "Truck",
        "function_name": "__init__",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "unit_id"
          },
          {
            "name": "name"
          },
          {
            "name": "initial_position",
            "type": "Point"
          },
          {
            "name": "route",
            "type": "Route | None"
          },
          {
            "name": "route_edge",
            "type": "RouteEdge | None"
          },
          {
            "name": "start_route",
            "type": "RouteEdge | None"
          },
          {
            "name": "planned_trips",
            "type": "list[PlannedTrip]"
          },
          {
            "name": "quarry",
            "type": "Quarry"
          },
          {
            "name": "shovel",
            "type": "Shovel | None"
          },
          {
            "name": "unload",
            "type": "Unload | None"
          },
          {
            "name": "properties",
            "type": "TruckProperties"
          },
          {
            "name": "fuel_stations",
            "type": "list[FuelStation]"
          },
          {
            "name": "tick",
            "default": "1"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "TruckBlastingWatcher",
          "trip_service",
          "key",
          "solver",
          "idle_area_service",
          "process",
          "env",
          "run",
          "FuelBehavior",
          "writer",
          "BaseTickBehavior",
          "LunchBehavior",
          "get",
          "BreakdownBehavior",
          "sim_conf",
          "PlannedIdleBehavior"
        ],
        "line_start": 33,
        "line_end": 122
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\truck.py",
        "module": "truck",
        "class_name": "Truck",
        "function_name": "nearest_fuel_station",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": "FuelStation",
        "returns": [
          "nearest_fs"
        ],
        "docstring": null,
        "decorators": [
          "property"
        ],
        "is_public": true,
        "calls": [
          "len",
          "haversine_km",
          "min"
        ],
        "line_start": 125,
        "line_end": 130
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\truck.py",
        "module": "truck",
        "class_name": "Truck",
        "function_name": "current_time",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [
          "self.start_time + timedelta(seconds=self.env.now)"
        ],
        "docstring": null,
        "decorators": [
          "property"
        ],
        "is_public": true,
        "calls": [
          "timedelta"
        ],
        "line_start": 133,
        "line_end": 134
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\truck.py",
        "module": "truck",
        "class_name": "Truck",
        "function_name": "current_timestamp",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [
          "self.current_time.timestamp()"
        ],
        "docstring": null,
        "decorators": [
          "property"
        ],
        "is_public": true,
        "calls": [
          "timestamp"
        ],
        "line_start": 137,
        "line_end": 138
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\truck.py",
        "module": "truck",
        "class_name": "Truck",
        "function_name": "travel_segment",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "p1",
            "type": "Point"
          },
          {
            "name": "p2",
            "type": "Point"
          },
          {
            "name": "speed_limit"
          },
          {
            "name": "acceleration"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "timeout",
          "calculate_segment_motion"
        ],
        "line_start": 140,
        "line_end": 144
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\truck.py",
        "module": "truck",
        "class_name": "Truck",
        "function_name": "broken_action",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "timeout"
        ],
        "line_start": 146,
        "line_end": 150
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\truck.py",
        "module": "truck",
        "class_name": "Truck",
        "function_name": "refuel_action",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": "Логика заправок",
        "decorators": [],
        "is_public": true,
        "calls": [
          "process",
          "moving",
          "build_route_edges_by_road_net_from_position",
          "refuelling"
        ],
        "line_start": 152,
        "line_end": 165
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\truck.py",
        "module": "truck",
        "class_name": "Truck",
        "function_name": "lunch_action",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": "Логика обеденных перерывов ",
        "decorators": [],
        "is_public": true,
        "calls": [
          "timeout",
          "move_to_area"
        ],
        "line_start": 167,
        "line_end": 182
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\truck.py",
        "module": "truck",
        "class_name": "Truck",
        "function_name": "planned_idle_action",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": "Логика плановых простоев",
        "decorators": [],
        "is_public": true,
        "calls": [
          "timeout",
          "move_to_area"
        ],
        "line_start": 184,
        "line_end": 203
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\truck.py",
        "module": "truck",
        "class_name": "Truck",
        "function_name": "wait_blasting",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "current_zones",
            "type": "Set[int]"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": "Логика ожидания изменений во взрывных работах",
        "decorators": [],
        "is_public": true,
        "calls": [
          "timeout"
        ],
        "line_start": 205,
        "line_end": 209
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\truck.py",
        "module": "truck",
        "class_name": "Truck",
        "function_name": "blasting_action",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": "Логика поведения при активных взрывных работах",
        "decorators": [],
        "is_public": true,
        "calls": [
          "wait_blasting",
          "find_route_edges_around_restricted_zones_from_base_route",
          "moving",
          "path_intersects_polygons",
          "build_route_edges_by_road_net_from_position_to_position",
          "move_to_area"
        ],
        "line_start": 211,
        "line_end": 261
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\truck.py",
        "module": "truck",
        "class_name": "Truck",
        "function_name": "move_to_area",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "area_type",
            "type": "IdleAreaType"
          },
          {
            "name": "actions",
            "type": "Optional[List[Callable]]",
            "default": "None"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": "Логика поиска ближайшей площадки выбранного типа и следование на эту площадку",
        "decorators": [],
        "is_public": true,
        "calls": [
          "wait_blasting",
          "get_areas",
          "moving",
          "path_intersects_polygons",
          "find_nearest"
        ],
        "line_start": 263,
        "line_end": 330
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\truck.py",
        "module": "truck",
        "class_name": "Truck",
        "function_name": "moving",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "route",
            "type": "RouteEdge"
          },
          {
            "name": "forward",
            "type": "bool"
          },
          {
            "name": "actions",
            "type": "Optional[List[Callable]]",
            "default": "None"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": "Метод, производящий перемещение самосвала по заданному маршруту с возможностью отклонения от маршрута при необходимости",
        "decorators": [],
        "is_public": true,
        "calls": [
          "timeout",
          "build_route_edges_by_road_net_from_position_to_position",
          "calculate_motion_by_edges",
          "action"
        ],
        "line_start": 332,
        "line_end": 395
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\truck.py",
        "module": "truck",
        "class_name": "Truck",
        "function_name": "set_route",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": "None",
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "build_route_edges_by_road_net",
          "pop"
        ],
        "line_start": 397,
        "line_end": 407
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\truck.py",
        "module": "truck",
        "class_name": "Truck",
        "function_name": "set_start_route",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": "None",
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "build_route_edges_by_road_net",
          "build_route_edges_by_road_net_from_position"
        ],
        "line_start": 409,
        "line_end": 428
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\truck.py",
        "module": "truck",
        "class_name": "Truck",
        "function_name": "run",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "remove",
          "set_shift_change_area",
          "process",
          "timeout",
          "set_start_route",
          "moving",
          "set_route",
          "load_truck",
          "current_trip_data",
          "unload_truck",
          "begin",
          "cancel",
          "len",
          "append",
          "assign_trip",
          "finish"
        ],
        "line_start": 430,
        "line_end": 503
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\truck.py",
        "module": "truck",
        "class_name": "Truck",
        "function_name": "push_event",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "event_type",
            "type": "EventType"
          },
          {
            "name": "write_event",
            "type": "bool",
            "default": "True"
          }
        ],
        "return_type": "None",
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "ru",
          "push_event",
          "rebuild_plan_by_add_exclude",
          "Event",
          "rebuild_planning_data",
          "rebuild_plan_by_del_exclude",
          "code"
        ],
        "line_start": 505,
        "line_end": 546
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\truck.py",
        "module": "truck",
        "class_name": "Truck",
        "function_name": "telemetry_process",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "writerow",
          "ru",
          "key",
          "round"
        ],
        "line_start": 548,
        "line_end": 562
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\truck.py",
        "module": "truck",
        "class_name": "Truck",
        "function_name": "current_trip_data",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": "TripData",
        "returns": [
          "TripData(truck_id=self.id, shovel_id=shovel_id, unload_id=unload_id, truck_weight=self.weight, truck_volume=self.volume)"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "TripData"
        ],
        "line_start": 564,
        "line_end": 574
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\unload.py",
    "imports": [
      "from datetime import timedelta",
      "import simpy",
      "from app.sim_engine.core.calculations.unload import UnloadCalc",
      "from app.sim_engine.core.simulations.behaviors.base import BaseTickBehavior, BreakdownBehavior",
      "from app.sim_engine.core.simulations.behaviors.blasting import UnloadBlastingWatcher",
      "from app.sim_engine.core.simulations.quarry import Quarry",
      "from app.sim_engine.core.simulations.utils.dependency_resolver import DependencyResolver",
      "from app.sim_engine.enums import ObjectType",
      "from app.sim_engine.events import Event, EventType",
      "from app.sim_engine.states import UnloadState, TruckState"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\unload.py",
        "module": "unload",
        "class_name": "Unload",
        "function_name": "__init__",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "properties"
          },
          {
            "name": "unit_id"
          },
          {
            "name": "name"
          },
          {
            "name": "quarry",
            "type": "Quarry"
          },
          {
            "name": "tick",
            "default": "1"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "solver",
          "UnloadBlastingWatcher",
          "env",
          "writer",
          "BaseTickBehavior",
          "BreakdownBehavior",
          "sim_conf",
          "Resource"
        ],
        "line_start": 16,
        "line_end": 51
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\unload.py",
        "module": "unload",
        "class_name": "Unload",
        "function_name": "current_time",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [
          "self.start_time + timedelta(seconds=self.env.now)"
        ],
        "docstring": null,
        "decorators": [
          "property"
        ],
        "is_public": true,
        "calls": [
          "timedelta"
        ],
        "line_start": 54,
        "line_end": 55
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\unload.py",
        "module": "unload",
        "class_name": "Unload",
        "function_name": "current_timestamp",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [
          "self.current_time.timestamp()"
        ],
        "docstring": null,
        "decorators": [
          "property"
        ],
        "is_public": true,
        "calls": [
          "timestamp"
        ],
        "line_start": 58,
        "line_end": 59
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\unload.py",
        "module": "unload",
        "class_name": "Unload",
        "function_name": "unload_truck",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "truck"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "remove",
          "unload_calculation",
          "int",
          "timeout",
          "request",
          "range",
          "append"
        ],
        "line_start": 61,
        "line_end": 75
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\unload.py",
        "module": "unload",
        "class_name": "Unload",
        "function_name": "push_event",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "event_type",
            "type": "EventType"
          },
          {
            "name": "write_event",
            "type": "bool",
            "default": "True"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "ru",
          "push_event",
          "rebuild_plan_by_add_exclude",
          "Event",
          "rebuild_planning_data",
          "rebuild_plan_by_del_exclude",
          "code"
        ],
        "line_start": 77,
        "line_end": 115
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\unload.py",
        "module": "unload",
        "class_name": "Unload",
        "function_name": "main_tic_process",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 117,
        "line_end": 123
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\unload.py",
        "module": "unload",
        "class_name": "Unload",
        "function_name": "telemetry_process",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "writerow",
          "ru",
          "key"
        ],
        "line_start": 125,
        "line_end": 134
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\__init__.py",
    "imports": [],
    "functions": []
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\base.py",
    "imports": [
      "from abc import ABC",
      "from typing import List, Any",
      "from app.sim_engine.core.calculations.base import BreakdownCalc, FuelCalc, LunchCalc",
      "from app.sim_engine.core.simulations.utils.dependency_resolver import DependencyResolver",
      "from app.sim_engine.enums import ObjectType",
      "from app.sim_engine.events import EventType",
      "from app.sim_engine.states import TruckState, ExcState"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\base.py",
        "module": "base",
        "class_name": "BaseBehavior",
        "function_name": "__init__",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "target",
            "type": "Any"
          },
          {
            "name": "props",
            "type": "Any",
            "default": "None"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "process",
          "env",
          "run"
        ],
        "line_start": 17,
        "line_end": 22
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\base.py",
        "module": "base",
        "class_name": "BaseBehavior",
        "function_name": "run",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": "Основной цикл выполнения поведения",
        "decorators": [],
        "is_public": true,
        "calls": [
          "timeout"
        ],
        "line_start": 24,
        "line_end": 26
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\base.py",
        "module": "base",
        "class_name": "BaseTickBehavior",
        "function_name": "__init__",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "target"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "process",
          "env",
          "run"
        ],
        "line_start": 37,
        "line_end": 41
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\base.py",
        "module": "base",
        "class_name": "BaseTickBehavior",
        "function_name": "run",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "main_tic_process",
          "timeout",
          "hasattr",
          "telemetry_process"
        ],
        "line_start": 43,
        "line_end": 49
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\base.py",
        "module": "base",
        "class_name": "BreakdownBehavior",
        "function_name": "__init__",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "target"
          },
          {
            "name": "props"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "super",
          "__init__",
          "BreakdownCalc"
        ],
        "line_start": 57,
        "line_end": 59
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\base.py",
        "module": "base",
        "class_name": "BreakdownBehavior",
        "function_name": "run",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "push_event",
          "int",
          "timeout",
          "calculate_repair_time",
          "calculate_failure_time"
        ],
        "line_start": 61,
        "line_end": 88
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\base.py",
        "module": "base",
        "class_name": "FuelBehavior",
        "function_name": "__init__",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "target"
          },
          {
            "name": "props"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "super",
          "__init__",
          "FuelCalc"
        ],
        "line_start": 96,
        "line_end": 98
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\base.py",
        "module": "base",
        "class_name": "FuelBehavior",
        "function_name": "run",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "calculate_fuel_level_while_idle",
          "timeout",
          "calculate_fuel_level_while_moving"
        ],
        "line_start": 100,
        "line_end": 119
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\base.py",
        "module": "base",
        "class_name": "LunchBehavior",
        "function_name": "__init__",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "target"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "super",
          "__init__",
          "LunchCalc"
        ],
        "line_start": 125,
        "line_end": 127
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\base.py",
        "module": "base",
        "class_name": "LunchBehavior",
        "function_name": "run",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "timeout",
          "push_event",
          "pop",
          "calculate_lunch_times"
        ],
        "line_start": 129,
        "line_end": 157
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\base.py",
        "module": "base",
        "class_name": "PlannedIdleBehavior",
        "function_name": "__init__",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "target"
          },
          {
            "name": "object_type",
            "type": "ObjectType"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "super",
          "__init__"
        ],
        "line_start": 163,
        "line_end": 165
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\base.py",
        "module": "base",
        "class_name": "PlannedIdleBehavior",
        "function_name": "_calculate_idles_times",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "target"
          }
        ],
        "return_type": "list[tuple[int, int]]",
        "returns": [
          "idles_times"
        ],
        "docstring": "Собирает из данных о плановых простоях список периодов простоев",
        "decorators": [],
        "is_public": false,
        "calls": [
          "append",
          "key",
          "total_seconds",
          "get"
        ],
        "line_start": 167,
        "line_end": 180
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\base.py",
        "module": "base",
        "class_name": "PlannedIdleBehavior",
        "function_name": "_should_start_planned_idle",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": "bool",
        "returns": [
          "False"
        ],
        "docstring": "Проверка возможности начать плановый простой",
        "decorators": [],
        "is_public": false,
        "calls": [],
        "line_start": 182,
        "line_end": 190
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\base.py",
        "module": "base",
        "class_name": "PlannedIdleBehavior",
        "function_name": "run",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "_should_start_planned_idle",
          "push_event",
          "_calculate_idles_times",
          "timeout",
          "pop"
        ],
        "line_start": 192,
        "line_end": 217
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\blasting.py",
    "imports": [
      "from copy import deepcopy",
      "from datetime import timedelta",
      "from typing import List",
      "from app.sim_engine.core.geometry import path_intersects_polygons, find_all_route_edges_by_road_net_from_object_to_object",
      "from app.sim_engine.core.props import Blasting",
      "from app.sim_engine.core.simulations.behaviors.base import BaseBehavior",
      "from app.sim_engine.enums import ObjectType",
      "from app.sim_engine.events import EventType",
      "from app.sim_engine.states import TruckState"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\blasting.py",
        "module": "blasting",
        "class_name": "QuarryBlastingWatcher",
        "function_name": "__init__",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "target"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "super",
          "__init__"
        ],
        "line_start": 19,
        "line_end": 22
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\blasting.py",
        "module": "blasting",
        "class_name": "QuarryBlastingWatcher",
        "function_name": "generate_blasting_list",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": "list[Blasting]",
        "returns": [
          "blasting_list"
        ],
        "docstring": "Создаёт список взрывных работ временами относительно времени симуляции",
        "decorators": [],
        "is_public": true,
        "calls": [
          "deepcopy",
          "total_seconds"
        ],
        "line_start": 24,
        "line_end": 30
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\blasting.py",
        "module": "blasting",
        "class_name": "QuarryBlastingWatcher",
        "function_name": "check_trucks_state",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [
          "(trucks_to_exclude, trucks_to_include)"
        ],
        "docstring": "Проверяет состояние самосвалов карьера.\nЕсли попал в состояние ожидания проведения взрывных работ, перепланируем рейсы, исключив этот самосвал.\nЕсли вышел из состояния ожидания проведения взрывных работ, перепланируем рейсы, включив этот самосвал.",
        "decorators": [],
        "is_public": true,
        "calls": [
          "remove",
          "append",
          "values"
        ],
        "line_start": 32,
        "line_end": 50
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\blasting.py",
        "module": "blasting",
        "class_name": "QuarryBlastingWatcher",
        "function_name": "run",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "push_event",
          "set",
          "timeout",
          "dict",
          "keys",
          "pop",
          "generate_blasting_list",
          "timedelta"
        ],
        "line_start": 52,
        "line_end": 94
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\blasting.py",
        "module": "blasting",
        "class_name": "TruckBlastingWatcher",
        "function_name": "__init__",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "target"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "super",
          "__init__"
        ],
        "line_start": 105,
        "line_end": 106
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\blasting.py",
        "module": "blasting",
        "class_name": "TruckBlastingWatcher",
        "function_name": "run",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "timeout",
          "push_event"
        ],
        "line_start": 108,
        "line_end": 118
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\blasting.py",
        "module": "blasting",
        "class_name": "ShovelBlastingWatcher",
        "function_name": "__init__",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "target"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "super",
          "__init__"
        ],
        "line_start": 129,
        "line_end": 130
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\blasting.py",
        "module": "blasting",
        "class_name": "ShovelBlastingWatcher",
        "function_name": "wait_blasting_changing",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "timeout"
        ],
        "line_start": 132,
        "line_end": 139
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\blasting.py",
        "module": "blasting",
        "class_name": "ShovelBlastingWatcher",
        "function_name": "run",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "values",
          "push_event",
          "timeout",
          "path_intersects_polygons",
          "wait_blasting_changing",
          "find_all_route_edges_by_road_net_from_object_to_object"
        ],
        "line_start": 141,
        "line_end": 175
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\blasting.py",
        "module": "blasting",
        "class_name": "UnloadBlastingWatcher",
        "function_name": "__init__",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "target"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "super",
          "__init__"
        ],
        "line_start": 186,
        "line_end": 187
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\blasting.py",
        "module": "blasting",
        "class_name": "UnloadBlastingWatcher",
        "function_name": "wait_blasting_changing",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "timeout"
        ],
        "line_start": 189,
        "line_end": 196
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\blasting.py",
        "module": "blasting",
        "class_name": "UnloadBlastingWatcher",
        "function_name": "run",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "values",
          "push_event",
          "timeout",
          "path_intersects_polygons",
          "wait_blasting_changing",
          "find_all_route_edges_by_road_net_from_object_to_object"
        ],
        "line_start": 198,
        "line_end": 232
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\__init__.py",
    "imports": [],
    "functions": []
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\dependency_resolver.py",
    "imports": [
      "from typing import TYPE_CHECKING, Any",
      "from app.sim_engine.core.simulations.utils.service_locator import ServiceLocator",
      "from app.sim_engine.writer import IWriter",
      "from app.sim_engine.core.environment import QSimEnvironment",
      "from app.sim_engine.core.planner.solvers.greedy import GreedySolver",
      "from app.sim_engine.core.simulations.utils.trip_service import TripService",
      "from app.sim_engine.core.simulations.utils.idle_area_service import IdleAreaService"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\dependency_resolver.py",
        "module": "dependency_resolver",
        "class_name": "DependencyResolver",
        "function_name": "sim_conf",
        "arguments": [
          {
            "name": "cls"
          }
        ],
        "return_type": "dict",
        "returns": [
          "cls.__resolve('sim_conf')"
        ],
        "docstring": null,
        "decorators": [
          "classmethod"
        ],
        "is_public": true,
        "calls": [
          "__resolve"
        ],
        "line_start": 15,
        "line_end": 16
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\dependency_resolver.py",
        "module": "dependency_resolver",
        "class_name": "DependencyResolver",
        "function_name": "writer",
        "arguments": [
          {
            "name": "cls"
          }
        ],
        "return_type": "'IWriter'",
        "returns": [
          "cls.__resolve('writer')"
        ],
        "docstring": null,
        "decorators": [
          "classmethod"
        ],
        "is_public": true,
        "calls": [
          "__resolve"
        ],
        "line_start": 19,
        "line_end": 20
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\dependency_resolver.py",
        "module": "dependency_resolver",
        "class_name": "DependencyResolver",
        "function_name": "solver",
        "arguments": [
          {
            "name": "cls"
          }
        ],
        "return_type": "'GreedySolver'",
        "returns": [
          "cls.__resolve('solver')"
        ],
        "docstring": null,
        "decorators": [
          "classmethod"
        ],
        "is_public": true,
        "calls": [
          "__resolve"
        ],
        "line_start": 23,
        "line_end": 24
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\dependency_resolver.py",
        "module": "dependency_resolver",
        "class_name": "DependencyResolver",
        "function_name": "trip_service",
        "arguments": [
          {
            "name": "cls"
          }
        ],
        "return_type": "'TripService'",
        "returns": [
          "cls.__resolve('trip_service')"
        ],
        "docstring": null,
        "decorators": [
          "classmethod"
        ],
        "is_public": true,
        "calls": [
          "__resolve"
        ],
        "line_start": 27,
        "line_end": 28
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\dependency_resolver.py",
        "module": "dependency_resolver",
        "class_name": "DependencyResolver",
        "function_name": "idle_area_service",
        "arguments": [
          {
            "name": "cls"
          }
        ],
        "return_type": "'IdleAreaService'",
        "returns": [
          "cls.__resolve('idle_area_service')"
        ],
        "docstring": null,
        "decorators": [
          "classmethod"
        ],
        "is_public": true,
        "calls": [
          "__resolve"
        ],
        "line_start": 31,
        "line_end": 32
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\dependency_resolver.py",
        "module": "dependency_resolver",
        "class_name": "DependencyResolver",
        "function_name": "env",
        "arguments": [
          {
            "name": "cls"
          }
        ],
        "return_type": "'QSimEnvironment'",
        "returns": [
          "cls.__resolve('sim_env')"
        ],
        "docstring": null,
        "decorators": [
          "classmethod"
        ],
        "is_public": true,
        "calls": [
          "__resolve"
        ],
        "line_start": 35,
        "line_end": 36
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\dependency_resolver.py",
        "module": "dependency_resolver",
        "class_name": "DependencyResolver",
        "function_name": "__resolve",
        "arguments": [
          {
            "name": "alias",
            "type": "str"
          }
        ],
        "return_type": "Any",
        "returns": [
          "ServiceLocator.get_or_fail(alias)"
        ],
        "docstring": null,
        "decorators": [
          "staticmethod"
        ],
        "is_public": false,
        "calls": [
          "get_or_fail"
        ],
        "line_start": 39,
        "line_end": 40
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\helpers.py",
    "imports": [
      "from datetime import datetime, timedelta",
      "from app.sim_engine.core.simulations.utils.dependency_resolver import DependencyResolver"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\helpers.py",
        "module": "helpers",
        "class_name": null,
        "function_name": "sim_current_timestamp",
        "arguments": [],
        "return_type": "float",
        "returns": [
          "sim_current_time().timestamp()"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "timestamp",
          "sim_current_time"
        ],
        "line_start": 6,
        "line_end": 7
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\helpers.py",
        "module": "helpers",
        "class_name": null,
        "function_name": "sim_current_time",
        "arguments": [],
        "return_type": "datetime",
        "returns": [
          "env.sim_data.start_time + timedelta(seconds=env.now)"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "env",
          "timedelta"
        ],
        "line_start": 10,
        "line_end": 12
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\helpers.py",
        "module": "helpers",
        "class_name": null,
        "function_name": "sim_end_time",
        "arguments": [],
        "return_type": "datetime",
        "returns": [
          "env.sim_data.end_time"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "env"
        ],
        "line_start": 15,
        "line_end": 17
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\helpers.py",
        "module": "helpers",
        "class_name": null,
        "function_name": "sim_start_time",
        "arguments": [],
        "return_type": "datetime",
        "returns": [
          "env.sim_data.start_time"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "env"
        ],
        "line_start": 20,
        "line_end": 22
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\idle_area_service.py",
    "imports": [
      "from typing import Tuple",
      "from app.sim_engine.core.geometry import RouteEdge, find_route_edges_around_restricted_zones_from_position_to_object",
      "from app.sim_engine.core.props import IdleAreaStorage, IdleArea",
      "from app.sim_engine.enums import ObjectType, IdleAreaType"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\idle_area_service.py",
        "module": "idle_area_service",
        "class_name": "IdleAreaService",
        "function_name": "__init__",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "idle_area_storage",
            "type": "IdleAreaStorage"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 11,
        "line_end": 12
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\idle_area_service.py",
        "module": "idle_area_service",
        "class_name": "IdleAreaService",
        "function_name": "get_areas",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "area_type",
            "type": "IdleAreaType | None",
            "default": "None"
          }
        ],
        "return_type": "list[IdleArea]",
        "returns": [
          "[]"
        ],
        "docstring": "Сбор площадок соответствующего типа",
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 14,
        "line_end": 29
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\idle_area_service.py",
        "module": "idle_area_service",
        "class_name": "IdleAreaService",
        "function_name": "find_nearest",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "area_type",
            "type": "IdleAreaType"
          },
          {
            "name": "lon",
            "type": "float"
          },
          {
            "name": "lat",
            "type": "float"
          },
          {
            "name": "edge_idx",
            "type": "int | None"
          },
          {
            "name": "restricted_zones",
            "type": "Tuple[Tuple[Tuple[float, float]]] | list[list[list[float]]] | None"
          },
          {
            "name": "road_net",
            "type": "dict"
          }
        ],
        "return_type": "Tuple[IdleArea, RouteEdge] | Tuple[None, None]",
        "returns": [
          "(best_area, best_route)"
        ],
        "docstring": "Поиск ближайшей площадки, соответствующей указанному типу.\nПоиск происходит по графу относительно переданной позиции.\nПри наличии запрещённых зон для проезда поиск будет вестись с учётом этих зон.\n\nПри отсутствии проезда к площадке из-за запретных зон будет выбрана другая ближайшая площадка при наличии\nк ней проезда.\n\nВозвращает кортеж: площадка, маршрут на графе к площадке",
        "decorators": [],
        "is_public": true,
        "calls": [
          "find_route_edges_around_restricted_zones_from_position_to_object",
          "sum",
          "get_areas"
        ],
        "line_start": 31,
        "line_end": 77
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\mixins.py",
    "imports": [
      "import enum",
      "from dataclasses import fields",
      "from typing import Any"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\mixins.py",
        "module": "mixins",
        "class_name": "DataclassEnumSerializerMixin",
        "function_name": "serialize",
        "arguments": [
          {
            "name": "field_value",
            "type": "Any"
          }
        ],
        "return_type": null,
        "returns": [
          "field_value"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "str",
          "isinstance"
        ],
        "line_start": 8,
        "line_end": 11
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\mixins.py",
        "module": "mixins",
        "class_name": "DataclassEnumSerializerMixin",
        "function_name": "to_dict",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": "dict",
        "returns": [
          "result"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "str",
          "isinstance"
        ],
        "line_start": 7,
        "line_end": 18
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\service_locator.py",
    "imports": [
      "from typing import Any"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\service_locator.py",
        "module": "service_locator",
        "class_name": "ServiceLocator",
        "function_name": "bind",
        "arguments": [
          {
            "name": "cls"
          },
          {
            "name": "alias",
            "type": "str"
          },
          {
            "name": "instance",
            "type": "Any"
          }
        ],
        "return_type": "None",
        "returns": [],
        "docstring": null,
        "decorators": [
          "classmethod"
        ],
        "is_public": true,
        "calls": [
          "has",
          "RuntimeError"
        ],
        "line_start": 8,
        "line_end": 11
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\service_locator.py",
        "module": "service_locator",
        "class_name": "ServiceLocator",
        "function_name": "get_or_fail",
        "arguments": [
          {
            "name": "cls"
          },
          {
            "name": "alias",
            "type": "str"
          },
          {
            "name": "fail_message",
            "type": "str | None",
            "default": "None"
          }
        ],
        "return_type": "Any",
        "returns": [
          "service"
        ],
        "docstring": null,
        "decorators": [
          "classmethod"
        ],
        "is_public": true,
        "calls": [
          "RuntimeError",
          "get"
        ],
        "line_start": 14,
        "line_end": 21
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\service_locator.py",
        "module": "service_locator",
        "class_name": "ServiceLocator",
        "function_name": "get",
        "arguments": [
          {
            "name": "cls"
          },
          {
            "name": "alias",
            "type": "str"
          }
        ],
        "return_type": "Any",
        "returns": [
          "None"
        ],
        "docstring": null,
        "decorators": [
          "classmethod"
        ],
        "is_public": true,
        "calls": [
          "has"
        ],
        "line_start": 24,
        "line_end": 27
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\service_locator.py",
        "module": "service_locator",
        "class_name": "ServiceLocator",
        "function_name": "has",
        "arguments": [
          {
            "name": "cls"
          },
          {
            "name": "alias",
            "type": "str"
          }
        ],
        "return_type": "bool",
        "returns": [
          "alias in cls.__services"
        ],
        "docstring": null,
        "decorators": [
          "classmethod"
        ],
        "is_public": true,
        "calls": [],
        "line_start": 30,
        "line_end": 31
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\service_locator.py",
        "module": "service_locator",
        "class_name": "ServiceLocator",
        "function_name": "unbind",
        "arguments": [
          {
            "name": "cls"
          },
          {
            "name": "alias",
            "type": "str"
          }
        ],
        "return_type": "None",
        "returns": [],
        "docstring": null,
        "decorators": [
          "classmethod"
        ],
        "is_public": true,
        "calls": [],
        "line_start": 34,
        "line_end": 35
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\service_locator.py",
        "module": "service_locator",
        "class_name": "ServiceLocator",
        "function_name": "unbind_all",
        "arguments": [
          {
            "name": "cls"
          }
        ],
        "return_type": "None",
        "returns": [],
        "docstring": null,
        "decorators": [
          "classmethod"
        ],
        "is_public": true,
        "calls": [],
        "line_start": 38,
        "line_end": 39
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\trip_service.py",
    "imports": [
      "import math",
      "import datetime",
      "import logging",
      "from collections import defaultdict",
      "from app.sim_engine.core.props import ActualTrip, ShiftChangeArea, QuarryObject, TripData, IdleArea",
      "from app.sim_engine.core.simulations.utils.helpers import sim_current_time, sim_start_time",
      "from app.sim_engine.enums import ObjectType"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\trip_service.py",
        "module": "trip_service",
        "class_name": "TripService",
        "function_name": "__init__",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": "None",
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "defaultdict",
          "set"
        ],
        "line_start": 14,
        "line_end": 30
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\trip_service.py",
        "module": "trip_service",
        "class_name": "TripService",
        "function_name": "set_shift_change_area",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "shift_change_area",
            "type": "IdleArea"
          }
        ],
        "return_type": "None",
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 32,
        "line_end": 33
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\trip_service.py",
        "module": "trip_service",
        "class_name": "TripService",
        "function_name": "begin",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "trip_data",
            "type": "TripData"
          }
        ],
        "return_type": "None",
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "debug",
          "sim_current_time",
          "QuarryObject",
          "RuntimeError",
          "ActualTrip"
        ],
        "line_start": 35,
        "line_end": 63
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\trip_service.py",
        "module": "trip_service",
        "class_name": "TripService",
        "function_name": "finish",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "trip_data",
            "type": "TripData"
          }
        ],
        "return_type": "None",
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "append",
          "to_telemetry",
          "__finish_actual_trip",
          "__update_summary_metrics"
        ],
        "line_start": 65,
        "line_end": 70
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\trip_service.py",
        "module": "trip_service",
        "class_name": "TripService",
        "function_name": "get_summary",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "end_time",
            "type": "datetime.datetime"
          }
        ],
        "return_type": "dict",
        "returns": [
          "summary"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "list",
          "floor",
          "sim_start_time",
          "range",
          "len",
          "append",
          "get"
        ],
        "line_start": 72,
        "line_end": 115
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\trip_service.py",
        "module": "trip_service",
        "class_name": "TripService",
        "function_name": "print_summary",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "debug",
          "sorted"
        ],
        "line_start": 117,
        "line_end": 121
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\trip_service.py",
        "module": "trip_service",
        "class_name": "TripService",
        "function_name": "__finish_actual_trip",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "trip_data",
            "type": "TripData"
          }
        ],
        "return_type": "ActualTrip",
        "returns": [
          "actual_trip"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": false,
        "calls": [
          "RuntimeError",
          "append",
          "QuarryObject",
          "sim_current_time"
        ],
        "line_start": 123,
        "line_end": 144
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\trip_service.py",
        "module": "trip_service",
        "class_name": "TripService",
        "function_name": "__update_summary_metrics",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "finished_trip",
            "type": "ActualTrip"
          }
        ],
        "return_type": "None",
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": false,
        "calls": [
          "add",
          "int"
        ],
        "line_start": 146,
        "line_end": 171
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\__init__.py",
    "imports": [],
    "functions": []
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\infra\\exception_traceback.py",
    "imports": [
      "import functools",
      "import logging",
      "import traceback"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\infra\\exception_traceback.py",
        "module": "exception_traceback",
        "class_name": null,
        "function_name": "wrapper",
        "arguments": [
          {
            "name": "*args",
            "kind": "vararg"
          },
          {
            "name": "**kwargs",
            "kind": "kwarg"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [
          "functools.wraps(func)"
        ],
        "is_public": true,
        "calls": [
          "wraps",
          "getLogger",
          "error",
          "RunSimulationError",
          "func",
          "format_exc"
        ],
        "line_start": 12,
        "line_end": 22
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\infra\\exception_traceback.py",
        "module": "exception_traceback",
        "class_name": null,
        "function_name": "catch_errors",
        "arguments": [
          {
            "name": "func"
          }
        ],
        "return_type": null,
        "returns": [
          "wrapper"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "wraps",
          "getLogger",
          "error",
          "RunSimulationError",
          "func",
          "format_exc"
        ],
        "line_start": 10,
        "line_end": 24
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\infra\\logger\\config.py",
    "imports": [
      "import logging",
      "import os",
      "from app.sim_engine.infra.logger.json_formatter import JsonFormatter"
    ],
    "functions": []
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\infra\\logger\\json_formatter.py",
    "imports": [
      "import datetime",
      "import json",
      "import logging"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\infra\\logger\\json_formatter.py",
        "module": "json_formatter",
        "class_name": "JsonFormatter",
        "function_name": "format",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "record",
            "type": "logging.LogRecord"
          }
        ],
        "return_type": "str",
        "returns": [
          "json.dumps(log_object, ensure_ascii=False)"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "getMessage",
          "isinstance",
          "update",
          "dumps",
          "isoformat",
          "fromtimestamp"
        ],
        "line_start": 7,
        "line_end": 22
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\infra\\logger\\logger.py",
    "imports": [
      "import logging",
      "import logging.config",
      "from app.sim_engine.infra.logger.config import LOGGING_CONFIG"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\infra\\logger\\logger.py",
        "module": "logger",
        "class_name": "Logger",
        "function_name": "init",
        "arguments": [],
        "return_type": "None",
        "returns": [],
        "docstring": null,
        "decorators": [
          "staticmethod"
        ],
        "is_public": true,
        "calls": [
          "dictConfig"
        ],
        "line_start": 9,
        "line_end": 10
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\tests\\run_simulate.py",
    "imports": [
      "import json",
      "import logging",
      "import os",
      "from app.sim_engine.enums import ObjectType",
      "from app.sim_engine.simulation_manager import SimulationManager"
    ],
    "functions": []
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\tests\\test_simulate.py",
    "imports": [
      "import json",
      "import math",
      "import os",
      "import pytest",
      "from app.sim_engine.enums import ObjectType",
      "from app.sim_engine.simulation_manager import SimulationManager",
      "from app.sim_engine.writer import DictSimpleWriter"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\tests\\test_simulate.py",
        "module": "test_simulate",
        "class_name": null,
        "function_name": "input_data",
        "arguments": [],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [
          "pytest.fixture"
        ],
        "is_public": true,
        "calls": [
          "open",
          "dirname",
          "load",
          "join"
        ],
        "line_start": 18,
        "line_end": 23
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\tests\\test_simulate.py",
        "module": "test_simulate",
        "class_name": null,
        "function_name": "validate_result",
        "arguments": [
          {
            "name": "result",
            "type": "dict"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "floor",
          "isinstance"
        ],
        "line_start": 26,
        "line_end": 78
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\tests\\test_simulate.py",
        "module": "test_simulate",
        "class_name": null,
        "function_name": "test_simulation_result",
        "arguments": [
          {
            "name": "input_data"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "isinstance",
          "key",
          "SimulationManager",
          "run",
          "len",
          "validate_result",
          "keys"
        ],
        "line_start": 81,
        "line_end": 103
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\tests\\test_simulate.py",
        "module": "test_simulate",
        "class_name": null,
        "function_name": "test_shovel_telemetry",
        "arguments": [
          {
            "name": "input_data"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "isinstance",
          "key",
          "SimulationManager",
          "run",
          "len",
          "validate_result",
          "keys"
        ],
        "line_start": 106,
        "line_end": 128
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\tests\\test_simulate.py",
        "module": "test_simulate",
        "class_name": null,
        "function_name": "test_truck_telemetry",
        "arguments": [
          {
            "name": "input_data"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "isinstance",
          "key",
          "SimulationManager",
          "run",
          "len",
          "validate_result",
          "keys"
        ],
        "line_start": 131,
        "line_end": 149
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\tests\\test_simulate.py",
        "module": "test_simulate",
        "class_name": null,
        "function_name": "test_unload_telemetry",
        "arguments": [
          {
            "name": "input_data"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "isinstance",
          "key",
          "SimulationManager",
          "run",
          "len",
          "validate_result",
          "keys"
        ],
        "line_start": 152,
        "line_end": 171
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\tests\\test_simulate.py",
        "module": "test_simulate",
        "class_name": null,
        "function_name": "test_fuel_station_telemetry",
        "arguments": [
          {
            "name": "input_data"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "isinstance",
          "key",
          "SimulationManager",
          "run",
          "len",
          "validate_result",
          "keys"
        ],
        "line_start": 174,
        "line_end": 193
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\tests\\test_simulate.py",
        "module": "test_simulate",
        "class_name": null,
        "function_name": "test_summary_result",
        "arguments": [
          {
            "name": "input_data"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "run",
          "validate_result",
          "SimulationManager"
        ],
        "line_start": 196,
        "line_end": 220
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\tests\\test_simulate.py",
        "module": "test_simulate",
        "class_name": null,
        "function_name": "test_events",
        "arguments": [
          {
            "name": "input_data"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "isinstance",
          "SimulationManager",
          "run",
          "len",
          "validate_result",
          "keys"
        ],
        "line_start": 223,
        "line_end": 246
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\tests\\test_simulate.py",
        "module": "test_simulate",
        "class_name": null,
        "function_name": "test_summary_result_with_breakdown",
        "arguments": [
          {
            "name": "input_data"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "run",
          "validate_result",
          "SimulationManager"
        ],
        "line_start": 249,
        "line_end": 275
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\tests\\test_simulate.py",
        "module": "test_simulate",
        "class_name": null,
        "function_name": "test_breakdown_events_count",
        "arguments": [
          {
            "name": "input_data"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "len",
          "run",
          "validate_result",
          "SimulationManager"
        ],
        "line_start": 278,
        "line_end": 283
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\tests\\test_simulate.py",
        "module": "test_simulate",
        "class_name": null,
        "function_name": "test_summary_result_with_refuel",
        "arguments": [
          {
            "name": "input_data"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "run",
          "validate_result",
          "SimulationManager"
        ],
        "line_start": 286,
        "line_end": 312
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\tests\\test_simulate.py",
        "module": "test_simulate",
        "class_name": null,
        "function_name": "test_refuel_events_count",
        "arguments": [
          {
            "name": "input_data"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "len",
          "run",
          "validate_result",
          "SimulationManager"
        ],
        "line_start": 315,
        "line_end": 320
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\tests\\test_simulate.py",
        "module": "test_simulate",
        "class_name": null,
        "function_name": "test_summary_result_with_lunch",
        "arguments": [
          {
            "name": "input_data"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "run",
          "validate_result",
          "SimulationManager"
        ],
        "line_start": 323,
        "line_end": 349
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\tests\\test_simulate.py",
        "module": "test_simulate",
        "class_name": null,
        "function_name": "test_lunch_events_count",
        "arguments": [
          {
            "name": "input_data"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "len",
          "run",
          "validate_result",
          "SimulationManager"
        ],
        "line_start": 352,
        "line_end": 357
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\tests\\test_simulate.py",
        "module": "test_simulate",
        "class_name": null,
        "function_name": "test_summary_result_with_planned_idle",
        "arguments": [
          {
            "name": "input_data"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "run",
          "validate_result",
          "SimulationManager"
        ],
        "line_start": 360,
        "line_end": 386
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\tests\\test_simulate.py",
        "module": "test_simulate",
        "class_name": null,
        "function_name": "test_planned_idle_events_count",
        "arguments": [
          {
            "name": "input_data"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "len",
          "run",
          "validate_result",
          "SimulationManager"
        ],
        "line_start": 389,
        "line_end": 394
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\tests\\test_simulate.py",
        "module": "test_simulate",
        "class_name": null,
        "function_name": "test_blasting_events_count",
        "arguments": [
          {
            "name": "input_data"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "len",
          "run",
          "validate_result",
          "SimulationManager"
        ],
        "line_start": 397,
        "line_end": 402
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\tests\\test_simulate.py",
        "module": "test_simulate",
        "class_name": null,
        "function_name": "test_auto_mode_summary_result",
        "arguments": [
          {
            "name": "input_data"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "run",
          "validate_result",
          "SimulationManager"
        ],
        "line_start": 405,
        "line_end": 431
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\sim_engine\\tests\\__init__.py",
    "imports": [],
    "functions": []
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\tests\\conftest.py",
    "imports": [
      "import pytest",
      "from unittest.mock import Mock, patch, MagicMock",
      "from fastapi.testclient import TestClient",
      "from sqlalchemy import create_engine",
      "from sqlalchemy.orm import sessionmaker",
      "from pathlib import Path",
      "from app import create_app, get_db, get_redis",
      "from app.models import Quarry"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\tests\\conftest.py",
        "module": "conftest",
        "class_name": null,
        "function_name": "redis_mock",
        "arguments": [],
        "return_type": null,
        "returns": [],
        "docstring": "Создает мок-сессию базы данных",
        "decorators": [],
        "is_public": true,
        "calls": [
          "Mock",
          "patch"
        ],
        "line_start": 12,
        "line_end": 17
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\tests\\conftest.py",
        "module": "conftest",
        "class_name": null,
        "function_name": "override_get_db",
        "arguments": [],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 64,
        "line_end": 65
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\tests\\conftest.py",
        "module": "conftest",
        "class_name": null,
        "function_name": "app",
        "arguments": [],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [
          "pytest.fixture(scope='function')"
        ],
        "is_public": true,
        "calls": [],
        "line_start": 21,
        "line_end": 85
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\tests\\conftest.py",
        "module": "conftest",
        "class_name": null,
        "function_name": "client",
        "arguments": [
          {
            "name": "app"
          }
        ],
        "return_type": null,
        "returns": [
          "TestClient(app)"
        ],
        "docstring": "Создает тестовый клиент FastAPI",
        "decorators": [
          "pytest.fixture(scope='function')"
        ],
        "is_public": true,
        "calls": [
          "fixture",
          "TestClient"
        ],
        "line_start": 89,
        "line_end": 91
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\tests\\conftest.py",
        "module": "conftest",
        "class_name": null,
        "function_name": "db_session",
        "arguments": [],
        "return_type": null,
        "returns": [],
        "docstring": "Создает мок-сессию базы данных",
        "decorators": [
          "pytest.fixture(scope='function')"
        ],
        "is_public": true,
        "calls": [
          "Mock",
          "fixture",
          "patch"
        ],
        "line_start": 94,
        "line_end": 99
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\tests\\conftest.py",
        "module": "conftest",
        "class_name": null,
        "function_name": "init_database",
        "arguments": [
          {
            "name": "db_session"
          }
        ],
        "return_type": null,
        "returns": [
          "{'quarry': quarry}"
        ],
        "docstring": "Создает тестовые данные в базе (mocked)",
        "decorators": [
          "pytest.fixture(scope='function')"
        ],
        "is_public": true,
        "calls": [
          "fixture",
          "Mock"
        ],
        "line_start": 103,
        "line_end": 124
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\tests\\test_api.py",
    "imports": [
      "import pytest",
      "from unittest.mock import patch, MagicMock",
      "from app.models import Quarry, Truck, Shovel, FuelStation, Unload"
    ],
    "functions": [
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\tests\\test_api.py",
        "module": "test_api",
        "class_name": null,
        "function_name": "test_handbook_returns_200",
        "arguments": [
          {
            "name": "client"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "get"
        ],
        "line_start": 8,
        "line_end": 10
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\tests\\test_api.py",
        "module": "test_api",
        "class_name": null,
        "function_name": "test_defaults_returns_200_and_dict",
        "arguments": [
          {
            "name": "client"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "isinstance",
          "get",
          "json"
        ],
        "line_start": 13,
        "line_end": 16
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\tests\\test_api.py",
        "module": "test_api",
        "class_name": null,
        "function_name": "test_scenarios_returns_200_and_list",
        "arguments": [
          {
            "name": "client"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "isinstance",
          "get",
          "json"
        ],
        "line_start": 19,
        "line_end": 22
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\tests\\test_api.py",
        "module": "test_api",
        "class_name": "TestQuarryDataAPI",
        "function_name": "test_quarry_data_returns_200_and_valid_json",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "client"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "isinstance",
          "get",
          "json"
        ],
        "line_start": 28,
        "line_end": 34
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\tests\\test_api.py",
        "module": "test_api",
        "class_name": "TestObjectAPI",
        "function_name": "test_invalid_method_returns_405_on_get",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "client"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "get"
        ],
        "line_start": 41,
        "line_end": 43
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\tests\\test_api.py",
        "module": "test_api",
        "class_name": "TestObjectAPI",
        "function_name": "test_invalid_payload_returns_400_on_post",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "client"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "post"
        ],
        "line_start": 45,
        "line_end": 52
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\tests\\test_api.py",
        "module": "test_api",
        "class_name": "DummyForm",
        "function_name": "__init__",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "*a",
            "kind": "vararg"
          },
          {
            "name": "**kw",
            "kind": "kwarg"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 77,
        "line_end": 79
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\tests\\test_api.py",
        "module": "test_api",
        "class_name": "DummyForm",
        "function_name": "validate",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [
          "True"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 81,
        "line_end": 82
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\tests\\test_api.py",
        "module": "test_api",
        "class_name": "DummyForm",
        "function_name": "instantiate_object",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [
          "Quarry(**self.data)"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "Quarry"
        ],
        "line_start": 84,
        "line_end": 85
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\tests\\test_api.py",
        "module": "test_api",
        "class_name": "DummyForm",
        "function_name": "__iter__",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [
          "iter([])"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": false,
        "calls": [
          "iter"
        ],
        "line_start": 87,
        "line_end": 88
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\tests\\test_api.py",
        "module": "test_api",
        "class_name": "DummyForm",
        "function_name": "dict",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "*args",
            "kind": "vararg"
          },
          {
            "name": "**kwargs",
            "kind": "kwarg"
          }
        ],
        "return_type": null,
        "returns": [
          "self.data"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 90,
        "line_end": 91
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\tests\\test_api.py",
        "module": "test_api",
        "class_name": "TestObjectAPI",
        "function_name": "test_create_quarry_success",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "client"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 54,
        "line_end": 96
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\tests\\test_api.py",
        "module": "test_api",
        "class_name": "DummyForm",
        "function_name": "__init__",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "*a",
            "kind": "vararg"
          },
          {
            "name": "**kw",
            "kind": "kwarg"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 163,
        "line_end": 165
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\tests\\test_api.py",
        "module": "test_api",
        "class_name": "DummyForm",
        "function_name": "validate",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [
          "True"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 167,
        "line_end": 168
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\tests\\test_api.py",
        "module": "test_api",
        "class_name": "DummyForm",
        "function_name": "instantiate_object",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [
          "model_class(**self.data)"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [
          "model_class"
        ],
        "line_start": 170,
        "line_end": 171
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\tests\\test_api.py",
        "module": "test_api",
        "class_name": "DummyForm",
        "function_name": "__iter__",
        "arguments": [
          {
            "name": "self"
          }
        ],
        "return_type": null,
        "returns": [
          "iter([])"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": false,
        "calls": [
          "iter"
        ],
        "line_start": 173,
        "line_end": 174
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\tests\\test_api.py",
        "module": "test_api",
        "class_name": "DummyForm",
        "function_name": "dict",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "*args",
            "kind": "vararg"
          },
          {
            "name": "**kwargs",
            "kind": "kwarg"
          }
        ],
        "return_type": null,
        "returns": [
          "self.data"
        ],
        "docstring": null,
        "decorators": [],
        "is_public": true,
        "calls": [],
        "line_start": 176,
        "line_end": 177
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\tests\\test_api.py",
        "module": "test_api",
        "class_name": "TestObjectAPI",
        "function_name": "test_create_object_success",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "client"
          },
          {
            "name": "init_database"
          },
          {
            "name": "object_type"
          },
          {
            "name": "data_factory"
          },
          {
            "name": "model_class"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": null,
        "decorators": [
          "pytest.mark.parametrize('object_type, data_factory, model_class', [('truck', lambda f: {'quarry_id': f['quarry'].id, 'name': 'Test Truck', 'body_capacity': 100, 'speed_empty': 10, 'speed_loaded': 20}, Truck), ('shovel', lambda f: {'quarry_id': f['quarry'].id, 'name': 'Test Shovel', 'bucket_volume': 10, 'bucket_dig_speed': 10, 'bucket_fill_speed': 200}, Shovel), ('fuel_station', lambda f: {'quarry_id': f['quarry'].id, 'name': 'Test Fuel Station', 'num_pumps': 4, 'flow_rate': 2.5}, FuelStation), ('unload', lambda f: {'quarry_id': f['quarry'].id, 'name': 'Test Unload', 'unload_type': 'hydraulic'}, Unload)])"
        ],
        "is_public": true,
        "calls": [],
        "line_start": 144,
        "line_end": 208
      },
      {
        "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\tests\\test_api.py",
        "module": "test_api",
        "class_name": "TestNotFoundEndpoints",
        "function_name": "test_returns_404",
        "arguments": [
          {
            "name": "self"
          },
          {
            "name": "client"
          },
          {
            "name": "endpoint"
          }
        ],
        "return_type": null,
        "returns": [],
        "docstring": "Проверяем, что несуществующие ресурсы возвращают 404",
        "decorators": [
          "pytest.mark.parametrize('endpoint', ['/api/road-net/999999', '/api/simulation/non-existent-id/meta', '/api/simulation/non-existent-id/summary', '/api/simulation/non-existent-id/events'])"
        ],
        "is_public": true,
        "calls": [
          "parametrize",
          "get"
        ],
        "line_start": 223,
        "line_end": 226
      }
    ]
  },
  {
    "file_path": "C:\\Сторонние\\Цифровой двойник - документация\\qsimmine12\\app\\tests\\__init__.py",
    "imports": [],
    "functions": []
  }
]