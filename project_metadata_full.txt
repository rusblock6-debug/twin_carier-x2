[
  {
    "file_path": "qsimmine12\\app\\dxf_converter.py",
    "function_name": "__init__",
    "arguments": [
      "self",
      "anchor_lat",
      "anchor_lon",
      "anchor_height"
    ],
    "return_type": "None",
    "returns": [],
    "docstring": null,
    "line_start": 22,
    "line_end": 25
  },
  {
    "file_path": "qsimmine12\\app\\dxf_converter.py",
    "function_name": "convert_coords",
    "arguments": [
      "self",
      "x",
      "y",
      "z"
    ],
    "return_type": "tuple[float, float, float | None]",
    "returns": [
      "(lat, lon, alt)"
    ],
    "docstring": null,
    "line_start": 27,
    "line_end": 31
  },
  {
    "file_path": "qsimmine12\\app\\dxf_converter.py",
    "function_name": "safe_geojson_coords",
    "arguments": [
      "self",
      "x",
      "y",
      "z"
    ],
    "return_type": "tuple[float, float] | tuple[float, float, float]",
    "returns": [
      "(y, x, z)",
      "(y, x)"
    ],
    "docstring": null,
    "line_start": 33,
    "line_end": 41
  },
  {
    "file_path": "qsimmine12\\app\\dxf_converter.py",
    "function_name": "extract_elevation_from_str",
    "arguments": [
      "self",
      "layer_name"
    ],
    "return_type": "float | None",
    "returns": [
      "None",
      "elevation"
    ],
    "docstring": "Extract elevation from layer name",
    "line_start": 43,
    "line_end": 50
  },
  {
    "file_path": "qsimmine12\\app\\dxf_converter.py",
    "function_name": "process_line",
    "arguments": [
      "self",
      "line",
      "layer_name",
      "elevation"
    ],
    "return_type": "dict",
    "returns": [
      "feature"
    ],
    "docstring": "Process LINE entity",
    "line_start": 52,
    "line_end": 71
  },
  {
    "file_path": "qsimmine12\\app\\dxf_converter.py",
    "function_name": "process_polyline",
    "arguments": [
      "self",
      "polyline",
      "layer_name",
      "elevation"
    ],
    "return_type": "dict | None",
    "returns": [
      "feature"
    ],
    "docstring": "Process POLYLINE entity",
    "line_start": 73,
    "line_end": 95
  },
  {
    "file_path": "qsimmine12\\app\\dxf_converter.py",
    "function_name": "process_lwpolyline",
    "arguments": [
      "self",
      "lwpolyline",
      "layer_name",
      "elevation"
    ],
    "return_type": "dict | None",
    "returns": [
      "feature"
    ],
    "docstring": "Process LWPOLYLINE entity",
    "line_start": 97,
    "line_end": 119
  },
  {
    "file_path": "qsimmine12\\app\\dxf_converter.py",
    "function_name": "convert_dxf_to_geojson",
    "arguments": [
      "self",
      "dxf_file"
    ],
    "return_type": "dict",
    "returns": [
      "feature_collection"
    ],
    "docstring": "Convert DXF file to GeoJSON format",
    "line_start": 121,
    "line_end": 177
  },
  {
    "file_path": "qsimmine12\\app\\forms.py",
    "function_name": "collect_model_field_names",
    "arguments": [
      "schema_cls"
    ],
    "return_type": "List[str]",
    "returns": [
      "[k for k in dir(schema_cls) if not k.startswith('_')]",
      "list(schema_cls.__fields__.keys())"
    ],
    "docstring": "Возвращает имена полей Pydantic-схемы.",
    "line_start": 68,
    "line_end": 74
  },
  {
    "file_path": "qsimmine12\\app\\forms.py",
    "function_name": "verify_template_bond",
    "arguments": [
      "self",
      "orm_obj"
    ],
    "return_type": "None",
    "returns": [],
    "docstring": "Если orm_obj.template_id установлен, проверяем, совпадают ли поля шаблона и объекта.\nЕсли нет — обнуляем связь.",
    "line_start": 99,
    "line_end": 112
  },
  {
    "file_path": "qsimmine12\\app\\forms.py",
    "function_name": "verify_template_bond_reversed",
    "arguments": [
      "self",
      "orm_obj"
    ],
    "return_type": "None",
    "returns": [],
    "docstring": "Если у текущего шаблона изменились поля — удалить связь template_id у всех привязанных объектов.",
    "line_start": 119,
    "line_end": 136
  },
  {
    "file_path": "qsimmine12\\app\\forms.py",
    "function_name": "delete_schedule_items",
    "arguments": [
      "obj_data",
      "model",
      "enterprise_tz"
    ],
    "return_type": "int",
    "returns": [
      "deleted"
    ],
    "docstring": null,
    "line_start": 150,
    "line_end": 196
  },
  {
    "file_path": "qsimmine12\\app\\forms.py",
    "function_name": "handle_schedule_create",
    "arguments": [
      "self",
      "obj_data",
      "model",
      "schedule_type"
    ],
    "return_type": null,
    "returns": [
      "JSONResponse({'success': True, 'ids': created_ids, 'count': len(created_ids), 'deleted_count': deleted_count})",
      "JSONResponse({'success': False, 'error': f'Error processing {schedule_type} records: {str(e)}'}, status_code=500)",
      "JSONResponse({'success': False, 'error': f'Unsupported schedule type for creation: {schedule_type}'}, status_code=400)"
    ],
    "docstring": null,
    "line_start": 198,
    "line_end": 285
  },
  {
    "file_path": "qsimmine12\\app\\forms.py",
    "function_name": "handle_schedule_delete",
    "arguments": [
      "self",
      "obj_data",
      "model",
      "schedule_type"
    ],
    "return_type": null,
    "returns": [
      "JSONResponse({'success': True, 'deleted_count': deleted_count, 'message': f'Успешно удалено {deleted_count} записей {schedule_type}'})",
      "JSONResponse({'success': False, 'error': f'Error deleting {schedule_type} records: {str(e)}'}, status_code=500)"
    ],
    "docstring": null,
    "line_start": 287,
    "line_end": 299
  },
  {
    "file_path": "qsimmine12\\app\\forms.py",
    "function_name": "validate_name_unique",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [],
    "docstring": "Проверка уникальности имени — вызывать из роутера перед сохранением.",
    "line_start": 315,
    "line_end": 324
  },
  {
    "file_path": "qsimmine12\\app\\forms.py",
    "function_name": "instantiate_object",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "self._obj",
      "self._obj"
    ],
    "docstring": "Возвращает ORM-объект: если id задан — загружает, иначе создаёт новый и добавляет в сессию.",
    "line_start": 326,
    "line_end": 338
  },
  {
    "file_path": "qsimmine12\\app\\forms.py",
    "function_name": "populate_obj",
    "arguments": [
      "self",
      "orm_obj"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 356,
    "line_end": 364
  },
  {
    "file_path": "qsimmine12\\app\\forms.py",
    "function_name": "check_end_after_start",
    "arguments": [
      "cls",
      "v",
      "info"
    ],
    "return_type": null,
    "returns": [
      "v"
    ],
    "docstring": null,
    "line_start": 380,
    "line_end": 384
  },
  {
    "file_path": "qsimmine12\\app\\forms.py",
    "function_name": "check_payload",
    "arguments": [
      "cls",
      "v"
    ],
    "return_type": null,
    "returns": [
      "v",
      "v"
    ],
    "docstring": null,
    "line_start": 404,
    "line_end": 409
  },
  {
    "file_path": "qsimmine12\\app\\forms.py",
    "function_name": "check_unload_type",
    "arguments": [
      "cls",
      "v"
    ],
    "return_type": null,
    "returns": [
      "v",
      "v"
    ],
    "docstring": null,
    "line_start": 466,
    "line_end": 471
  },
  {
    "file_path": "qsimmine12\\app\\forms.py",
    "function_name": "check_payload",
    "arguments": [
      "cls",
      "v"
    ],
    "return_type": null,
    "returns": [
      "v",
      "v"
    ],
    "docstring": null,
    "line_start": 475,
    "line_end": 480
  },
  {
    "file_path": "qsimmine12\\app\\forms.py",
    "function_name": "validate_logic",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 503,
    "line_end": 505
  },
  {
    "file_path": "qsimmine12\\app\\forms.py",
    "function_name": "check_trail_type",
    "arguments": [
      "cls",
      "v"
    ],
    "return_type": null,
    "returns": [
      "v",
      "v"
    ],
    "docstring": null,
    "line_start": 535,
    "line_end": 540
  },
  {
    "file_path": "qsimmine12\\app\\forms.py",
    "function_name": "validate_timezone",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 558,
    "line_end": 564
  },
  {
    "file_path": "qsimmine12\\app\\forms.py",
    "function_name": "validate_shift_config",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 566,
    "line_end": 575
  },
  {
    "file_path": "qsimmine12\\app\\forms.py",
    "function_name": "validate_complex_rules",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "getattr(orm_obj, field_name)",
      "timedelta(minutes=value_from_form_or_obj(field_name))",
      "val"
    ],
    "docstring": null,
    "line_start": 577,
    "line_end": 612
  },
  {
    "file_path": "qsimmine12\\app\\forms.py",
    "function_name": "value_from_form_or_obj",
    "arguments": [
      "field_name"
    ],
    "return_type": null,
    "returns": [
      "getattr(orm_obj, field_name)",
      "val"
    ],
    "docstring": null,
    "line_start": 586,
    "line_end": 590
  },
  {
    "file_path": "qsimmine12\\app\\forms.py",
    "function_name": "offset_td",
    "arguments": [
      "field_name"
    ],
    "return_type": null,
    "returns": [
      "timedelta(minutes=value_from_form_or_obj(field_name))"
    ],
    "docstring": null,
    "line_start": 592,
    "line_end": 593
  },
  {
    "file_path": "qsimmine12\\app\\forms.py",
    "function_name": "validate_logic",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 624,
    "line_end": 655
  },
  {
    "file_path": "qsimmine12\\app\\forms.py",
    "function_name": "save_geojson_data",
    "arguments": [
      "self",
      "orm_obj"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 657,
    "line_end": 671
  },
  {
    "file_path": "qsimmine12\\app\\forms.py",
    "function_name": "validate_source_file_id_unique",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 685,
    "line_end": 693
  },
  {
    "file_path": "qsimmine12\\app\\forms.py",
    "function_name": "validate_convert_overlay_possible",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 695,
    "line_end": 703
  },
  {
    "file_path": "qsimmine12\\app\\forms.py",
    "function_name": "convert_dxf",
    "arguments": [
      "self",
      "orm_obj"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 705,
    "line_end": 724
  },
  {
    "file_path": "qsimmine12\\app\\forms.py",
    "function_name": "vehicle_type_allowed",
    "arguments": [
      "cls",
      "v"
    ],
    "return_type": null,
    "returns": [
      "v",
      "v"
    ],
    "docstring": null,
    "line_start": 737,
    "line_end": 742
  },
  {
    "file_path": "qsimmine12\\app\\forms.py",
    "function_name": "validate_vehicle_id_exists",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 744,
    "line_end": 755
  },
  {
    "file_path": "qsimmine12\\app\\forms.py",
    "function_name": "validate_no_time_overlap",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 757,
    "line_end": 781
  },
  {
    "file_path": "qsimmine12\\app\\geo_utils.py",
    "function_name": "calc_distance",
    "arguments": [
      "coord0",
      "coord1",
      "geod"
    ],
    "return_type": "float",
    "returns": [
      "distance"
    ],
    "docstring": null,
    "line_start": 11,
    "line_end": 23
  },
  {
    "file_path": "qsimmine12\\app\\geo_utils.py",
    "function_name": "local_to_global",
    "arguments": [
      "x",
      "y",
      "z",
      "lat0",
      "lon0",
      "alt0"
    ],
    "return_type": "tuple[float, float, float | None]",
    "returns": [
      "(lat0 + delta_lat, lon0 + delta_lon, alt)"
    ],
    "docstring": null,
    "line_start": 26,
    "line_end": 49
  },
  {
    "file_path": "qsimmine12\\app\\models.py",
    "function_name": "collect_default_values",
    "arguments": [
      "cls"
    ],
    "return_type": "dict[str, Any]",
    "returns": [
      "result"
    ],
    "docstring": null,
    "line_start": 61,
    "line_end": 68
  },
  {
    "file_path": "qsimmine12\\app\\models.py",
    "function_name": "collect_default_values_of_all_models",
    "arguments": [
      "cls"
    ],
    "return_type": null,
    "returns": [
      "result"
    ],
    "docstring": null,
    "line_start": 71,
    "line_end": 82
  },
  {
    "file_path": "qsimmine12\\app\\models.py",
    "function_name": "initial_location",
    "arguments": [
      "self"
    ],
    "return_type": "List[float]",
    "returns": [
      "[self.initial_lat, self.initial_lon, self.initial_height]"
    ],
    "docstring": null,
    "line_start": 96,
    "line_end": 97
  },
  {
    "file_path": "qsimmine12\\app\\models.py",
    "function_name": "set_location",
    "arguments": [
      "self",
      "location"
    ],
    "return_type": "None",
    "returns": [],
    "docstring": null,
    "line_start": 101,
    "line_end": 110
  },
  {
    "file_path": "qsimmine12\\app\\models.py",
    "function_name": "__repr__",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "f'<{self.__class__.__name__} {self.id}: {self.name}>'"
    ],
    "docstring": null,
    "line_start": 136,
    "line_end": 137
  },
  {
    "file_path": "qsimmine12\\app\\models.py",
    "function_name": "types",
    "arguments": [
      "self"
    ],
    "return_type": "List[str]",
    "returns": [
      "types_list"
    ],
    "docstring": null,
    "line_start": 419,
    "line_end": 429
  },
  {
    "file_path": "qsimmine12\\app\\models.py",
    "function_name": "__repr__",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "f'<{self.__class__.__name__} {self.id}: Shovel {self.shovel_id}, Unload {self.unload_id}>'"
    ],
    "docstring": null,
    "line_start": 463,
    "line_end": 464
  },
  {
    "file_path": "qsimmine12\\app\\models.py",
    "function_name": "__repr__",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "f'<{self.__class__.__name__}: Trail {self.trail_id}, Truck {self.truck_id}>'"
    ],
    "docstring": null,
    "line_start": 487,
    "line_end": 488
  },
  {
    "file_path": "qsimmine12\\app\\models.py",
    "function_name": "__repr__",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "f'<{self.__class__.__name__} {self.id}>'"
    ],
    "docstring": null,
    "line_start": 604,
    "line_end": 605
  },
  {
    "file_path": "qsimmine12\\app\\models.py",
    "function_name": "__repr__",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "f'<{self.__class__.__name__}: {self.name}>'"
    ],
    "docstring": null,
    "line_start": 626,
    "line_end": 627
  },
  {
    "file_path": "qsimmine12\\app\\models.py",
    "function_name": "delete_with_file",
    "arguments": [
      "cls",
      "session",
      "id_",
      "name"
    ],
    "return_type": "bool",
    "returns": [
      "True",
      "False",
      "False"
    ],
    "docstring": null,
    "line_start": 630,
    "line_end": 647
  },
  {
    "file_path": "qsimmine12\\app\\models.py",
    "function_name": "validate_schedule_type",
    "arguments": [
      "type"
    ],
    "return_type": null,
    "returns": [
      "type"
    ],
    "docstring": null,
    "line_start": 761,
    "line_end": 767
  },
  {
    "file_path": "qsimmine12\\app\\models.py",
    "function_name": "validate_object_type",
    "arguments": [
      "type"
    ],
    "return_type": null,
    "returns": [
      "type"
    ],
    "docstring": null,
    "line_start": 769,
    "line_end": 776
  },
  {
    "file_path": "qsimmine12\\app\\road_net.py",
    "function_name": "__init__",
    "arguments": [
      "self",
      "quarry_id"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 18,
    "line_end": 19
  },
  {
    "file_path": "qsimmine12\\app\\road_net.py",
    "function_name": "clean",
    "arguments": [
      "self",
      "graph"
    ],
    "return_type": "None",
    "returns": [],
    "docstring": null,
    "line_start": 21,
    "line_end": 23
  },
  {
    "file_path": "qsimmine12\\app\\road_net.py",
    "function_name": "__clean_graph_bonds_by_schema",
    "arguments": [
      "graph"
    ],
    "return_type": "None",
    "returns": [],
    "docstring": "Internal helper for sanitizing point bonds schema.\nBroken and forbidden entries are silently dropped",
    "line_start": 26,
    "line_end": 57
  },
  {
    "file_path": "qsimmine12\\app\\road_net.py",
    "function_name": "__clean_graph_bonds_by_data",
    "arguments": [
      "self",
      "graph"
    ],
    "return_type": "None",
    "returns": [],
    "docstring": "Internal helper for sanitizing point bonds data.\nBroken and forbidden entries are silently dropped",
    "line_start": 60,
    "line_end": 85
  },
  {
    "file_path": "qsimmine12\\app\\routes.py",
    "function_name": "index",
    "arguments": [
      "request"
    ],
    "return_type": null,
    "returns": [
      "FileResponse('static/index.html')"
    ],
    "docstring": null,
    "line_start": 94,
    "line_end": 95
  },
  {
    "file_path": "qsimmine12\\app\\routes.py",
    "function_name": "quarry_data",
    "arguments": [
      "db"
    ],
    "return_type": null,
    "returns": [
      "result_dict"
    ],
    "docstring": null,
    "line_start": 98,
    "line_end": 109
  },
  {
    "file_path": "qsimmine12\\app\\routes.py",
    "function_name": "schedule_data_by_date_shift",
    "arguments": [
      "date",
      "quarry_id",
      "type",
      "shift_number",
      "start_time",
      "end_time",
      "db"
    ],
    "return_type": null,
    "returns": [
      "dto"
    ],
    "docstring": null,
    "line_start": 112,
    "line_end": 140
  },
  {
    "file_path": "qsimmine12\\app\\routes.py",
    "function_name": "update_location",
    "arguments": [
      "data",
      "db"
    ],
    "return_type": null,
    "returns": [
      "{'success': True, 'id': obj.id, 'lat': obj.initial_lat, 'lon': obj.initial_lon}"
    ],
    "docstring": null,
    "line_start": 143,
    "line_end": 157
  },
  {
    "file_path": "qsimmine12\\app\\routes.py",
    "function_name": "get_scenarios",
    "arguments": [
      "db"
    ],
    "return_type": null,
    "returns": [
      "scenarios"
    ],
    "docstring": null,
    "line_start": 160,
    "line_end": 162
  },
  {
    "file_path": "qsimmine12\\app\\routes.py",
    "function_name": "get_road_net",
    "arguments": [
      "rn_id",
      "db"
    ],
    "return_type": null,
    "returns": [
      "rn.geojson_data"
    ],
    "docstring": null,
    "line_start": 165,
    "line_end": 169
  },
  {
    "file_path": "qsimmine12\\app\\routes.py",
    "function_name": "defaults_data",
    "arguments": [],
    "return_type": null,
    "returns": [
      "defaults_dict"
    ],
    "docstring": null,
    "line_start": 172,
    "line_end": 174
  },
  {
    "file_path": "qsimmine12\\app\\routes.py",
    "function_name": "create_object",
    "arguments": [
      "data",
      "db"
    ],
    "return_type": null,
    "returns": [
      "result"
    ],
    "docstring": "Создание объекта (ранее action == 'create')",
    "line_start": 177,
    "line_end": 192
  },
  {
    "file_path": "qsimmine12\\app\\routes.py",
    "function_name": "update_object",
    "arguments": [
      "obj_id",
      "data",
      "db"
    ],
    "return_type": null,
    "returns": [
      "result"
    ],
    "docstring": "Обновление объекта (ранее action == 'update')",
    "line_start": 195,
    "line_end": 206
  },
  {
    "file_path": "qsimmine12\\app\\routes.py",
    "function_name": "delete_object",
    "arguments": [
      "data",
      "db"
    ],
    "return_type": null,
    "returns": [
      "{'success': True}",
      "form.handle_schedule_delete(data.dict(), TYPE_SCHEDULE_MAP.get('blasting'), 'blasting')",
      "form.handle_schedule_delete(data.dict(), TYPE_SCHEDULE_MAP.get('planned_idle'), 'planned_idle')"
    ],
    "docstring": null,
    "line_start": 209,
    "line_end": 247
  },
  {
    "file_path": "qsimmine12\\app\\routes.py",
    "function_name": "run_simulation",
    "arguments": [
      "data",
      "db",
      "redis_client"
    ],
    "return_type": null,
    "returns": [
      "RedirectResponse(url=f'/simulation_view/{sim_id}', status_code=303)"
    ],
    "docstring": null,
    "line_start": 252,
    "line_end": 258
  },
  {
    "file_path": "qsimmine12\\app\\routes.py",
    "function_name": "api_run_simulation",
    "arguments": [
      "data",
      "db",
      "redis_client"
    ],
    "return_type": null,
    "returns": [
      "{'sim_id': sim_id}"
    ],
    "docstring": null,
    "line_start": 261,
    "line_end": 270
  },
  {
    "file_path": "qsimmine12\\app\\routes.py",
    "function_name": "get_simulation_meta",
    "arguments": [
      "sim_id",
      "redis_client"
    ],
    "return_type": null,
    "returns": [
      "json.loads(meta_json)"
    ],
    "docstring": null,
    "line_start": 273,
    "line_end": 282
  },
  {
    "file_path": "qsimmine12\\app\\routes.py",
    "function_name": "get_simulation_batch",
    "arguments": [
      "sim_id",
      "batch_index",
      "redis_client"
    ],
    "return_type": null,
    "returns": [
      "json.loads(batch_data)"
    ],
    "docstring": null,
    "line_start": 285,
    "line_end": 294
  },
  {
    "file_path": "qsimmine12\\app\\routes.py",
    "function_name": "get_simulation_batches",
    "arguments": [
      "sim_id",
      "indices",
      "redis_client"
    ],
    "return_type": null,
    "returns": [
      "{'batches': batches}"
    ],
    "docstring": null,
    "line_start": 297,
    "line_end": 315
  },
  {
    "file_path": "qsimmine12\\app\\routes.py",
    "function_name": "get_simulation_summary",
    "arguments": [
      "sim_id",
      "redis_client"
    ],
    "return_type": null,
    "returns": [
      "json.loads(summary_data)"
    ],
    "docstring": null,
    "line_start": 318,
    "line_end": 327
  },
  {
    "file_path": "qsimmine12\\app\\routes.py",
    "function_name": "get_simulation_events",
    "arguments": [
      "sim_id",
      "redis_client"
    ],
    "return_type": null,
    "returns": [
      "json.loads(events_data)"
    ],
    "docstring": null,
    "line_start": 330,
    "line_end": 339
  },
  {
    "file_path": "qsimmine12\\app\\routes.py",
    "function_name": "handle_file_get",
    "arguments": [
      "id_or_name",
      "db"
    ],
    "return_type": null,
    "returns": [
      "{'id': uf.id, 'name': uf.name, 'path': uf.path, 'size': uf.size, 'created_at': uf.created_at.isoformat(), 'url': f'/upload/{uf.name}'}"
    ],
    "docstring": null,
    "line_start": 344,
    "line_end": 367
  },
  {
    "file_path": "qsimmine12\\app\\routes.py",
    "function_name": "handle_file_post",
    "arguments": [
      "request",
      "file",
      "name",
      "db"
    ],
    "return_type": null,
    "returns": [
      "{'success': True, 'file': {'id': uf.id, 'name': uf.name, 'url': f'/upload/{uf.name}'}}"
    ],
    "docstring": null,
    "line_start": 370,
    "line_end": 412
  },
  {
    "file_path": "qsimmine12\\app\\routes.py",
    "function_name": "handle_file_delete",
    "arguments": [
      "id_or_name",
      "db"
    ],
    "return_type": null,
    "returns": [
      "{'success': True}"
    ],
    "docstring": null,
    "line_start": 415,
    "line_end": 427
  },
  {
    "file_path": "qsimmine12\\app\\routes.py",
    "function_name": "uploaded_file_route",
    "arguments": [
      "filename",
      "request"
    ],
    "return_type": null,
    "returns": [
      "FileResponse(upload_dir / filename)"
    ],
    "docstring": null,
    "line_start": 430,
    "line_end": 432
  },
  {
    "file_path": "qsimmine12\\app\\routes.py",
    "function_name": "get_map_overlay",
    "arguments": [
      "mo_id",
      "db"
    ],
    "return_type": null,
    "returns": [
      "{'success': True, 'id': mo.id, 'name': mo.name, 'created_at': mo.created_at.isoformat(), 'updated_at': mo.updated_at.isoformat(), 'is_active': mo.is_active, 'quarry_id': mo.quarry_id, 'source_file_id': mo.source_file_id, 'anchor_lat': mo.anchor_lat, 'anchor_lon': mo.anchor_lon, 'anchor_height': mo.anchor_height, 'color': mo.color, 'geojson_data': mo.geojson_data}"
    ],
    "docstring": null,
    "line_start": 435,
    "line_end": 454
  },
  {
    "file_path": "qsimmine12\\app\\shift.py",
    "function_name": "__init__",
    "arguments": [
      "self",
      "message",
      "status_code"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 54,
    "line_end": 57
  },
  {
    "file_path": "qsimmine12\\app\\shift.py",
    "function_name": "__str__",
    "arguments": [
      "self"
    ],
    "return_type": "str",
    "returns": [
      "self.message"
    ],
    "docstring": null,
    "line_start": 59,
    "line_end": 60
  },
  {
    "file_path": "qsimmine12\\app\\shift.py",
    "function_name": "__init__",
    "arguments": [
      "self",
      "offsets_tuple"
    ],
    "return_type": "None",
    "returns": [],
    "docstring": null,
    "line_start": 80,
    "line_end": 81
  },
  {
    "file_path": "qsimmine12\\app\\shift.py",
    "function_name": "factory",
    "arguments": [
      "cls",
      "shift_config"
    ],
    "return_type": "'ShiftLogic'",
    "returns": [
      "cls(offsets_tuple)"
    ],
    "docstring": null,
    "line_start": 84,
    "line_end": 111
  },
  {
    "file_path": "qsimmine12\\app\\shift.py",
    "function_name": "validate_shift_config",
    "arguments": [
      "cls",
      "shift_config"
    ],
    "return_type": "None",
    "returns": [],
    "docstring": null,
    "line_start": 114,
    "line_end": 126
  },
  {
    "file_path": "qsimmine12\\app\\shift.py",
    "function_name": "for_date",
    "arguments": [
      "self",
      "day",
      "tzinfo"
    ],
    "return_type": "list['ShiftDTO']",
    "returns": [
      "result"
    ],
    "docstring": null,
    "line_start": 128,
    "line_end": 143
  },
  {
    "file_path": "qsimmine12\\app\\shift.py",
    "function_name": "for_datetime",
    "arguments": [
      "self",
      "moment"
    ],
    "return_type": "'ShiftDTO'",
    "returns": [
      "ShiftDTO(day=day, begin_time=begin_time, end_time=end_time, number=i, length=offsets.end_offset - offsets.begin_offset, begin_offset=offsets.begin_offset, end_offset=offsets.end_offset)"
    ],
    "docstring": null,
    "line_start": 145,
    "line_end": 164
  },
  {
    "file_path": "qsimmine12\\app\\shift.py",
    "function_name": "for_range",
    "arguments": [
      "self",
      "start",
      "stop"
    ],
    "return_type": "list['ShiftDTO']",
    "returns": [
      "result"
    ],
    "docstring": null,
    "line_start": 166,
    "line_end": 194
  },
  {
    "file_path": "qsimmine12\\app\\shift.py",
    "function_name": "prev_from",
    "arguments": [
      "self",
      "shift"
    ],
    "return_type": "'ShiftDTO'",
    "returns": [
      "ShiftDTO(day=prev_day, begin_time=prev_day_start + offsets.begin_offset, end_time=prev_day_start + offsets.end_offset, number=prev_number, length=offsets.end_offset - offsets.begin_offset, begin_offset=offsets.begin_offset, end_offset=offsets.end_offset)"
    ],
    "docstring": null,
    "line_start": 196,
    "line_end": 213
  },
  {
    "file_path": "qsimmine12\\app\\shift.py",
    "function_name": "next_from",
    "arguments": [
      "self",
      "shift"
    ],
    "return_type": "'ShiftDTO'",
    "returns": [
      "ShiftDTO(day=next_day, begin_time=next_day_start + offsets.begin_offset, end_time=next_day_start + offsets.end_offset, number=next_number, length=offsets.end_offset - offsets.begin_offset, begin_offset=offsets.begin_offset, end_offset=offsets.end_offset)"
    ],
    "docstring": null,
    "line_start": 215,
    "line_end": 232
  },
  {
    "file_path": "qsimmine12\\app\\simulate_test.py",
    "function_name": "generate_simulation_data",
    "arguments": [],
    "return_type": null,
    "returns": [
      "{'status': 'ok', 'telemetry': telemetry, 'summary': summary}"
    ],
    "docstring": null,
    "line_start": 7,
    "line_end": 107
  },
  {
    "file_path": "qsimmine12\\app\\utils.py",
    "function_name": "utc_now",
    "arguments": [],
    "return_type": null,
    "returns": [
      "datetime.now(timezone.utc)"
    ],
    "docstring": null,
    "line_start": 34,
    "line_end": 35
  },
  {
    "file_path": "qsimmine12\\app\\utils.py",
    "function_name": "utc_to_enterprise",
    "arguments": [
      "utc_time",
      "tz"
    ],
    "return_type": "datetime",
    "returns": [
      "datetime.fromisoformat(utc_time.replace('Z', '+00:00')).replace(tzinfo=timezone.utc).astimezone(ZoneInfo(tz))"
    ],
    "docstring": "Конвертирует UTC время в указанную таймзону",
    "line_start": 38,
    "line_end": 42
  },
  {
    "file_path": "qsimmine12\\app\\utils.py",
    "function_name": "enterprise_to_utc",
    "arguments": [
      "local_time",
      "tz"
    ],
    "return_type": "datetime",
    "returns": [
      "datetime.fromisoformat(local_time).replace(tzinfo=ZoneInfo(tz)).astimezone(timezone.utc)"
    ],
    "docstring": "Конвертирует локальное время предприятия в UTC",
    "line_start": 45,
    "line_end": 49
  },
  {
    "file_path": "qsimmine12\\app\\utils.py",
    "function_name": "str_to_snake_case",
    "arguments": [
      "s"
    ],
    "return_type": "str",
    "returns": [
      "s"
    ],
    "docstring": null,
    "line_start": 52,
    "line_end": 59
  },
  {
    "file_path": "qsimmine12\\app\\utils.py",
    "function_name": "secure_filename",
    "arguments": [
      "filename",
      "allow_unicode"
    ],
    "return_type": "str",
    "returns": [
      "filename"
    ],
    "docstring": "Copy of :func:`werkzeug.utils.secure_filename`, but with `allow_unicode` arg\n\nPass it a filename and it will return a secure version of it.  This\nfilename can then safely be stored on a regular file system and passed\nto :func:`os.path.join`.  The filename returned is an ASCII only string\nfor maximum portability.\n\nOn windows systems the function also makes sure that the file is not\nnamed after one of the special device files.\n\n>>> secure_filename(\"My cool movie.mov\")\n'My_cool_movie.mov'\n>>> secure_filename(\"../../../etc/passwd\")\n'etc_passwd'\n>>> secure_filename('i contain cool \\xfcml\\xe4uts.txt')\n'i_contain_cool_umlauts.txt'\n\nThe function might return an empty filename.  It's your responsibility\nto ensure that the filename is unique and that you abort or\ngenerate a random filename if the function returned an empty one.\n\n.. versionadded:: 0.5\n\n:param filename: the filename to secure",
    "line_start": 62,
    "line_end": 113
  },
  {
    "file_path": "qsimmine12\\app\\utils.py",
    "function_name": "human_size",
    "arguments": [
      "path"
    ],
    "return_type": "str",
    "returns": [
      "f'{size:.1f}PB'",
      "f'{size:.1f}{unit}'"
    ],
    "docstring": "Return human-readable file size",
    "line_start": 116,
    "line_end": 123
  },
  {
    "file_path": "qsimmine12\\app\\migrations\\env.py",
    "function_name": "run_migrations_offline",
    "arguments": [],
    "return_type": null,
    "returns": [],
    "docstring": "Запуск миграций в оффлайн-режиме.",
    "line_start": 20,
    "line_end": 31
  },
  {
    "file_path": "qsimmine12\\app\\migrations\\env.py",
    "function_name": "run_migrations_online",
    "arguments": [],
    "return_type": null,
    "returns": [],
    "docstring": "Запуск миграций в онлайн-режиме.",
    "line_start": 34,
    "line_end": 42
  },
  {
    "file_path": "qsimmine12\\app\\migrations\\versions\\049327069ed2_add_arm_turn_angle_to_shovel.py",
    "function_name": "upgrade",
    "arguments": [],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 19,
    "line_end": 25
  },
  {
    "file_path": "qsimmine12\\app\\migrations\\versions\\049327069ed2_add_arm_turn_angle_to_shovel.py",
    "function_name": "downgrade",
    "arguments": [],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 30,
    "line_end": 36
  },
  {
    "file_path": "qsimmine12\\app\\migrations\\versions\\173b757501f6_add_scenario_model.py",
    "function_name": "upgrade",
    "arguments": [],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 19,
    "line_end": 32
  },
  {
    "file_path": "qsimmine12\\app\\migrations\\versions\\173b757501f6_add_scenario_model.py",
    "function_name": "downgrade",
    "arguments": [],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 36,
    "line_end": 38
  },
  {
    "file_path": "qsimmine12\\app\\migrations\\versions\\2f3ca3217c27_add_blasting_model.py",
    "function_name": "upgrade",
    "arguments": [],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 19,
    "line_end": 31
  },
  {
    "file_path": "qsimmine12\\app\\migrations\\versions\\2f3ca3217c27_add_blasting_model.py",
    "function_name": "downgrade",
    "arguments": [],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 35,
    "line_end": 37
  },
  {
    "file_path": "qsimmine12\\app\\migrations\\versions\\34d2db5b9f3c_drop_columns.py",
    "function_name": "upgrade",
    "arguments": [],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 19,
    "line_end": 43
  },
  {
    "file_path": "qsimmine12\\app\\migrations\\versions\\34d2db5b9f3c_drop_columns.py",
    "function_name": "downgrade",
    "arguments": [],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 48,
    "line_end": 74
  },
  {
    "file_path": "qsimmine12\\app\\migrations\\versions\\5e034f7cece7_initial_migration_attempt_3.py",
    "function_name": "upgrade",
    "arguments": [],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 19,
    "line_end": 90
  },
  {
    "file_path": "qsimmine12\\app\\migrations\\versions\\5e034f7cece7_initial_migration_attempt_3.py",
    "function_name": "downgrade",
    "arguments": [],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 94,
    "line_end": 103
  },
  {
    "file_path": "qsimmine12\\app\\migrations\\versions\\660043dae00e_add_shoveltemplate_trucktemplate_.py",
    "function_name": "upgrade",
    "arguments": [],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 20,
    "line_end": 77
  },
  {
    "file_path": "qsimmine12\\app\\migrations\\versions\\660043dae00e_add_shoveltemplate_trucktemplate_.py",
    "function_name": "downgrade",
    "arguments": [],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 82,
    "line_end": 98
  },
  {
    "file_path": "qsimmine12\\app\\migrations\\versions\\689dff3c9f22_new_fields_for_shovel_truck_and_unload.py",
    "function_name": "upgrade",
    "arguments": [],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 19,
    "line_end": 51
  },
  {
    "file_path": "qsimmine12\\app\\migrations\\versions\\689dff3c9f22_new_fields_for_shovel_truck_and_unload.py",
    "function_name": "downgrade",
    "arguments": [],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 56,
    "line_end": 88
  },
  {
    "file_path": "qsimmine12\\app\\migrations\\versions\\741a88f7abe1_add_scenario_relation_to_.py",
    "function_name": "upgrade",
    "arguments": [],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 20,
    "line_end": 59
  },
  {
    "file_path": "qsimmine12\\app\\migrations\\versions\\741a88f7abe1_add_scenario_relation_to_.py",
    "function_name": "downgrade",
    "arguments": [],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 62,
    "line_end": 66
  },
  {
    "file_path": "qsimmine12\\app\\migrations\\versions\\77aa09bc992e_add_primary_key_to_scenario_id_in_.py",
    "function_name": "upgrade",
    "arguments": [],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 19,
    "line_end": 32
  },
  {
    "file_path": "qsimmine12\\app\\migrations\\versions\\77aa09bc992e_add_primary_key_to_scenario_id_in_.py",
    "function_name": "downgrade",
    "arguments": [],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 36,
    "line_end": 49
  },
  {
    "file_path": "qsimmine12\\app\\migrations\\versions\\8520318762c4_rename_shiftchangearea_to_idlearea.py",
    "function_name": "upgrade",
    "arguments": [],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 17,
    "line_end": 21
  },
  {
    "file_path": "qsimmine12\\app\\migrations\\versions\\8520318762c4_rename_shiftchangearea_to_idlearea.py",
    "function_name": "downgrade",
    "arguments": [],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 24,
    "line_end": 28
  },
  {
    "file_path": "qsimmine12\\app\\migrations\\versions\\8d394792dc14_add_shift_change_fields_to_quarry.py",
    "function_name": "upgrade",
    "arguments": [],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 19,
    "line_end": 23
  },
  {
    "file_path": "qsimmine12\\app\\migrations\\versions\\8d394792dc14_add_shift_change_fields_to_quarry.py",
    "function_name": "downgrade",
    "arguments": [],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 28,
    "line_end": 32
  },
  {
    "file_path": "qsimmine12\\app\\migrations\\versions\\9daa452a370b_new_reliability_related_fields_for_.py",
    "function_name": "upgrade",
    "arguments": [],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 19,
    "line_end": 31
  },
  {
    "file_path": "qsimmine12\\app\\migrations\\versions\\9daa452a370b_new_reliability_related_fields_for_.py",
    "function_name": "downgrade",
    "arguments": [],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 36,
    "line_end": 48
  },
  {
    "file_path": "qsimmine12\\app\\migrations\\versions\\a06b87cc0807_add_shiftchangearea_and_fuelstation_.py",
    "function_name": "upgrade",
    "arguments": [],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 19,
    "line_end": 76
  },
  {
    "file_path": "qsimmine12\\app\\migrations\\versions\\a06b87cc0807_add_shiftchangearea_and_fuelstation_.py",
    "function_name": "downgrade",
    "arguments": [],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 81,
    "line_end": 105
  },
  {
    "file_path": "qsimmine12\\app\\migrations\\versions\\a43abb6acab2_add_uploadedfile_and_mapoverlay.py",
    "function_name": "upgrade",
    "arguments": [],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 19,
    "line_end": 49
  },
  {
    "file_path": "qsimmine12\\app\\migrations\\versions\\a43abb6acab2_add_uploadedfile_and_mapoverlay.py",
    "function_name": "downgrade",
    "arguments": [],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 53,
    "line_end": 56
  },
  {
    "file_path": "qsimmine12\\app\\migrations\\versions\\b7dcacd91b4a_add_quarry.py",
    "function_name": "upgrade",
    "arguments": [],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 19,
    "line_end": 82
  },
  {
    "file_path": "qsimmine12\\app\\migrations\\versions\\b7dcacd91b4a_add_quarry.py",
    "function_name": "downgrade",
    "arguments": [],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 87,
    "line_end": 101
  },
  {
    "file_path": "qsimmine12\\app\\migrations\\versions\\c5fb8550f985_add_plannedidle.py",
    "function_name": "upgrade",
    "arguments": [],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 19,
    "line_end": 36
  },
  {
    "file_path": "qsimmine12\\app\\migrations\\versions\\c5fb8550f985_add_plannedidle.py",
    "function_name": "downgrade",
    "arguments": [],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 41,
    "line_end": 47
  },
  {
    "file_path": "qsimmine12\\app\\migrations\\versions\\f07a8f73270d_update_unload_payload_type_values.py",
    "function_name": "upgrade",
    "arguments": [],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 19,
    "line_end": 26
  },
  {
    "file_path": "qsimmine12\\app\\migrations\\versions\\f07a8f73270d_update_unload_payload_type_values.py",
    "function_name": "downgrade",
    "arguments": [],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 29,
    "line_end": 30
  },
  {
    "file_path": "qsimmine12\\app\\migrations\\versions\\fa791c45aefa_add_field_is_repair_area_to_idlearea.py",
    "function_name": "upgrade",
    "arguments": [],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 19,
    "line_end": 20
  },
  {
    "file_path": "qsimmine12\\app\\migrations\\versions\\fa791c45aefa_add_field_is_repair_area_to_idlearea.py",
    "function_name": "downgrade",
    "arguments": [],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 23,
    "line_end": 24
  },
  {
    "file_path": "qsimmine12\\app\\migrations\\versions\\fea74ce0faa7_add_roadnet.py",
    "function_name": "upgrade",
    "arguments": [],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 19,
    "line_end": 29
  },
  {
    "file_path": "qsimmine12\\app\\migrations\\versions\\fea74ce0faa7_add_roadnet.py",
    "function_name": "downgrade",
    "arguments": [],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 33,
    "line_end": 35
  },
  {
    "file_path": "qsimmine12\\app\\services\\date_time_service.py",
    "function_name": "__init__",
    "arguments": [
      "self",
      "tz_name",
      "start_hour",
      "end_hour"
    ],
    "return_type": null,
    "returns": [],
    "docstring": ":param tz_name: имя таймзоны (например, 'Europe/Berlin'). Если None — используется переменная окружения TZ или 'UTC'.\n:param start_hour: час начала рабочего дня в локальном времени предприятия.\n:param end_hour: час конца рабочего дня в локальном времени предприятия.",
    "line_start": 25,
    "line_end": 34
  },
  {
    "file_path": "qsimmine12\\app\\services\\date_time_service.py",
    "function_name": "_load_zone",
    "arguments": [
      "name"
    ],
    "return_type": "ZoneInfo",
    "returns": [
      "ZoneInfo(name)",
      "ZoneInfo('UTC')"
    ],
    "docstring": null,
    "line_start": 37,
    "line_end": 41
  },
  {
    "file_path": "qsimmine12\\app\\services\\date_time_service.py",
    "function_name": "_current_date_in_enterprise_tz",
    "arguments": [
      "self"
    ],
    "return_type": "date",
    "returns": [
      "now.date()"
    ],
    "docstring": null,
    "line_start": 43,
    "line_end": 45
  },
  {
    "file_path": "qsimmine12\\app\\services\\date_time_service.py",
    "function_name": "_generate_time_in_enterprise_tz",
    "arguments": [
      "self",
      "on_date",
      "hour"
    ],
    "return_type": "datetime",
    "returns": [
      "datetime(on_date.year, on_date.month, on_date.day, hour, 0, 0, tzinfo=self.tz)"
    ],
    "docstring": null,
    "line_start": 47,
    "line_end": 48
  },
  {
    "file_path": "qsimmine12\\app\\services\\date_time_service.py",
    "function_name": "_to_utc",
    "arguments": [
      "dt"
    ],
    "return_type": "datetime",
    "returns": [
      "dt.astimezone(ZoneInfo('UTC'))"
    ],
    "docstring": null,
    "line_start": 51,
    "line_end": 52
  },
  {
    "file_path": "qsimmine12\\app\\services\\date_time_service.py",
    "function_name": "__call__",
    "arguments": [
      "self"
    ],
    "return_type": "StartEndTimeDTO",
    "returns": [
      "StartEndTimeDTO(start_time=start_utc, end_time=end_utc)"
    ],
    "docstring": null,
    "line_start": 54,
    "line_end": 63
  },
  {
    "file_path": "qsimmine12\\app\\services\\object_service.py",
    "function_name": "__init__",
    "arguments": [
      "self",
      "db"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 20,
    "line_end": 21
  },
  {
    "file_path": "qsimmine12\\app\\services\\object_service.py",
    "function_name": "get_by_id",
    "arguments": [
      "self",
      "model",
      "obj_id"
    ],
    "return_type": null,
    "returns": [
      "self.db.execute(stmt).scalar()"
    ],
    "docstring": null,
    "line_start": 23,
    "line_end": 25
  },
  {
    "file_path": "qsimmine12\\app\\services\\object_service.py",
    "function_name": "delete_scenario_associations",
    "arguments": [
      "self",
      "scenario_id"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 27,
    "line_end": 32
  },
  {
    "file_path": "qsimmine12\\app\\services\\object_service.py",
    "function_name": "association_exists",
    "arguments": [
      "self",
      "scenario_id",
      "trail_id",
      "truck_id"
    ],
    "return_type": "bool",
    "returns": [
      "self.db.execute(stmt).scalar() is not None"
    ],
    "docstring": null,
    "line_start": 34,
    "line_end": 40
  },
  {
    "file_path": "qsimmine12\\app\\services\\object_service.py",
    "function_name": "create_association",
    "arguments": [
      "self",
      "scenario_id",
      "trail_id",
      "truck_id"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 42,
    "line_end": 48
  },
  {
    "file_path": "qsimmine12\\app\\services\\object_service.py",
    "function_name": "__init__",
    "arguments": [
      "self",
      "db"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 53,
    "line_end": 55
  },
  {
    "file_path": "qsimmine12\\app\\services\\object_service.py",
    "function_name": "create_object",
    "arguments": [
      "self",
      "data"
    ],
    "return_type": null,
    "returns": [
      "self._dispatch(data, action='create')"
    ],
    "docstring": null,
    "line_start": 57,
    "line_end": 58
  },
  {
    "file_path": "qsimmine12\\app\\services\\object_service.py",
    "function_name": "update_object",
    "arguments": [
      "self",
      "obj_id",
      "data"
    ],
    "return_type": null,
    "returns": [
      "self._dispatch(data, action='update')"
    ],
    "docstring": null,
    "line_start": 60,
    "line_end": 62
  },
  {
    "file_path": "qsimmine12\\app\\services\\object_service.py",
    "function_name": "_dispatch",
    "arguments": [
      "self",
      "data",
      "action"
    ],
    "return_type": null,
    "returns": [
      "service.process(data, action)"
    ],
    "docstring": null,
    "line_start": 64,
    "line_end": 80
  },
  {
    "file_path": "qsimmine12\\app\\services\\object_service.py",
    "function_name": "__init__",
    "arguments": [
      "self",
      "db",
      "dao",
      "model",
      "schema_cls"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 83,
    "line_end": 87
  },
  {
    "file_path": "qsimmine12\\app\\services\\object_service.py",
    "function_name": "_prepare_data",
    "arguments": [
      "self",
      "data",
      "action"
    ],
    "return_type": "dict",
    "returns": [
      "obj_data"
    ],
    "docstring": null,
    "line_start": 89,
    "line_end": 97
  },
  {
    "file_path": "qsimmine12\\app\\services\\object_service.py",
    "function_name": "_validate_form",
    "arguments": [
      "self",
      "obj_data"
    ],
    "return_type": null,
    "returns": [
      "self.schema_cls(**obj_data)"
    ],
    "docstring": null,
    "line_start": 99,
    "line_end": 106
  },
  {
    "file_path": "qsimmine12\\app\\services\\object_service.py",
    "function_name": "_get_or_create",
    "arguments": [
      "self",
      "obj_id",
      "action"
    ],
    "return_type": null,
    "returns": [
      "obj",
      "obj"
    ],
    "docstring": null,
    "line_start": 108,
    "line_end": 118
  },
  {
    "file_path": "qsimmine12\\app\\services\\object_service.py",
    "function_name": "_apply_form",
    "arguments": [
      "self",
      "form",
      "obj"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 120,
    "line_end": 125
  },
  {
    "file_path": "qsimmine12\\app\\services\\object_service.py",
    "function_name": "process",
    "arguments": [
      "self",
      "data",
      "action"
    ],
    "return_type": null,
    "returns": [
      "{'success': True, 'id': obj.id}"
    ],
    "docstring": null,
    "line_start": 129,
    "line_end": 156
  },
  {
    "file_path": "qsimmine12\\app\\services\\object_service.py",
    "function_name": "process",
    "arguments": [
      "self",
      "data",
      "action"
    ],
    "return_type": null,
    "returns": [
      "{'success': True, 'id': obj.id}",
      "form.handle_schedule_create(obj_data, self.model, schedule_type)"
    ],
    "docstring": null,
    "line_start": 160,
    "line_end": 173
  },
  {
    "file_path": "qsimmine12\\app\\services\\object_service.py",
    "function_name": "process",
    "arguments": [
      "self",
      "data",
      "action"
    ],
    "return_type": null,
    "returns": [
      "{'success': True, 'id': obj.id}"
    ],
    "docstring": null,
    "line_start": 177,
    "line_end": 199
  },
  {
    "file_path": "qsimmine12\\app\\services\\quarry_data_service.py",
    "function_name": "__init__",
    "arguments": [
      "self",
      "db_session"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 26,
    "line_end": 27
  },
  {
    "file_path": "qsimmine12\\app\\services\\quarry_data_service.py",
    "function_name": "fetch_all",
    "arguments": [
      "self",
      "model"
    ],
    "return_type": "List",
    "returns": [
      "self.db.execute(stmt).scalars().all()"
    ],
    "docstring": "Универсальный fetch для простых моделей: select(model).order_by(model.id.asc()).\nВозвращает список экземпляров модели.",
    "line_start": 29,
    "line_end": 35
  },
  {
    "file_path": "qsimmine12\\app\\services\\quarry_data_service.py",
    "function_name": "fetch_roadnet_id_pairs",
    "arguments": [
      "self"
    ],
    "return_type": "List[Tuple[int, int]]",
    "returns": [
      "self.db.execute(stmt).all()"
    ],
    "docstring": "Возвращает список (roadnet.id, roadnet.quarry_id) упорядоченных по id ASC.",
    "line_start": 37,
    "line_end": 42
  },
  {
    "file_path": "qsimmine12\\app\\services\\quarry_data_service.py",
    "function_name": "fetch_map_overlays_deferred_geojson",
    "arguments": [
      "self"
    ],
    "return_type": "List",
    "returns": [
      "self.db.execute(stmt).scalars().all()"
    ],
    "docstring": "Возвращает MapOverlay без подгрузки большого поля geojson_data.",
    "line_start": 44,
    "line_end": 49
  },
  {
    "file_path": "qsimmine12\\app\\services\\quarry_data_service.py",
    "function_name": "fetch_trails_with_quarry_id",
    "arguments": [
      "self"
    ],
    "return_type": "List[Tuple['Trail', int]]",
    "returns": [
      "self.db.execute(stmt).all()"
    ],
    "docstring": "Возвращает список кортежей (Trail, quarry_id) — делается join через Shovel.\nТакже подгружаем associations (selectinload).",
    "line_start": 51,
    "line_end": 62
  },
  {
    "file_path": "qsimmine12\\app\\services\\quarry_data_service.py",
    "function_name": "__init__",
    "arguments": [
      "self",
      "db_session"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 82,
    "line_end": 83
  },
  {
    "file_path": "qsimmine12\\app\\services\\quarry_data_service.py",
    "function_name": "_model_to_dict",
    "arguments": [
      "model",
      "instance"
    ],
    "return_type": "Dict[str, Any]",
    "returns": [
      "{col_name: getattr(instance, col_name) for col_name in column_names}"
    ],
    "docstring": "Преобразовать экземпляр модели в словарь по колонкам таблицы.",
    "line_start": 86,
    "line_end": 91
  },
  {
    "file_path": "qsimmine12\\app\\services\\quarry_data_service.py",
    "function_name": "__call__",
    "arguments": [
      "self"
    ],
    "return_type": "QuarryDataDTO",
    "returns": [
      "dto"
    ],
    "docstring": "Выполнить сбор всей информации и вернуть QuarryDataDTO.",
    "line_start": 93,
    "line_end": 116
  },
  {
    "file_path": "qsimmine12\\app\\services\\quarry_data_service.py",
    "function_name": "_init_quarries",
    "arguments": [
      "self",
      "quarry_map"
    ],
    "return_type": null,
    "returns": [],
    "docstring": "Создаёт запись в quarry_map для каждого Quarry: копирует все колонки таблицы\nи создаёт пустые списки для связанных коллекций.",
    "line_start": 118,
    "line_end": 133
  },
  {
    "file_path": "qsimmine12\\app\\services\\quarry_data_service.py",
    "function_name": "_load_related_models",
    "arguments": [
      "self",
      "quarry_map"
    ],
    "return_type": null,
    "returns": [],
    "docstring": "Загружает простые связанные сущности (без специальных преобразований).",
    "line_start": 135,
    "line_end": 149
  },
  {
    "file_path": "qsimmine12\\app\\services\\quarry_data_service.py",
    "function_name": "_apply_roadnet",
    "arguments": [
      "self",
      "quarry_map"
    ],
    "return_type": null,
    "returns": [],
    "docstring": "Устанавливает первую встреченную roadnet.id для каждого карьера (roadnet_id).",
    "line_start": 151,
    "line_end": 160
  },
  {
    "file_path": "qsimmine12\\app\\services\\quarry_data_service.py",
    "function_name": "_load_map_overlays",
    "arguments": [
      "self",
      "quarry_map"
    ],
    "return_type": null,
    "returns": [],
    "docstring": "Загружает MapOverlay без поля geojson_data.",
    "line_start": 162,
    "line_end": 175
  },
  {
    "file_path": "qsimmine12\\app\\services\\quarry_data_service.py",
    "function_name": "_load_trails",
    "arguments": [
      "self",
      "quarry_map"
    ],
    "return_type": null,
    "returns": [],
    "docstring": "Загружает Trail c преобразованием raw_graph -> segments и сбором truck_associations.\nDAO возвращает [(Trail, quarry_id), ...]",
    "line_start": 177,
    "line_end": 209
  },
  {
    "file_path": "qsimmine12\\app\\services\\scenario_service.py",
    "function_name": "__init__",
    "arguments": [
      "self",
      "db_session"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 34,
    "line_end": 35
  },
  {
    "file_path": "qsimmine12\\app\\services\\scenario_service.py",
    "function_name": "fetch_all_with_assocs",
    "arguments": [
      "self"
    ],
    "return_type": "List[Scenario]",
    "returns": [
      "self.db.execute(stmt).scalars().all()"
    ],
    "docstring": "Возвращает все Scenario.",
    "line_start": 37,
    "line_end": 49
  },
  {
    "file_path": "qsimmine12\\app\\services\\scenario_service.py",
    "function_name": "fetch_trails_by_quarry",
    "arguments": [
      "self",
      "quarry_id"
    ],
    "return_type": "List[Trail]",
    "returns": [
      "self.db.execute(stmt).scalars().all()"
    ],
    "docstring": "Возвращает Trail, принадлежащие карьерам quarry_id (через Shovel).",
    "line_start": 51,
    "line_end": 62
  },
  {
    "file_path": "qsimmine12\\app\\services\\scenario_service.py",
    "function_name": "__init__",
    "arguments": [
      "self",
      "db_session"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 67,
    "line_end": 68
  },
  {
    "file_path": "qsimmine12\\app\\services\\scenario_service.py",
    "function_name": "__call__",
    "arguments": [
      "self"
    ],
    "return_type": "List[ScenarioDTO]",
    "returns": [
      "[self._scenario_to_dto(scenario) for scenario in scenarios]"
    ],
    "docstring": null,
    "line_start": 70,
    "line_end": 72
  },
  {
    "file_path": "qsimmine12\\app\\services\\scenario_service.py",
    "function_name": "_scenario_to_dto",
    "arguments": [
      "self",
      "scenario"
    ],
    "return_type": "ScenarioDTO",
    "returns": [
      "ScenarioDTO(id=scenario.id, name=scenario.name, start_time=getattr(scenario, 'start_time', None), end_time=getattr(scenario, 'end_time', None), quarry_id=getattr(scenario, 'quarry_id', None), is_auto_truck_distribution=getattr(scenario, 'is_auto_truck_distribution', None), is_calc_reliability_enabled=getattr(scenario, 'is_calc_reliability_enabled', None), trails=trails)"
    ],
    "docstring": null,
    "line_start": 74,
    "line_end": 87
  },
  {
    "file_path": "qsimmine12\\app\\services\\scenario_service.py",
    "function_name": "_build_assoc_map",
    "arguments": [
      "self",
      "scenario"
    ],
    "return_type": "Dict[int, List[int]]",
    "returns": [
      "assoc_by_trail"
    ],
    "docstring": null,
    "line_start": 89,
    "line_end": 97
  },
  {
    "file_path": "qsimmine12\\app\\services\\scenario_service.py",
    "function_name": "_load_and_transform_trails",
    "arguments": [
      "self",
      "quarry_id",
      "assoc_by_trail"
    ],
    "return_type": "List[TrailDTO]",
    "returns": [
      "trails_dto",
      "[]"
    ],
    "docstring": null,
    "line_start": 99,
    "line_end": 111
  },
  {
    "file_path": "qsimmine12\\app\\services\\scenario_service.py",
    "function_name": "_trail_to_dto",
    "arguments": [
      "self",
      "trail",
      "assoc_by_trail"
    ],
    "return_type": "TrailDTO",
    "returns": [
      "TrailDTO(id=trail.id, trail_type=trail.trail_type, shovel_id=trail.shovel_id, unload_id=trail.unload_id, segments=segments, trucks=trucks_in_scenario)"
    ],
    "docstring": null,
    "line_start": 113,
    "line_end": 124
  },
  {
    "file_path": "qsimmine12\\app\\services\\scenario_service.py",
    "function_name": "_parse_segments",
    "arguments": [
      "raw_graph"
    ],
    "return_type": "List[Any]",
    "returns": [
      "[]",
      "parsed if isinstance(parsed, list) else []",
      "[]"
    ],
    "docstring": null,
    "line_start": 127,
    "line_end": 135
  },
  {
    "file_path": "qsimmine12\\app\\services\\schedule_data_service.py",
    "function_name": "__init__",
    "arguments": [
      "self",
      "db_session"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 45,
    "line_end": 46
  },
  {
    "file_path": "qsimmine12\\app\\services\\schedule_data_service.py",
    "function_name": "fetch_filtered",
    "arguments": [
      "self",
      "model",
      "start_time_utc",
      "end_time_utc",
      "quarry_id",
      "schedule_type"
    ],
    "return_type": "List[ScheduleItemDTO]",
    "returns": [
      "items"
    ],
    "docstring": "Возвращает список отфильтрованных элементов расписания в виде DTO.",
    "line_start": 48,
    "line_end": 83
  },
  {
    "file_path": "qsimmine12\\app\\services\\schedule_data_service.py",
    "function_name": "__init__",
    "arguments": [
      "self",
      "db_session"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 90,
    "line_end": 92
  },
  {
    "file_path": "qsimmine12\\app\\services\\schedule_data_service.py",
    "function_name": "__call__",
    "arguments": [
      "self",
      "model",
      "date_str",
      "quarry_id",
      "schedule_type",
      "enterprise_tz",
      "shift_number",
      "start_time",
      "end_time"
    ],
    "return_type": "ScheduleDataResponseDTO",
    "returns": [
      "ScheduleDataResponseDTO(time={'start_time': start_time_utc.isoformat(), 'end_time': end_time_utc.isoformat()}, filters={'date': date_str, 'quarry_id': quarry_id, 'type': schedule_type, 'shift_number': shift_number, 'start_time': start_time, 'end_time': end_time}, items=items, shift_details=ShiftDetailsDTO(number=target_shift.number, begin_time_enterprise=target_shift.begin_time.isoformat(), end_time_enterprise=target_shift.end_time.isoformat(), day=target_shift.day.isoformat()) if target_shift else None)"
    ],
    "docstring": "Основная точка входа.",
    "line_start": 94,
    "line_end": 148
  },
  {
    "file_path": "qsimmine12\\app\\services\\schedule_data_service.py",
    "function_name": "_resolve_time_window",
    "arguments": [
      "self",
      "quarry",
      "date_str",
      "enterprise_tz",
      "shift_number",
      "start_time",
      "end_time"
    ],
    "return_type": null,
    "returns": [
      "(start_time_utc, end_time_utc, target_shift)"
    ],
    "docstring": "Определяет временной диапазон по номеру смены или вручную заданным временам.",
    "line_start": 152,
    "line_end": 201
  },
  {
    "file_path": "qsimmine12\\app\\services\\simulation_id_service.py",
    "function_name": "validate_quarry",
    "arguments": [
      "cls",
      "v"
    ],
    "return_type": null,
    "returns": [
      "v"
    ],
    "docstring": null,
    "line_start": 30,
    "line_end": 33
  },
  {
    "file_path": "qsimmine12\\app\\services\\simulation_id_service.py",
    "function_name": "validate_times",
    "arguments": [
      "cls",
      "v",
      "info"
    ],
    "return_type": null,
    "returns": [
      "v",
      "v"
    ],
    "docstring": null,
    "line_start": 37,
    "line_end": 51
  },
  {
    "file_path": "qsimmine12\\app\\services\\simulation_id_service.py",
    "function_name": "__init__",
    "arguments": [
      "self",
      "db_session"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 56,
    "line_end": 57
  },
  {
    "file_path": "qsimmine12\\app\\services\\simulation_id_service.py",
    "function_name": "fetch_road_net_by_id",
    "arguments": [
      "self",
      "road_net_id"
    ],
    "return_type": null,
    "returns": [
      "self.db.execute(stmt).scalar()"
    ],
    "docstring": null,
    "line_start": 59,
    "line_end": 61
  },
  {
    "file_path": "qsimmine12\\app\\services\\simulation_id_service.py",
    "function_name": "get_filtered_schedule_items",
    "arguments": [
      "self",
      "model",
      "start_time_utc",
      "end_time_utc",
      "quarry_id",
      "schedule_type"
    ],
    "return_type": "list",
    "returns": [
      "item_list"
    ],
    "docstring": null,
    "line_start": 63,
    "line_end": 88
  },
  {
    "file_path": "qsimmine12\\app\\services\\simulation_id_service.py",
    "function_name": "fetch_schedules",
    "arguments": [
      "self",
      "quarry_id",
      "start_time",
      "end_time"
    ],
    "return_type": "dict",
    "returns": [
      "schedules"
    ],
    "docstring": "Получает blasting и planned_idle расписания для карьера.",
    "line_start": 92,
    "line_end": 103
  },
  {
    "file_path": "qsimmine12\\app\\services\\simulation_id_service.py",
    "function_name": "__init__",
    "arguments": [
      "self",
      "data",
      "db",
      "redis_client"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 108,
    "line_end": 112
  },
  {
    "file_path": "qsimmine12\\app\\services\\simulation_id_service.py",
    "function_name": "__call__",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "sim_id"
    ],
    "docstring": null,
    "line_start": 114,
    "line_end": 162
  },
  {
    "file_path": "qsimmine12\\app\\services\\simulation_id_service.py",
    "function_name": "_store_simulation_data",
    "arguments": [
      "self",
      "sim_key_base",
      "sim_data",
      "ttl"
    ],
    "return_type": null,
    "returns": [],
    "docstring": "Сохраняет результаты симуляции в Redis.",
    "line_start": 165,
    "line_end": 174
  },
  {
    "file_path": "qsimmine12\\app\\services\\simulation_id_service.py",
    "function_name": "_cleanup_old_simulations",
    "arguments": [
      "self",
      "sim_key_base"
    ],
    "return_type": null,
    "returns": [],
    "docstring": "Удаляет старые симуляции, если их слишком много.",
    "line_start": 176,
    "line_end": 196
  },
  {
    "file_path": "qsimmine12\\app\\services\\template_service.py",
    "function_name": "__init__",
    "arguments": [
      "self",
      "db_session"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 21,
    "line_end": 22
  },
  {
    "file_path": "qsimmine12\\app\\services\\template_service.py",
    "function_name": "fetch_all",
    "arguments": [
      "self",
      "model"
    ],
    "return_type": "List",
    "returns": [
      "result"
    ],
    "docstring": "Вернуть все строки модели, упорядоченные по id ASC.",
    "line_start": 24,
    "line_end": 30
  },
  {
    "file_path": "qsimmine12\\app\\services\\template_service.py",
    "function_name": "__init__",
    "arguments": [
      "self",
      "db_session"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 47,
    "line_end": 48
  },
  {
    "file_path": "qsimmine12\\app\\services\\template_service.py",
    "function_name": "_model_to_dict_list",
    "arguments": [
      "model",
      "instances"
    ],
    "return_type": "List[Dict[str, Any]]",
    "returns": [
      "[{col_name: getattr(inst, col_name) for col_name in column_names} for inst in instances]"
    ],
    "docstring": "Преобразование модели в List[Dict].",
    "line_start": 51,
    "line_end": 60
  },
  {
    "file_path": "qsimmine12\\app\\services\\template_service.py",
    "function_name": "_generate_templates_dict",
    "arguments": [
      "self"
    ],
    "return_type": "Dict[str, List[Dict[str, Any]]]",
    "returns": [
      "result"
    ],
    "docstring": "Генерация словаря для шаблонов.",
    "line_start": 62,
    "line_end": 70
  },
  {
    "file_path": "qsimmine12\\app\\services\\template_service.py",
    "function_name": "__call__",
    "arguments": [
      "self"
    ],
    "return_type": "AllTemplatesDTO",
    "returns": [
      "AllTemplatesDTO(**dto_payload)"
    ],
    "docstring": null,
    "line_start": 72,
    "line_end": 82
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\enums.py",
    "function_name": "__str__",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "self.key()"
    ],
    "docstring": null,
    "line_start": 13,
    "line_end": 14
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\enums.py",
    "function_name": "ru",
    "arguments": [
      "self"
    ],
    "return_type": "str",
    "returns": [
      "self.value[2]"
    ],
    "docstring": null,
    "line_start": 16,
    "line_end": 17
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\enums.py",
    "function_name": "key",
    "arguments": [
      "self"
    ],
    "return_type": "str",
    "returns": [
      "self.value[1]"
    ],
    "docstring": null,
    "line_start": 19,
    "line_end": 20
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\enums.py",
    "function_name": "code",
    "arguments": [
      "self"
    ],
    "return_type": "int",
    "returns": [
      "self.value[0]"
    ],
    "docstring": null,
    "line_start": 22,
    "line_end": 23
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\enums.py",
    "function_name": "__str__",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "self.key()"
    ],
    "docstring": null,
    "line_start": 32,
    "line_end": 33
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\enums.py",
    "function_name": "ru",
    "arguments": [
      "self"
    ],
    "return_type": "str",
    "returns": [
      "self.value[2]"
    ],
    "docstring": null,
    "line_start": 35,
    "line_end": 36
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\enums.py",
    "function_name": "key",
    "arguments": [
      "self"
    ],
    "return_type": "str",
    "returns": [
      "self.value[1]"
    ],
    "docstring": null,
    "line_start": 38,
    "line_end": 39
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\enums.py",
    "function_name": "code",
    "arguments": [
      "self"
    ],
    "return_type": "int",
    "returns": [
      "self.value[0]"
    ],
    "docstring": null,
    "line_start": 41,
    "line_end": 42
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\events.py",
    "function_name": "__str__",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "self.value[1]"
    ],
    "docstring": null,
    "line_start": 29,
    "line_end": 30
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\events.py",
    "function_name": "code",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "self.value[0]"
    ],
    "docstring": null,
    "line_start": 32,
    "line_end": 33
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\events.py",
    "function_name": "ru",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "self.value[2]"
    ],
    "docstring": null,
    "line_start": 35,
    "line_end": 36
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\events.py",
    "function_name": "en",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "self.value[1]"
    ],
    "docstring": null,
    "line_start": 38,
    "line_end": 39
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\planner.py",
    "function_name": "truck_ids",
    "arguments": [
      "self"
    ],
    "return_type": "List[int]",
    "returns": [
      "sorted({i for i, _ in self.T_load.keys()})"
    ],
    "docstring": null,
    "line_start": 53,
    "line_end": 54
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\planner.py",
    "function_name": "shovel_ids",
    "arguments": [
      "self"
    ],
    "return_type": "List[int]",
    "returns": [
      "sorted({j for _, j in self.T_load.keys()})"
    ],
    "docstring": null,
    "line_start": 57,
    "line_end": 58
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\planner.py",
    "function_name": "unload_ids",
    "arguments": [
      "self"
    ],
    "return_type": "List[int]",
    "returns": [
      "sorted({z for _, z in self.T_unload.keys()})"
    ],
    "docstring": null,
    "line_start": 61,
    "line_end": 62
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\planner.py",
    "function_name": "compute_Kmax_i",
    "arguments": [
      "inst",
      "i"
    ],
    "return_type": "int",
    "returns": [
      "max(0, floor(available / max(1, min_d)))"
    ],
    "docstring": "Грубая верхняя граница числа рейсов для самосвала i",
    "line_start": 65,
    "line_end": 76
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\planner.py",
    "function_name": "default_Kmax",
    "arguments": [
      "inst"
    ],
    "return_type": "Dict[int, int]",
    "returns": [
      "{i: compute_Kmax_i(inst, i) for i in inst.truck_ids}"
    ],
    "docstring": "Если Kmax не задан, вычислить его для каждого самосвала",
    "line_start": 79,
    "line_end": 81
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\planner.py",
    "function_name": "build_model",
    "arguments": [
      "inst",
      "shovel_queue"
    ],
    "return_type": null,
    "returns": [
      "(model, vars_pack)",
      "lpSum((x[i, k, j, z] for z in Z))",
      "lpSum((x[i, k, j, z] for j in J))"
    ],
    "docstring": "Собираем все ограничения и условия поиска решения",
    "line_start": 84,
    "line_end": 243
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\planner.py",
    "function_name": "a_use",
    "arguments": [
      "i",
      "k",
      "j"
    ],
    "return_type": null,
    "returns": [
      "lpSum((x[i, k, j, z] for z in Z))"
    ],
    "docstring": null,
    "line_start": 136,
    "line_end": 137
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\planner.py",
    "function_name": "b_use",
    "arguments": [
      "i",
      "k",
      "z"
    ],
    "return_type": null,
    "returns": [
      "lpSum((x[i, k, j, z] for j in J))"
    ],
    "docstring": null,
    "line_start": 139,
    "line_end": 140
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\planner.py",
    "function_name": "solve_and_extract",
    "arguments": [
      "inst"
    ],
    "return_type": null,
    "returns": [
      "result",
      "result"
    ],
    "docstring": "Решить модель и получить расписание\n    ",
    "line_start": 246,
    "line_end": 319
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\planner.py",
    "function_name": "build_cp_model",
    "arguments": [
      "inst",
      "use_individual_kmax"
    ],
    "return_type": null,
    "returns": [
      "(model, V)"
    ],
    "docstring": null,
    "line_start": 323,
    "line_end": 452
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\planner.py",
    "function_name": "solve_and_extract_cp",
    "arguments": [
      "inst",
      "time_limit",
      "num_workers"
    ],
    "return_type": null,
    "returns": [
      "result",
      "result"
    ],
    "docstring": "Решение CP‑SAT и извлечение расписания в прежнем формате.",
    "line_start": 455,
    "line_end": 545
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\planner.py",
    "function_name": "make_example",
    "arguments": [],
    "return_type": "InputPlanningData",
    "returns": [
      "InputPlanningData(N=N, M=M, Z=Z, D_work=D_work, T_haul=T_haul, T_return=T_return, T_load=T_load, T_unload=T_unload, T_start=T_start, T_end=T_end, m_tons=m_tons)"
    ],
    "docstring": "Заполняем исходные данные\nКоличество техники, матрица времен выполнение каждой операции (полный перебор)",
    "line_start": 548,
    "line_end": 595
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\planner.py",
    "function_name": "dummy_func",
    "arguments": [],
    "return_type": null,
    "returns": [
      "0"
    ],
    "docstring": null,
    "line_start": 598,
    "line_end": 599
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\planner.py",
    "function_name": "get_planning_data",
    "arguments": [
      "simdata"
    ],
    "return_type": "InputPlanningData",
    "returns": [
      "planning_data"
    ],
    "docstring": "Метод набивающий матрицу данных",
    "line_start": 602,
    "line_end": 729
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\planner.py",
    "function_name": "run_planning",
    "arguments": [
      "simdata"
    ],
    "return_type": null,
    "returns": [
      "out"
    ],
    "docstring": null,
    "line_start": 732,
    "line_end": 747
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\planner.py",
    "function_name": "run_planning_trips",
    "arguments": [
      "sim_data",
      "exclude_objects"
    ],
    "return_type": "dict",
    "returns": [
      "planned_trips",
      "{}"
    ],
    "docstring": null,
    "line_start": 750,
    "line_end": 784
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\reliability.py",
    "function_name": "extract_metric",
    "arguments": [
      "runs",
      "metric"
    ],
    "return_type": "np.ndarray",
    "returns": [
      "x[~np.isnan(x)]"
    ],
    "docstring": "Извлекает выбранную метрику из первых записей\n\nПараметры:\n    runs   : исходные записи симуляций\n    metric : название метрики: \"trips\" | \"volume\" | \"weight\"\n\nВозвращает:\n    Массив значений выбранной метрики без пропусков.",
    "line_start": 18,
    "line_end": 43
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\reliability.py",
    "function_name": "descriptive_stats",
    "arguments": [
      "x"
    ],
    "return_type": "dict",
    "returns": [
      "dict(n=n, mean=m, std=s, median=med, q1=q1, q3=q3, iqr=iqr, skew=sk, kurtosis=kurt, xmin=float(np.min(x)), xmax=float(np.max(x)))"
    ],
    "docstring": "Краткая описательная статистика, полезная для понимания формы распределения\n\nВозвращает:\n    n        : объём выборки\n    mean     : среднее\n    std      : выборочное стандартное отклонение\n    median   : медиана\n    q1, q3   : квартильный интервал\n    iqr      : межквартильный размах\n    skew     : асимметрия\n    kurtosis : избыточный эксцесс\n    xmin,xmax: минимальное и максимальное наблюдения",
    "line_start": 50,
    "line_end": 75
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\reliability.py",
    "function_name": "predictive_interval_t",
    "arguments": [
      "x",
      "alpha"
    ],
    "return_type": "tuple[float, float]",
    "returns": [
      "(m - half, m + half)",
      "(np.nan, np.nan)",
      "(m, m)"
    ],
    "docstring": "Двусторонний t-предиктивный интервал уровня 1-α для будущего наблюдения\n\nИдея:\n    Если данные близки к симметрии и нормальности, то\n    (X_new - среднее)/[S*sqrt(1+1/n)] ~ t_{n-1}.\n    Отсюда границы: среднее ± t_{1-α/2, n-1} * S * sqrt(1+1/n).\n\nВозвращает:\n    (нижняя, верхняя) границы вероятностного коридора",
    "line_start": 82,
    "line_end": 105
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\reliability.py",
    "function_name": "robust_pi_quantiles",
    "arguments": [
      "x",
      "alpha"
    ],
    "return_type": "tuple[float, float]",
    "returns": [
      "(float(lo), float(hi))",
      "(np.nan, np.nan)"
    ],
    "docstring": "Робастный предиктивный интервал по эмпирическим квантилям.\n\nИдея:\n    Никаких предположений о форме: берём квантиль α/2 и 1-α/2.\n    Интервал естественно подстраивается под асимметрию распределения",
    "line_start": 107,
    "line_end": 119
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\reliability.py",
    "function_name": "split_conformal_pi",
    "arguments": [
      "x",
      "alpha",
      "seed"
    ],
    "return_type": "tuple[float, float]",
    "returns": [
      "(mu - q, mu + q)",
      "(np.nan, np.nan)",
      "(float(x[0]), float(x[0]))"
    ],
    "docstring": "Симметричный split-conformal интервал с гарантией покрытия ≈ 1-α\n\nИдея:\n    Делим данные на обучение и калибровку.\n    На обучении считаем центр (среднее), на калибровке - остатки |X-центр|\n    Берём дискретный квантиль остатка уровня 1-α\n    симметрично откладываем от центра.",
    "line_start": 121,
    "line_end": 148
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\reliability.py",
    "function_name": "lognormal_pi",
    "arguments": [
      "x",
      "alpha"
    ],
    "return_type": "tuple[float, float]",
    "returns": [
      "(float(np.exp(m - half)), float(np.exp(m + half)))",
      "predictive_interval_t(x, alpha=alpha)"
    ],
    "docstring": "Интервал при лог-нормальной аппроксимации",
    "line_start": 150,
    "line_end": 162
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\reliability.py",
    "function_name": "kde_hdi",
    "arguments": [
      "x",
      "alpha",
      "grids"
    ],
    "return_type": "tuple[float, float]",
    "returns": [
      "(float(sel[0]), float(sel[-1]))",
      "(float(np.min(x)), float(np.max(x)))"
    ],
    "docstring": "Интервал наибольшей плотности (HDI) по сглаженной оценке плотности (KDE).",
    "line_start": 169,
    "line_end": 185
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\reliability.py",
    "function_name": "bootstrap_pi",
    "arguments": [
      "x",
      "alpha",
      "B",
      "seed"
    ],
    "return_type": "tuple[float, float]",
    "returns": [
      "(float(lo), float(hi))"
    ],
    "docstring": "Бутстрэп-интервал (перцентильный): эмпирическое предиктивное распределение.",
    "line_start": 187,
    "line_end": 195
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\reliability.py",
    "function_name": "jackknife_plus_pi",
    "arguments": [
      "x",
      "alpha"
    ],
    "return_type": "tuple[float, float]",
    "returns": [
      "(float(mu_full - q), float(mu_full + q))",
      "predictive_interval_t(x, alpha=alpha)"
    ],
    "docstring": "Интервал Jackknife+",
    "line_start": 197,
    "line_end": 209
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\reliability.py",
    "function_name": "split_conformal_asymmetric",
    "arguments": [
      "x",
      "alpha",
      "seed"
    ],
    "return_type": "tuple[float, float]",
    "returns": [
      "(float(mu + q_lo), float(mu + q_hi))",
      "(np.nan, np.nan)",
      "(float(x[0]), float(x[0]))"
    ],
    "docstring": "Асимметричный split-conformal",
    "line_start": 211,
    "line_end": 229
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\reliability.py",
    "function_name": "yeojohnson_pi",
    "arguments": [
      "x",
      "alpha"
    ],
    "return_type": "tuple[float, float]",
    "returns": [
      "(lo, hi)",
      "predictive_interval_t(x, alpha=alpha)",
      "out"
    ],
    "docstring": "Интервал на основе преобразования Йео–Джонсона",
    "line_start": 231,
    "line_end": 283
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\reliability.py",
    "function_name": "inv_yj",
    "arguments": [
      "yv",
      "lmbda"
    ],
    "return_type": "np.ndarray",
    "returns": [
      "out"
    ],
    "docstring": null,
    "line_start": 250,
    "line_end": 278
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\reliability.py",
    "function_name": "half_sample_mode",
    "arguments": [
      "x"
    ],
    "return_type": "float",
    "returns": [
      "half_sample_mode(y[j:j + k + n % 2])",
      "float(np.mean(y))"
    ],
    "docstring": "Робастная мода (Half-Sample Mode, HSM).",
    "line_start": 285,
    "line_end": 296
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\reliability.py",
    "function_name": "kde_mode",
    "arguments": [
      "x",
      "grids"
    ],
    "return_type": "float",
    "returns": [
      "float(grid[np.argmax(dens)])"
    ],
    "docstring": "Мода по сглаженной плотности (KDE)",
    "line_start": 298,
    "line_end": 305
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\reliability.py",
    "function_name": "loo_coverage",
    "arguments": [
      "x",
      "get_interval",
      "alpha"
    ],
    "return_type": "float",
    "returns": [
      "inside / n",
      "np.nan"
    ],
    "docstring": "Эмпирическое покрытие leave-one-out кросс-валидайция",
    "line_start": 312,
    "line_end": 326
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\reliability.py",
    "function_name": "pit_values_t_predictive",
    "arguments": [
      "x"
    ],
    "return_type": "np.ndarray",
    "returns": [
      "stats.t.cdf(z, df=max(n - 1, 1))"
    ],
    "docstring": "PIT (вероятностное преобразование) для t-предиктивной модели",
    "line_start": 328,
    "line_end": 338
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\reliability.py",
    "function_name": "interval_width",
    "arguments": [
      "iv"
    ],
    "return_type": "float",
    "returns": [
      "float(hi - lo) if np.isfinite(hi) and np.isfinite(lo) else np.inf"
    ],
    "docstring": "Ширина интервала. Если границы нечисловые - вернуть бесконечность,\nчтобы такой метод оказался в конце при сравнении",
    "line_start": 345,
    "line_end": 351
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\reliability.py",
    "function_name": "select_best_interval",
    "arguments": [
      "alpha",
      "intervals",
      "coverages",
      "skew",
      "tol"
    ],
    "return_type": "tuple[str, tuple[float, float], str]",
    "returns": [
      "(best, iv, '; '.join(reasons))",
      "(ok, -shortfall, robust_bonus, -width)",
      "(0, 1.0, 0, -width)"
    ],
    "docstring": "Выбирает лучший интервал по простому и понятному правилу.\n\nПравило:\n    1) Сначала фильтруем методы с покрытием LOO не хуже цели (1-α-допуск)\n    2) Среди них берём наименьшую ширину\n    3) При сильной асимметрии (|skew|>1) отдаём предпочтение робастным методам\n\nВозвращает:\n    (название метода, его интервал, строка-обоснование выбора)",
    "line_start": 353,
    "line_end": 408
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\reliability.py",
    "function_name": "score",
    "arguments": [
      "name"
    ],
    "return_type": null,
    "returns": [
      "(ok, -shortfall, robust_bonus, -width)",
      "(0, 1.0, 0, -width)"
    ],
    "docstring": null,
    "line_start": 377,
    "line_end": 390
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\reliability.py",
    "function_name": "assess_stability",
    "arguments": [
      "results",
      "metric",
      "prev_metric_median",
      "cur_stable_streak",
      "alpha",
      "r_target",
      "delta_target",
      "consecutive"
    ],
    "return_type": "tuple[bool, np.ndarray, float, int]",
    "returns": [
      "(stability_achieved, metric_array, metric_median, stable_streak)"
    ],
    "docstring": "Оценка стабильности переданного набора данных с учётом предыдущих оценок на более\nузкой выборке (от предыдущего запуска требуются `prev_metric_median` и `cur_stable_streak`).\n\nКритерии оценки:\n    1) Относительная половина ширины t-интервала мала:\n       ((верх - низ)/2) / |медиана| ≤ r_target.\n       Это означает, что коридор неопределённости относительно уровня\n       метрики уже достаточно узок\n    2) Медиана почти не меняется относительно предыдущего шага:\n       |сдвиг медианы| / |медиана| ≤ delta_target\n\nПараметр `consecutive` требует, чтобы оба условия выполнялись указанное\nчисло шагов подряд - так мы избегаем преждевременной остановки\nиз-за случайных колебаний",
    "line_start": 415,
    "line_end": 472
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\reliability.py",
    "function_name": "calc_reliability",
    "arguments": [
      "metric_array",
      "alpha",
      "boot_b",
      "seed"
    ],
    "return_type": "tuple[float, float, float]",
    "returns": [
      "(mode_hsm, best_lo, best_hi)"
    ],
    "docstring": "Расчёт наиболее правдоподобного значения на основании стабильной выборки данных",
    "line_start": 475,
    "line_end": 561
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\reliability.py",
    "function_name": "find_closest_result",
    "arguments": [
      "results",
      "metric_reliable",
      "metric_best_max",
      "metric"
    ],
    "return_type": "dict",
    "returns": [
      "closest_result"
    ],
    "docstring": "Поиск ближайшего к правдоподобному значению результата, не превышающего лучшее максимальное",
    "line_start": 564,
    "line_end": 582
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\serializer.py",
    "function_name": "calculate_lunch_breaks",
    "arguments": [
      "start_time",
      "end_time",
      "shift_config",
      "lunch_break_offset",
      "lunch_break_duration"
    ],
    "return_type": null,
    "returns": [
      "lunch_breaks"
    ],
    "docstring": "Расчитывает обеденные перерывы в заданном временном интервале",
    "line_start": 17,
    "line_end": 63
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\serializer.py",
    "function_name": "collect_planned_idles",
    "arguments": [
      "idles_data"
    ],
    "return_type": null,
    "returns": [
      "result"
    ],
    "docstring": "Организует список плановых простоев в словарь,\nсгруппированный по vehicle_type и vehicle_id,\nс сортировкой по start_time.\n\nArgs:\n    idles_data (list): Список словарей с информацией о простоях\n\nReturns:\n    dict: Словарь вида {(vehicle_type, vehicle_id): [sorted_downtimes]}}",
    "line_start": 66,
    "line_end": 105
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\serializer.py",
    "function_name": "create_blasting_list",
    "arguments": [
      "data",
      "timezone"
    ],
    "return_type": "list[Blasting]",
    "returns": [
      "blasting_list"
    ],
    "docstring": "Создает список объектов Blasting из данных взрывных работ.\n\nArgs:\n    data: Словарь с данными взрывных работ\n    timezone: Часовой пояс\n\nReturns:\n    List[Blasting]: Отсортированный по start_time список объектов Blasting",
    "line_start": 108,
    "line_end": 142
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\serializer.py",
    "function_name": "serialize",
    "arguments": [
      "cls",
      "data"
    ],
    "return_type": "SimData",
    "returns": [
      "SimData(start_time=start_time, end_time=end_time, duration=seconds, seed=seed, trucks=trucks, shovels=shovels, unloads=unloads, fuel_stations=fuel_stations, routes=routes, road_net=data['quarry']['road_net'], idle_areas=idle_areas_storage, lunch_times=lunch_times, planned_idles=planned_idles, blasting_list=blasting_list)"
    ],
    "docstring": null,
    "line_start": 149,
    "line_end": 329
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\simulate.py",
    "function_name": "sim_data_validate",
    "arguments": [
      "func"
    ],
    "return_type": null,
    "returns": [
      "wrapper",
      "result"
    ],
    "docstring": null,
    "line_start": 25,
    "line_end": 36
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\simulate.py",
    "function_name": "wrapper",
    "arguments": [],
    "return_type": null,
    "returns": [
      "result"
    ],
    "docstring": null,
    "line_start": 27,
    "line_end": 34
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\simulate.py",
    "function_name": "run_simulation",
    "arguments": [
      "sim_data",
      "writer",
      "sim_conf"
    ],
    "return_type": "dict",
    "returns": [
      "result"
    ],
    "docstring": "Run simulation with manual truck routes\n\nThis func needs to be **picklable** for `run_reliability` (multiprocessing limitations)",
    "line_start": 40,
    "line_end": 159
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\simulate.py",
    "function_name": "run_simulation_for_planned_trips",
    "arguments": [
      "sim_data",
      "writer",
      "planned_trips",
      "sim_conf"
    ],
    "return_type": "dict",
    "returns": [
      "result"
    ],
    "docstring": "Run simulation with auto truck routes\n\nThis func needs to be **picklable** for `run_reliability` (multiprocessing limitations)",
    "line_start": 162,
    "line_end": 258
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\simulate.py",
    "function_name": "run_reliability",
    "arguments": [
      "run_func",
      "sim_data",
      "writer",
      "sim_conf"
    ],
    "return_type": "dict",
    "returns": [
      "final_result"
    ],
    "docstring": "Run given simulation engaging reliablility calculation\n\n`run_func` needs to be **picklable** (multiprocessing limitations)",
    "line_start": 261,
    "line_end": 370
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\simulation_manager.py",
    "function_name": "validate",
    "arguments": [
      "data"
    ],
    "return_type": "Any",
    "returns": [],
    "docstring": null,
    "line_start": 48,
    "line_end": 49
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\simulation_manager.py",
    "function_name": "validate",
    "arguments": [
      "data"
    ],
    "return_type": "dict",
    "returns": [
      "data"
    ],
    "docstring": null,
    "line_start": 54,
    "line_end": 59
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\simulation_manager.py",
    "function_name": "validate",
    "arguments": [
      "data"
    ],
    "return_type": "dict",
    "returns": [
      "data"
    ],
    "docstring": null,
    "line_start": 64,
    "line_end": 67
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\simulation_manager.py",
    "function_name": "__init__",
    "arguments": [
      "self",
      "raw_data",
      "options",
      "writer",
      "raw_data_validator",
      "options_validator",
      "use_multiprocessing"
    ],
    "return_type": "None",
    "returns": [],
    "docstring": "Инициализация менеджера.\n\nАргументы:\nraw_data - сырые данные, необходимые для проведения симуляции/планирования\noptions - опции конфигурации для применения в процессе симуляции/планирования\nwriter - писарь результатов симуляции\nraw_data_validator - валидатор сырых данных raw_data\noptions_validator - валидатор опций конфигурации",
    "line_start": 73,
    "line_end": 107
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\simulation_manager.py",
    "function_name": "simdata",
    "arguments": [
      "self"
    ],
    "return_type": "SimData",
    "returns": [
      "self._simdata"
    ],
    "docstring": "Возвращает текущие сериализованные данные, используемые для симуляции",
    "line_start": 110,
    "line_end": 112
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\simulation_manager.py",
    "function_name": "config",
    "arguments": [
      "self"
    ],
    "return_type": "dict",
    "returns": [
      "self._config"
    ],
    "docstring": "Возвращает текущую конфигурацию",
    "line_start": 115,
    "line_end": 117
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\simulation_manager.py",
    "function_name": "writer",
    "arguments": [
      "self"
    ],
    "return_type": "IWriter",
    "returns": [
      "self._writer"
    ],
    "docstring": "Возвращает текущий класс логгера симуляции",
    "line_start": 120,
    "line_end": 122
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\simulation_manager.py",
    "function_name": "result",
    "arguments": [
      "self"
    ],
    "return_type": "dict",
    "returns": [
      "self._result"
    ],
    "docstring": "Возвращает результат симуляции при его наличии",
    "line_start": 125,
    "line_end": 129
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\simulation_manager.py",
    "function_name": "set_new_simdata",
    "arguments": [
      "self",
      "raw_data"
    ],
    "return_type": "None",
    "returns": [],
    "docstring": "Проводит валидацию переданных сырых данных для симуляции и\nустанавливает сериализованные данные в качестве текущих",
    "line_start": 131,
    "line_end": 137
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\simulation_manager.py",
    "function_name": "set_options",
    "arguments": [
      "self",
      "options"
    ],
    "return_type": "None",
    "returns": [],
    "docstring": "Проводит валидацию и устанавливает переданные опции конфигурации",
    "line_start": 139,
    "line_end": 143
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\simulation_manager.py",
    "function_name": "__set_default_config",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [],
    "docstring": "Устанавливает опции конфигурации по умолчанию",
    "line_start": 145,
    "line_end": 147
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\simulation_manager.py",
    "function_name": "validate_writer",
    "arguments": [
      "writer"
    ],
    "return_type": "IWriter",
    "returns": [
      "writer() if is_class else writer"
    ],
    "docstring": "Производит валидацию переданного писаря результатов симуляции",
    "line_start": 150,
    "line_end": 157
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\simulation_manager.py",
    "function_name": "validate_validator",
    "arguments": [
      "validator"
    ],
    "return_type": "IManagerValidator",
    "returns": [
      "validator() if is_class else validator"
    ],
    "docstring": "Производит валидацию переданного валидатора",
    "line_start": 160,
    "line_end": 171
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\simulation_manager.py",
    "function_name": "set_raw_data_validator",
    "arguments": [
      "self",
      "validator"
    ],
    "return_type": "None",
    "returns": [],
    "docstring": "Устанавливает валидатор сырых данных для симуляции",
    "line_start": 173,
    "line_end": 175
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\simulation_manager.py",
    "function_name": "set_options_validator",
    "arguments": [
      "self",
      "validator"
    ],
    "return_type": "None",
    "returns": [],
    "docstring": "Устанавливает валидатор опций конфигурации",
    "line_start": 177,
    "line_end": 179
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\simulation_manager.py",
    "function_name": "run",
    "arguments": [
      "self"
    ],
    "return_type": "dict",
    "returns": [
      "self._process_simulation()",
      "self._run_using_multiprocessing()"
    ],
    "docstring": "Запускает симуляцию в ручном/автоматическом режиме (зависит от текущей конфигурации)\nв отдельном процессе",
    "line_start": 181,
    "line_end": 189
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\simulation_manager.py",
    "function_name": "_run_using_multiprocessing",
    "arguments": [
      "self"
    ],
    "return_type": "dict",
    "returns": [
      "manager_dict['result']"
    ],
    "docstring": null,
    "line_start": 191,
    "line_end": 216
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\simulation_manager.py",
    "function_name": "_multiprocessing_simulation_callback",
    "arguments": [
      "self",
      "manager_dict"
    ],
    "return_type": "None",
    "returns": [],
    "docstring": null,
    "line_start": 218,
    "line_end": 229
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\simulation_manager.py",
    "function_name": "_process_simulation",
    "arguments": [
      "self"
    ],
    "return_type": "dict",
    "returns": [
      "run_simulation_for_planned_trips(self.simdata, self.writer, planned_trips, self.config)",
      "run_simulation(self.simdata, self.writer, self.config)",
      "run_reliability(run_simulation_for_planned_trips, self.simdata, self.writer, planned_trips, self.config, metric='weight', processes_number=self.config['rel_process_num'], init_runs_number=self.config['rel_init_runs_num'], step_runs_number=self.config['rel_step_runs_num'], max_runs_number=self.config['rel_max_runs_num'], alpha=self.config['rel_alpha'], r_target=self.config['rel_r_target'], delta_target=self.config['rel_delta_target'], consecutive=self.config['rel_consecutive'], boot_b=self.config['rel_boot_b'])"
    ],
    "docstring": null,
    "line_start": 232,
    "line_end": 310
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\states.py",
    "function_name": "is_work",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "self in [self.MOVING_LOADED, self.MOVING_EMPTY, self.UNLOADING]"
    ],
    "docstring": null,
    "line_start": 18,
    "line_end": 19
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\states.py",
    "function_name": "is_moving",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "self in [self.MOVING_LOADED, self.MOVING_EMPTY]"
    ],
    "docstring": null,
    "line_start": 22,
    "line_end": 23
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\states.py",
    "function_name": "__str__",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "self.value[0]"
    ],
    "docstring": null,
    "line_start": 25,
    "line_end": 26
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\states.py",
    "function_name": "ru",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "self.value[1]"
    ],
    "docstring": null,
    "line_start": 28,
    "line_end": 29
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\states.py",
    "function_name": "en",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "self.value[0]"
    ],
    "docstring": null,
    "line_start": 31,
    "line_end": 32
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\states.py",
    "function_name": "is_work",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "self == self.LOADING"
    ],
    "docstring": null,
    "line_start": 43,
    "line_end": 44
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\states.py",
    "function_name": "__str__",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "self.value[0]"
    ],
    "docstring": null,
    "line_start": 46,
    "line_end": 47
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\states.py",
    "function_name": "ru",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "self.value[1]"
    ],
    "docstring": null,
    "line_start": 49,
    "line_end": 50
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\states.py",
    "function_name": "en",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "self.value[0]"
    ],
    "docstring": null,
    "line_start": 52,
    "line_end": 53
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\states.py",
    "function_name": "is_work",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "self == self.OPEN"
    ],
    "docstring": null,
    "line_start": 63,
    "line_end": 64
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\states.py",
    "function_name": "__str__",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "self.value[0]"
    ],
    "docstring": null,
    "line_start": 66,
    "line_end": 67
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\states.py",
    "function_name": "ru",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "self.value[1]"
    ],
    "docstring": null,
    "line_start": 69,
    "line_end": 70
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\states.py",
    "function_name": "en",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "self.value[0]"
    ],
    "docstring": null,
    "line_start": 72,
    "line_end": 73
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\states.py",
    "function_name": "__str__",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "self.value[0]"
    ],
    "docstring": null,
    "line_start": 80,
    "line_end": 81
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\states.py",
    "function_name": "ru",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "self.value[1]"
    ],
    "docstring": null,
    "line_start": 83,
    "line_end": 84
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\states.py",
    "function_name": "en",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "self.value[0]"
    ],
    "docstring": null,
    "line_start": 86,
    "line_end": 87
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\writer.py",
    "function_name": "update_data",
    "arguments": [
      "self",
      "key"
    ],
    "return_type": "None",
    "returns": [],
    "docstring": null,
    "line_start": 9,
    "line_end": 10
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\writer.py",
    "function_name": "push_event",
    "arguments": [
      "self",
      "evt"
    ],
    "return_type": "None",
    "returns": [],
    "docstring": null,
    "line_start": 13,
    "line_end": 14
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\writer.py",
    "function_name": "writerow",
    "arguments": [
      "self",
      "row"
    ],
    "return_type": "None",
    "returns": [],
    "docstring": null,
    "line_start": 17,
    "line_end": 18
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\writer.py",
    "function_name": "finalize",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 21,
    "line_end": 22
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\writer.py",
    "function_name": "__init__",
    "arguments": [
      "self"
    ],
    "return_type": "None",
    "returns": [],
    "docstring": null,
    "line_start": 26,
    "line_end": 32
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\writer.py",
    "function_name": "update_data",
    "arguments": [
      "self",
      "key"
    ],
    "return_type": "None",
    "returns": [],
    "docstring": null,
    "line_start": 34,
    "line_end": 35
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\writer.py",
    "function_name": "push_event",
    "arguments": [
      "self",
      "evt"
    ],
    "return_type": "None",
    "returns": [],
    "docstring": null,
    "line_start": 37,
    "line_end": 38
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\writer.py",
    "function_name": "writerow",
    "arguments": [
      "self",
      "row"
    ],
    "return_type": "None",
    "returns": [],
    "docstring": null,
    "line_start": 40,
    "line_end": 41
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\writer.py",
    "function_name": "finalize",
    "arguments": [
      "self"
    ],
    "return_type": "dict",
    "returns": [
      "self.data"
    ],
    "docstring": null,
    "line_start": 43,
    "line_end": 44
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\writer.py",
    "function_name": "__init__",
    "arguments": [
      "self"
    ],
    "return_type": "None",
    "returns": [],
    "docstring": null,
    "line_start": 48,
    "line_end": 51
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\writer.py",
    "function_name": "push_event",
    "arguments": [
      "self",
      "evt"
    ],
    "return_type": "None",
    "returns": [],
    "docstring": null,
    "line_start": 53,
    "line_end": 54
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\writer.py",
    "function_name": "writerow",
    "arguments": [
      "self",
      "row"
    ],
    "return_type": "None",
    "returns": [],
    "docstring": null,
    "line_start": 56,
    "line_end": 57
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\writer.py",
    "function_name": "__init__",
    "arguments": [
      "self",
      "batch_size_seconds"
    ],
    "return_type": "None",
    "returns": [],
    "docstring": null,
    "line_start": 61,
    "line_end": 73
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\writer.py",
    "function_name": "update_data",
    "arguments": [
      "self",
      "key"
    ],
    "return_type": "None",
    "returns": [],
    "docstring": null,
    "line_start": 75,
    "line_end": 76
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\writer.py",
    "function_name": "push_event",
    "arguments": [
      "self",
      "evt"
    ],
    "return_type": "None",
    "returns": [],
    "docstring": null,
    "line_start": 78,
    "line_end": 79
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\writer.py",
    "function_name": "writerow",
    "arguments": [
      "self",
      "row"
    ],
    "return_type": "None",
    "returns": [],
    "docstring": null,
    "line_start": 81,
    "line_end": 114
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\writer.py",
    "function_name": "finalize",
    "arguments": [
      "self"
    ],
    "return_type": "dict",
    "returns": [
      "{'meta': {**self.meta, 'total_batches': len(self.batches), 'batch_keys': list(self.batches.keys())}, 'batches': self.batches, 'events': self.events, 'summary': {}}"
    ],
    "docstring": null,
    "line_start": 116,
    "line_end": 126
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\coefficients.py",
    "function_name": "koef_vlazhnosti",
    "arguments": [
      "percent"
    ],
    "return_type": "float",
    "returns": [
      "1.5 + 0.5 * min(max(p, 0), 1)",
      "0.8",
      "1.25"
    ],
    "docstring": "Возвращает коэффициент по влажности грунта (%)\n0–5%   → 0.8 (сухой)\n5–15%  → 1.0 (оптимальная)\n15–30% → 1.2 (влажный)\n30–50% → 1.5–2.0 (глинистый)",
    "line_start": 1,
    "line_end": 16
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\environment.py",
    "function_name": "__init__",
    "arguments": [
      "self",
      "sim_data",
      "writer",
      "sim_conf"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 13,
    "line_end": 26
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\geometry.py",
    "function_name": "__init__",
    "arguments": [
      "self",
      "name",
      "points"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 19,
    "line_end": 21
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\geometry.py",
    "function_name": "start",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "self.points[0]"
    ],
    "docstring": null,
    "line_start": 24,
    "line_end": 25
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\geometry.py",
    "function_name": "end",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "self.points[-1]"
    ],
    "docstring": null,
    "line_start": 28,
    "line_end": 29
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\geometry.py",
    "function_name": "_reverse",
    "arguments": [
      "edges"
    ],
    "return_type": null,
    "returns": [
      "reversed_edges"
    ],
    "docstring": null,
    "line_start": 35,
    "line_end": 41
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\geometry.py",
    "function_name": "__init__",
    "arguments": [
      "self",
      "edges"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 43,
    "line_end": 45
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\geometry.py",
    "function_name": "start_point",
    "arguments": [
      "self"
    ],
    "return_type": "Vertex",
    "returns": [
      "self.edges[0].start"
    ],
    "docstring": null,
    "line_start": 48,
    "line_end": 49
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\geometry.py",
    "function_name": "end_point",
    "arguments": [
      "self"
    ],
    "return_type": "Vertex",
    "returns": [
      "self.edges[-1].stop"
    ],
    "docstring": null,
    "line_start": 52,
    "line_end": 53
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\geometry.py",
    "function_name": "move_along_edges_gen",
    "arguments": [
      "self"
    ],
    "return_type": "Edge",
    "returns": [],
    "docstring": null,
    "line_start": 55,
    "line_end": 57
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\geometry.py",
    "function_name": "move_along_edges_reversed_gen",
    "arguments": [
      "self"
    ],
    "return_type": "Edge",
    "returns": [],
    "docstring": null,
    "line_start": 59,
    "line_end": 61
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\geometry.py",
    "function_name": "cross_product",
    "arguments": [
      "o",
      "a",
      "b"
    ],
    "return_type": null,
    "returns": [
      "(a[0] - o[0]) * (b[1] - o[1]) - (a[1] - o[1]) * (b[0] - o[0])"
    ],
    "docstring": "Векторное произведение координат",
    "line_start": 66,
    "line_end": 72
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\geometry.py",
    "function_name": "segments_intersect",
    "arguments": [
      "a",
      "b",
      "c",
      "d"
    ],
    "return_type": "bool",
    "returns": [
      "False",
      "min(a[0], b[0]) <= c[0] <= max(a[0], b[0]) and min(a[1], b[1]) <= c[1] <= max(a[1], b[1])",
      "True"
    ],
    "docstring": "Проверяет, пересекаются ли отрезки AB и CD",
    "line_start": 75,
    "line_end": 108
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\geometry.py",
    "function_name": "on_segment",
    "arguments": [
      "a",
      "b",
      "c"
    ],
    "return_type": null,
    "returns": [
      "min(a[0], b[0]) <= c[0] <= max(a[0], b[0]) and min(a[1], b[1]) <= c[1] <= max(a[1], b[1])"
    ],
    "docstring": "Лежит ли точка C на отрезке AB",
    "line_start": 83,
    "line_end": 86
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\geometry.py",
    "function_name": "path_intersects_polygons",
    "arguments": [
      "path",
      "polygons"
    ],
    "return_type": null,
    "returns": [
      "False",
      "True"
    ],
    "docstring": "Проверяет, попадает ли путь на графе хотя бы в один полигон.\n\nArgs:\n    path: объект RouteEdge, хранящий список рёбер пути на графе\n    polygons: список полигонов в виде списков координат\n\nReturns:\n    bool: True если путь пересекает или находится внутри хотя бы одного полигона",
    "line_start": 111,
    "line_end": 136
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\geometry.py",
    "function_name": "build_route_sim",
    "arguments": [
      "route_dc"
    ],
    "return_type": "Route",
    "returns": [
      "Route(route_dc.id, points)"
    ],
    "docstring": "Конвертирует наш dataclass Route (список сегментов)\nв RouteSim (список уникальных точек по порядку).",
    "line_start": 141,
    "line_end": 154
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\geometry.py",
    "function_name": "build_route_by_road_net",
    "arguments": [
      "shovel_id",
      "unload_id",
      "road_net"
    ],
    "return_type": "Route",
    "returns": [
      "Route(f'shov_{source[0]} - unl_{target[0]}', points)"
    ],
    "docstring": null,
    "line_start": 159,
    "line_end": 190
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\geometry.py",
    "function_name": "build_route_edges_by_road_net",
    "arguments": [
      "from_object_id",
      "from_object_type",
      "to_object_id",
      "to_object_type",
      "road_net"
    ],
    "return_type": "RouteEdge",
    "returns": [
      "RouteEdge(result.edges)"
    ],
    "docstring": null,
    "line_start": 193,
    "line_end": 213
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\geometry.py",
    "function_name": "build_route_edges_by_road_net_from_position",
    "arguments": [
      "lon",
      "lat",
      "height",
      "edge_idx",
      "to_object_id",
      "to_object_type",
      "road_net"
    ],
    "return_type": "RouteEdge",
    "returns": [
      "RouteEdge(result.edges)"
    ],
    "docstring": null,
    "line_start": 216,
    "line_end": 238
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\geometry.py",
    "function_name": "build_route_edges_by_road_net_from_position_to_position",
    "arguments": [
      "lon",
      "lat",
      "height",
      "edge_idx",
      "end_lon",
      "end_lat",
      "end_height",
      "end_edge_idx",
      "road_net"
    ],
    "return_type": "RouteEdge",
    "returns": [
      "RouteEdge(result.edges)"
    ],
    "docstring": "Строит кратчайший путь на графе от позиции до позиции",
    "line_start": 241,
    "line_end": 268
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\geometry.py",
    "function_name": "find_all_route_edges_by_road_net_from_position_to_position",
    "arguments": [
      "lon",
      "lat",
      "height",
      "edge_idx",
      "end_lon",
      "end_lat",
      "end_height",
      "end_edge_idx",
      "road_net"
    ],
    "return_type": null,
    "returns": [
      "result"
    ],
    "docstring": "Ищет все пути на графе от указанной позиции до указанной позиции",
    "line_start": 271,
    "line_end": 301
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\geometry.py",
    "function_name": "find_all_route_edges_by_road_net_from_position",
    "arguments": [
      "lon",
      "lat",
      "height",
      "edge_idx",
      "to_object_id",
      "to_object_type",
      "road_net"
    ],
    "return_type": null,
    "returns": [
      "result"
    ],
    "docstring": "Ищет все пути на графе от указанной позиции до указанного объекта",
    "line_start": 304,
    "line_end": 331
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\geometry.py",
    "function_name": "find_all_route_edges_by_road_net_from_object_to_object",
    "arguments": [
      "from_object_id",
      "from_object_type",
      "to_object_id",
      "to_object_type",
      "road_net"
    ],
    "return_type": null,
    "returns": [
      "result"
    ],
    "docstring": "Ищет все пути на графе от указанной позиции до указанного объекта",
    "line_start": 334,
    "line_end": 358
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\geometry.py",
    "function_name": "interpolate_position",
    "arguments": [
      "p1",
      "p2",
      "ratio"
    ],
    "return_type": "Point",
    "returns": [
      "Point(lat, lon)"
    ],
    "docstring": null,
    "line_start": 363,
    "line_end": 366
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\geometry.py",
    "function_name": "haversine_km",
    "arguments": [
      "p1",
      "p2"
    ],
    "return_type": "float",
    "returns": [
      "R * c"
    ],
    "docstring": null,
    "line_start": 369,
    "line_end": 376
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\geometry.py",
    "function_name": "find_nearest_point",
    "arguments": [
      "point",
      "point_list"
    ],
    "return_type": null,
    "returns": [
      "nearest_point"
    ],
    "docstring": null,
    "line_start": 379,
    "line_end": 381
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\geometry.py",
    "function_name": "find_route_edges_around_restricted_zones_from_base_route",
    "arguments": [
      "base_route",
      "restricted_zones",
      "road_net"
    ],
    "return_type": "RouteEdge | None",
    "returns": [
      "chosen_route"
    ],
    "docstring": "Поиск маршрута в объезд запрещённых зон (полигонов) на основе заданного маршрута",
    "line_start": 387,
    "line_end": 414
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\geometry.py",
    "function_name": "find_route_edges_around_restricted_zones_from_position_to_object",
    "arguments": [
      "lon",
      "lat",
      "edge_idx",
      "to_object_id",
      "to_object_type",
      "restricted_zones",
      "road_net"
    ],
    "return_type": "RouteEdge | None",
    "returns": [
      "chosen_route"
    ],
    "docstring": "Поиск маршрута в объезд запрещённых зон (полигонов) от позиции до объекта",
    "line_start": 417,
    "line_end": 447
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\props.py",
    "function_name": "all",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "self.areas"
    ],
    "docstring": null,
    "line_start": 115,
    "line_end": 116
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\props.py",
    "function_name": "lunch_areas",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "[area for area in self.areas if area.is_lunch_area]"
    ],
    "docstring": null,
    "line_start": 119,
    "line_end": 120
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\props.py",
    "function_name": "shift_change_areas",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "[area for area in self.areas if area.is_shift_change_area]"
    ],
    "docstring": null,
    "line_start": 123,
    "line_end": 124
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\props.py",
    "function_name": "planned_idle_areas",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "[area for area in self.areas if area.is_planned_idle_area]"
    ],
    "docstring": null,
    "line_start": 127,
    "line_end": 128
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\props.py",
    "function_name": "blast_waiting_areas",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "[area for area in self.areas if area.is_blast_waiting_area]"
    ],
    "docstring": null,
    "line_start": 131,
    "line_end": 132
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\props.py",
    "function_name": "is_finished",
    "arguments": [
      "self"
    ],
    "return_type": "bool",
    "returns": [
      "self.end_object is not None and self.end_time is not None and (self.end_trip_data is not None)"
    ],
    "docstring": null,
    "line_start": 242,
    "line_end": 247
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\props.py",
    "function_name": "to_telemetry",
    "arguments": [
      "self"
    ],
    "return_type": "dict",
    "returns": [
      "{'truck_id': self.end_trip_data.truck_id, 'shovel_id': self.end_trip_data.shovel_id, 'unload_id': self.end_trip_data.unload_id, 'volume': int(self.end_trip_data.truck_volume), 'weight': int(self.end_trip_data.truck_weight), 'time': self.end_time.isoformat(), 'start_time': self.start_time.isoformat(), 'end_time': self.end_time.isoformat(), 'start_object': {'id': self.start_object.id, 'type': self.start_object.type.key()}, 'end_object': {'id': self.end_object.id, 'type': self.end_object.type.key()}}"
    ],
    "docstring": null,
    "line_start": 249,
    "line_end": 270
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\calculations\\base.py",
    "function_name": "__init__",
    "arguments": [
      "self",
      "seeded_random"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 8,
    "line_end": 9
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\calculations\\base.py",
    "function_name": "_calculate_rates",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "{'failure_rate': failure_rate, 'repair_rate': repair_rate}"
    ],
    "docstring": null,
    "line_start": 11,
    "line_end": 25
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\calculations\\base.py",
    "function_name": "calculate_failure_time",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "self.seeded_random.expovariate(rates['failure_rate'])"
    ],
    "docstring": "Время не секунд семуляции, а секунд работы актора\nсамосвал: работа - движение груженым, движение порожним, разгрузка\nэкскаватор: работа - погрузка\nПР: во время разгрузки",
    "line_start": 27,
    "line_end": 35
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\calculations\\base.py",
    "function_name": "calculate_repair_time",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "self.seeded_random.expovariate(rates['repair_rate'])"
    ],
    "docstring": null,
    "line_start": 37,
    "line_end": 39
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\calculations\\base.py",
    "function_name": "calculate_fuel_level_while_moving",
    "arguments": [
      "fuel_lvl",
      "sfc",
      "density",
      "p_engine"
    ],
    "return_type": null,
    "returns": [
      "fuel_lvl"
    ],
    "docstring": null,
    "line_start": 45,
    "line_end": 48
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\calculations\\base.py",
    "function_name": "calculate_fuel_level_while_idle",
    "arguments": [
      "fuel_lvl",
      "fuel_idle_lph"
    ],
    "return_type": null,
    "returns": [
      "fuel_lvl"
    ],
    "docstring": null,
    "line_start": 51,
    "line_end": 54
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\calculations\\base.py",
    "function_name": "calculate_lunch_times",
    "arguments": [
      "sim_start_time",
      "lunch_times"
    ],
    "return_type": "list[tuple[int, int]]",
    "returns": [
      "result"
    ],
    "docstring": "Рассчитываем моменты начала и конца обеденных перерывов относительно времени симуляции",
    "line_start": 61,
    "line_end": 81
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\calculations\\shovel.py",
    "function_name": "calculate_cycle",
    "arguments": [
      "cls",
      "props",
      "glubina_vrezki_m",
      "dlina_drag_m",
      "visota_podem_m",
      "ugol_swing_rad",
      "ugol_dump_rad",
      "alpha_idle"
    ],
    "return_type": "dict",
    "returns": [
      "{'vrezka_s': t1, 'idle_vrezka_s': idles[0], 'napolnenie_s': t2, 'idle_napoln_s': idles[1], 'podem_s': t3, 'idle_podem_s': idles[2], 'povorot_s': t4, 'idle_povorot_s': idles[3], 'razgruzka_s': t5, 'idle_dump_s': idles[4], 'vozvrat_s': t6, 'idle_vozv_s': idles[5], 'K_wear': Kw, 'vsego_s': total_s}"
    ],
    "docstring": "Расчёт времён всех стадий одного цикла работы Экскаватора\nждём самосвал, наполняем ковш, поворачиваемся, грузим и всё с самого начала",
    "line_start": 13,
    "line_end": 55
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\calculations\\shovel.py",
    "function_name": "_calculate_load_cycles_generator",
    "arguments": [
      "cls",
      "shovel_props",
      "truck_props"
    ],
    "return_type": "Generator[Tuple[int, float, float], None, None]",
    "returns": [],
    "docstring": "Генератор циклов погрузки для заполнения самосвала.\n\nПоследовательно рассчитывает циклы погрузки экскаватора до полного заполнения\nкузова самосвала, контролируя суммарный вес груза.\n\nParameters\n----------\nshovel_props : ShovelProperties\n    Свойства экскаватора\ntruck_props : TruckProperties\n    Свойства самосвала\n\nYields\n------\nTuple[int, float, float]\n    Кортеж содержащий:\n    - int: продолжительность цикла в секундах\n    - float: вес груза в тоннах за текущий цикл\n    - float: объем груза в м³ за текущий цикл\n\nNotes\n-----\n- Генератор останавливается, когда добавление следующего ковша превысит\n  грузоподъемность самосвала\n- Используется плотность материала из глобального словаря density_by_material\n- Вес рассчитывается с учетом коэффициента заполнения ковша",
    "line_start": 58,
    "line_end": 104
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\calculations\\shovel.py",
    "function_name": "calculate_load_cycles",
    "arguments": [
      "cls",
      "shovel_props",
      "truck_props"
    ],
    "return_type": "Tuple[int, float, float]",
    "returns": [
      "(total_time, total_weight, total_volime)"
    ],
    "docstring": "Рассчитывает суммарные показатели полного цикла погрузки самосвала.\n\nАгрегирует данные всех циклов погрузки, сгенерированных методом\n`_calculate_load_cycles_generator`, и возвращает общие итоги по времени,\nвесу и объему за всю операцию погрузки одного самосвала.\n\nParameters\n----------\nshovel_props : ShovelProperties\n    Свойства экскаватора\ntruck_props : TruckProperties\n    Свойства самосвала\n\nReturns\n-------\nTuple[int, float, float]\n    Кортеж содержащий:\n    - int: общее время погрузки в секундах\n    - float: суммарный вес груза в тоннах\n    - float: суммарный объем груза в м³\n\nNotes\n-----\n- Метод использует генератор `_calculate_load_cycles_generator` для получения\n  последовательности циклов погрузки\n- Суммирование прекращается при достижении максимальной грузоподъемности самосвала\n- Возвращаемые значения представляют полную загрузку одного самосвала",
    "line_start": 107,
    "line_end": 148
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\calculations\\shovel.py",
    "function_name": "calculate_load_cycles_cumulative_generator",
    "arguments": [
      "cls",
      "shovel_props",
      "truck_props"
    ],
    "return_type": "Generator[Tuple[int, float, float], None, None]",
    "returns": [],
    "docstring": "Генератор циклов погрузки с накопленными итогами.\n\nПоследовательно выдает данные каждого цикла погрузки с кумулятивными\n(накопленными) значениями веса и объема. Позволяет отслеживать прогресс\nзаполнения самосвала после каждого цикла.\n\nParameters\n----------\nshovel_props : ShovelProperties\n    Свойства экскаватора для расчета циклов погрузки\ntruck_props : TruckProperties\n    Свойства самосвала, определяющие максимальную грузоподъемность\n\nYields\n------\nTuple[int, float, float]\n    Кортеж содержащий:\n    - int: продолжительность ТЕКУЩЕГО ЦИКЛА в секундах\n    - float: накопленный суммарный вес груза в тоннах (с учетом текущего цикла)\n    - float: накопленный суммарный объем груза в м³ (с учетом текущего цикла)\n\nNotes\n-----\n- В отличие от `_calculate_load_cycles_generator`, возвращает накопленные значения\n- Полезен для анализа прогресса погрузки и построения графиков заполнения\n- ВРЕМЯ ВОЗВРАЩАЕТСЯ ДЛЯ ОТДЕЛЬНОГО ЦИКЛА, а вес и объем - кумулятивные",
    "line_start": 151,
    "line_end": 189
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\calculations\\shovel.py",
    "function_name": "get_koef",
    "arguments": [
      "props"
    ],
    "return_type": "dict",
    "returns": [
      "{'K_f': props.koef_zapolneniya, 'K_r': koef_soprotivleniya[props.tip_porody], 'K_w': koef_vlazhnosti(props.vlazhnost_percent), 'K_T': 1.25, 'K_i': props.koef_inertsii, 'K_h': props.koef_gidravliki, 'K_ret': props.koef_vozvrata}"
    ],
    "docstring": null,
    "line_start": 194,
    "line_end": 203
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\calculations\\truck.py",
    "function_name": "calculate_segment_motion",
    "arguments": [
      "cls",
      "p1",
      "p2",
      "initial_speed",
      "speed_limit",
      "acceleration",
      "time_step_sec"
    ],
    "return_type": "Generator[tuple[float, Point], None, None]",
    "returns": [],
    "docstring": "Расчет движения между двумя точками в маршруте",
    "line_start": 11,
    "line_end": 33
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\calculations\\truck.py",
    "function_name": "calculate_motion",
    "arguments": [
      "cls",
      "route",
      "props",
      "forward"
    ],
    "return_type": null,
    "returns": [],
    "docstring": "Расчет движения по маршруту состоящего из списка точек",
    "line_start": 36,
    "line_end": 51
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\calculations\\truck.py",
    "function_name": "calculate_edge_motion",
    "arguments": [
      "cls",
      "edge",
      "initial_speed",
      "speed_limit",
      "acceleration",
      "time_step_sec"
    ],
    "return_type": "Generator[tuple[float, Point], None, None]",
    "returns": [],
    "docstring": "Расчет движения по ребру графа",
    "line_start": 54,
    "line_end": 77
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\calculations\\truck.py",
    "function_name": "calculate_motion_by_edges",
    "arguments": [
      "cls",
      "route",
      "props",
      "forward",
      "is_loaded"
    ],
    "return_type": null,
    "returns": [],
    "docstring": "Расчет движения по списку ребер графа",
    "line_start": 80,
    "line_end": 103
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\calculations\\truck.py",
    "function_name": "calculate_time_motion_by_edges",
    "arguments": [
      "cls",
      "route",
      "props",
      "forward"
    ],
    "return_type": null,
    "returns": [
      "sum([1 for _ in cls.calculate_motion_by_edges(route, props, forward, is_loaded)])"
    ],
    "docstring": null,
    "line_start": 106,
    "line_end": 108
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\calculations\\truck.py",
    "function_name": "time_empty",
    "arguments": [
      "self"
    ],
    "return_type": "int",
    "returns": [
      "int(np.ceil(t / self.driver_skill))"
    ],
    "docstring": "Время движения порожним к экскаватору (сек)\nФормула: t = S / v * 3600 / driver_skill,\nгде S — длина пути (км), v — скорость порожним (км/ч)",
    "line_start": 111,
    "line_end": 118
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\calculations\\truck.py",
    "function_name": "time_loaded",
    "arguments": [
      "self"
    ],
    "return_type": "int",
    "returns": [
      "int(np.ceil(t / self.driver_skill))"
    ],
    "docstring": "Время движения гружённым к разгрузке (сек)\nФормула: t = S / v * 3600 / driver_skill,\nгде S — длина пути (км), v — скорость гружённым (км/ч)",
    "line_start": 120,
    "line_end": 127
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\calculations\\unload.py",
    "function_name": "unload_calculation",
    "arguments": [
      "cls",
      "props",
      "truck_volume"
    ],
    "return_type": null,
    "returns": [
      "{'t_drive': t_drive, 't_stop': t_stop, 't_lift': t_lift, 't_dump': t_dump, 't_down': t_down, 't_leave': t_leave, 't_total': total_time, 'params': dict(K_ugl=K_ugl, K_temp=K_temp, K_mat=K_mat, speed=speed)}"
    ],
    "docstring": "1. t_drive — подъезд (сек), фиксированно 30 сек\n2. t_stop — остановка и установка (15 сек)\n3. t_lift — подъем кузова (20 сек)\n4. t_dump — высыпание груза:\n    t_dump = V / (speed * K_угол * K_мат * K_темп)\n5. t_down — опускание кузова (15 сек)\n6. t_leave — уход (30 сек)\nпотом исправлю CHANGE\nдлина участка для маневра\nсредняя скорость маневра\nзамедление",
    "line_start": 8,
    "line_end": 43
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\calculations\\unload.py",
    "function_name": "unload_calculation_by_norm",
    "arguments": [
      "cls",
      "unload_props",
      "truck_props"
    ],
    "return_type": null,
    "returns": [
      "{'t_drive': t_drive, 't_stop': t_stop, 't_lift': t_lift, 't_dump': t_dump, 't_down': t_down, 't_leave': t_leave, 't_total': total_time, 'params': dict(K_ugl=K_ugl, K_temp=K_temp, K_mat=K_mat, speed=speed)}"
    ],
    "docstring": "1. t_drive — подъезд (сек), фиксированно 30 сек\n2. t_stop — остановка и установка (15 сек)\n3. t_lift — подъем кузова (20 сек)\n4. t_dump — высыпание груза:\n    t_dump = V / (speed * K_угол * K_мат * K_темп)\n5. t_down — опускание кузова (15 сек)\n6. t_leave — уход (30 сек)\nпотом исправлю CHANGE\nдлина участка для маневра\nсредняя скорость маневра\nзамедление",
    "line_start": 46,
    "line_end": 80
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\planner\\entities.py",
    "function_name": "truck_ids",
    "arguments": [
      "self"
    ],
    "return_type": "List[int]",
    "returns": [
      "sorted({i for i, _ in self.T_load.keys()})"
    ],
    "docstring": null,
    "line_start": 28,
    "line_end": 29
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\planner\\entities.py",
    "function_name": "shovel_ids",
    "arguments": [
      "self"
    ],
    "return_type": "List[int]",
    "returns": [
      "sorted({j for _, j in self.T_load.keys()})"
    ],
    "docstring": null,
    "line_start": 32,
    "line_end": 33
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\planner\\entities.py",
    "function_name": "unload_ids",
    "arguments": [
      "self"
    ],
    "return_type": "List[int]",
    "returns": [
      "sorted({z for _, z in self.T_unload.keys()})"
    ],
    "docstring": null,
    "line_start": 36,
    "line_end": 37
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\planner\\manage.py",
    "function_name": "__init__",
    "arguments": [
      "self",
      "solver",
      "msg",
      "workers",
      "time_limit"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 24,
    "line_end": 34
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\planner\\manage.py",
    "function_name": "_init_solver",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "solver"
    ],
    "docstring": null,
    "line_start": 36,
    "line_end": 51
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\planner\\manage.py",
    "function_name": "get_planning_data",
    "arguments": [
      "simdata"
    ],
    "return_type": "InputPlanningData",
    "returns": [
      "planning_data"
    ],
    "docstring": "Метод набивающий матрицу данных",
    "line_start": 54,
    "line_end": 179
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\planner\\manage.py",
    "function_name": "run_with_exclude",
    "arguments": [
      "self",
      "sim_data",
      "exclude_objects"
    ],
    "return_type": "dict",
    "returns": [
      "planned_trips",
      "{}"
    ],
    "docstring": null,
    "line_start": 181,
    "line_end": 219
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\planner\\manage.py",
    "function_name": "run",
    "arguments": [
      "self",
      "simdata"
    ],
    "return_type": null,
    "returns": [
      "result"
    ],
    "docstring": null,
    "line_start": 221,
    "line_end": 240
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\planner\\planning_matrix.py",
    "function_name": "get_planning_data",
    "arguments": [
      "simdata"
    ],
    "return_type": "InputPlanningData",
    "returns": [
      "planning_data"
    ],
    "docstring": "Метод набивающий матрицу данных",
    "line_start": 10,
    "line_end": 135
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\planner\\solvers\\cp.py",
    "function_name": "compute_Kmax_i",
    "arguments": [
      "inst",
      "i"
    ],
    "return_type": "int",
    "returns": [
      "max(0, floor(available / max(1, min_d)))"
    ],
    "docstring": "Грубая верхняя граница числа рейсов для самосвала i",
    "line_start": 17,
    "line_end": 28
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\planner\\solvers\\cp.py",
    "function_name": "build_cp_model",
    "arguments": [
      "cls",
      "inst",
      "use_individual_kmax"
    ],
    "return_type": null,
    "returns": [
      "(model, V)"
    ],
    "docstring": null,
    "line_start": 31,
    "line_end": 160
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\planner\\solvers\\cp.py",
    "function_name": "run",
    "arguments": [
      "cls",
      "inst"
    ],
    "return_type": null,
    "returns": [
      "result",
      "result"
    ],
    "docstring": "Решение CP‑SAT и извлечение расписания в прежнем формате.",
    "line_start": 163,
    "line_end": 251
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\planner\\solvers\\greedy.py",
    "function_name": "__init__",
    "arguments": [
      "self",
      "planning_data"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 19,
    "line_end": 30
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\planner\\solvers\\greedy.py",
    "function_name": "planning_data",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "self._planning_data"
    ],
    "docstring": null,
    "line_start": 33,
    "line_end": 36
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\planner\\solvers\\greedy.py",
    "function_name": "_included_object",
    "arguments": [
      "self",
      "object_type",
      "object_id"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 38,
    "line_end": 39
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\planner\\solvers\\greedy.py",
    "function_name": "_excluded_object",
    "arguments": [
      "self",
      "object_type",
      "object_id"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 41,
    "line_end": 42
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\planner\\solvers\\greedy.py",
    "function_name": "_included_objects",
    "arguments": [
      "self",
      "objects"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 44,
    "line_end": 46
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\planner\\solvers\\greedy.py",
    "function_name": "_excluded_objects",
    "arguments": [
      "self",
      "objects"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 48,
    "line_end": 50
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\planner\\solvers\\greedy.py",
    "function_name": "_update_trucks_position",
    "arguments": [
      "self",
      "truck_id",
      "sim_truck"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 52,
    "line_end": 56
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\planner\\solvers\\greedy.py",
    "function_name": "_reset_cycle",
    "arguments": [
      "sim_truck"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 59,
    "line_end": 64
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\planner\\solvers\\greedy.py",
    "function_name": "rebuild_planning_data",
    "arguments": [
      "self",
      "start_time",
      "end_time",
      "excluded_object",
      "included_object"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 66,
    "line_end": 89
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\planner\\solvers\\greedy.py",
    "function_name": "rebuild_planning_data_cascade",
    "arguments": [
      "self",
      "start_time",
      "end_time",
      "excluded_objects",
      "included_objects"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 91,
    "line_end": 113
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\planner\\solvers\\greedy.py",
    "function_name": "find_trucks_to_shovel",
    "arguments": [
      "shovel"
    ],
    "return_type": null,
    "returns": [
      "trucks"
    ],
    "docstring": null,
    "line_start": 116,
    "line_end": 121
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\planner\\solvers\\greedy.py",
    "function_name": "choose_next_trip",
    "arguments": [
      "self",
      "truck",
      "now"
    ],
    "return_type": null,
    "returns": [
      "best_choice"
    ],
    "docstring": "Выбирает лучшую связку (shovel, unload) для данного самосвала",
    "line_start": 123,
    "line_end": 164
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\planner\\solvers\\greedy.py",
    "function_name": "assign_trip",
    "arguments": [
      "self",
      "truck",
      "now"
    ],
    "return_type": "PlannedTrip | None",
    "returns": [
      "trip",
      "None"
    ],
    "docstring": "Формирует новый PlannedTrip и обновляет маршруты для самосвала",
    "line_start": 166,
    "line_end": 180
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\planner\\solvers\\milp.py",
    "function_name": "compute_Kmax_i",
    "arguments": [
      "inst",
      "i"
    ],
    "return_type": "int",
    "returns": [
      "max(0, floor(available / max(1, min_d)))"
    ],
    "docstring": "Грубая верхняя граница числа рейсов для самосвала i",
    "line_start": 21,
    "line_end": 32
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\planner\\solvers\\milp.py",
    "function_name": "default_Kmax",
    "arguments": [
      "cls",
      "inst"
    ],
    "return_type": "Dict[int, int]",
    "returns": [
      "{i: cls.compute_Kmax_i(inst, i) for i in inst.truck_ids}"
    ],
    "docstring": "Если Kmax не задан, вычислить его для каждого самосвала",
    "line_start": 35,
    "line_end": 37
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\planner\\solvers\\milp.py",
    "function_name": "build_model",
    "arguments": [
      "cls",
      "inst",
      "shovel_queue"
    ],
    "return_type": null,
    "returns": [
      "(model, vars_pack)",
      "lpSum((x[i, k, j, z] for z in Z))",
      "lpSum((x[i, k, j, z] for j in J))"
    ],
    "docstring": "Собираем все ограничения и условия поиска решения",
    "line_start": 40,
    "line_end": 199
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\planner\\solvers\\milp.py",
    "function_name": "a_use",
    "arguments": [
      "i",
      "k",
      "j"
    ],
    "return_type": null,
    "returns": [
      "lpSum((x[i, k, j, z] for z in Z))"
    ],
    "docstring": null,
    "line_start": 92,
    "line_end": 93
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\planner\\solvers\\milp.py",
    "function_name": "b_use",
    "arguments": [
      "i",
      "k",
      "z"
    ],
    "return_type": null,
    "returns": [
      "lpSum((x[i, k, j, z] for j in J))"
    ],
    "docstring": null,
    "line_start": 95,
    "line_end": 96
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\planner\\solvers\\milp.py",
    "function_name": "run",
    "arguments": [
      "cls",
      "inst"
    ],
    "return_type": null,
    "returns": [
      "result",
      "result"
    ],
    "docstring": "Решить модель и получить расписание\n        ",
    "line_start": 202,
    "line_end": 282
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\base.py",
    "function_name": "__init__",
    "arguments": [
      "self",
      "tick",
      "data_callback"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 6,
    "line_end": 14
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\base.py",
    "function_name": "run",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 16,
    "line_end": 19
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\entities.py",
    "function_name": "get_truck_by_id",
    "arguments": [
      "self",
      "truck_id"
    ],
    "return_type": null,
    "returns": [
      "self.trucks[truck_id]"
    ],
    "docstring": null,
    "line_start": 22,
    "line_end": 23
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\entities.py",
    "function_name": "get_shovel_by_id",
    "arguments": [
      "self",
      "shovel_id"
    ],
    "return_type": null,
    "returns": [
      "self.shovels[shovel_id]"
    ],
    "docstring": null,
    "line_start": 25,
    "line_end": 26
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\entities.py",
    "function_name": "get_unload_by_id",
    "arguments": [
      "self",
      "unload_id"
    ],
    "return_type": null,
    "returns": [
      "self.unloads[unload_id]"
    ],
    "docstring": null,
    "line_start": 28,
    "line_end": 29
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\fuel_station.py",
    "function_name": "__init__",
    "arguments": [
      "self",
      "properties",
      "unit_id",
      "name",
      "initial_position",
      "tick"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 15,
    "line_end": 31
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\fuel_station.py",
    "function_name": "current_time",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "timestamp"
    ],
    "docstring": null,
    "line_start": 34,
    "line_end": 37
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\fuel_station.py",
    "function_name": "refuelling",
    "arguments": [
      "self",
      "truck"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 39,
    "line_end": 55
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\fuel_station.py",
    "function_name": "main_tic_process",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 57,
    "line_end": 61
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\fuel_station.py",
    "function_name": "push_event",
    "arguments": [
      "self",
      "event_type",
      "truck"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 63,
    "line_end": 74
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\fuel_station.py",
    "function_name": "telemetry_process",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 76,
    "line_end": 85
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\quarry.py",
    "function_name": "__init__",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 27,
    "line_end": 61
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\quarry.py",
    "function_name": "current_time",
    "arguments": [
      "self"
    ],
    "return_type": "datetime",
    "returns": [
      "self.start_time + timedelta(seconds=self.env.now)"
    ],
    "docstring": null,
    "line_start": 64,
    "line_end": 65
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\quarry.py",
    "function_name": "current_timestamp",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "self.current_time.timestamp()"
    ],
    "docstring": null,
    "line_start": 68,
    "line_end": 69
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\quarry.py",
    "function_name": "prepare_seeded_random",
    "arguments": [
      "self"
    ],
    "return_type": "None",
    "returns": [],
    "docstring": "Generate seed if it doesn't exist in `self.sim_data.seed` and init `random.Random` instance with it\n\nNeeds to be called when we already have `self.sim_data`",
    "line_start": 71,
    "line_end": 79
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\quarry.py",
    "function_name": "update_planned_trips",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 81,
    "line_end": 88
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\quarry.py",
    "function_name": "update_trucks_position",
    "arguments": [
      "self",
      "sim_data"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 90,
    "line_end": 95
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\quarry.py",
    "function_name": "rebuild_plan_by_add_exclude",
    "arguments": [
      "self",
      "start_time",
      "end_time",
      "exclude_object_id",
      "exclude_object_type"
    ],
    "return_type": "None",
    "returns": [],
    "docstring": null,
    "line_start": 97,
    "line_end": 130
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\quarry.py",
    "function_name": "rebuild_plan_by_del_exclude",
    "arguments": [
      "self",
      "start_time",
      "end_time",
      "exclude_object_id",
      "exclude_object_type"
    ],
    "return_type": "None",
    "returns": [],
    "docstring": null,
    "line_start": 132,
    "line_end": 164
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\quarry.py",
    "function_name": "get_summary",
    "arguments": [
      "self",
      "end_time"
    ],
    "return_type": "dict",
    "returns": [
      "self.trip_service.get_summary(end_time)"
    ],
    "docstring": null,
    "line_start": 166,
    "line_end": 167
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\quarry.py",
    "function_name": "push_event",
    "arguments": [
      "self",
      "event_type"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 169,
    "line_end": 203
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\shovel.py",
    "function_name": "__init__",
    "arguments": [
      "self",
      "unit_id",
      "name",
      "position",
      "quarry",
      "properties",
      "tick"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 19,
    "line_end": 65
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\shovel.py",
    "function_name": "current_time",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "self.start_time + timedelta(seconds=self.env.now)"
    ],
    "docstring": null,
    "line_start": 68,
    "line_end": 69
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\shovel.py",
    "function_name": "current_timestamp",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "self.current_time.timestamp()"
    ],
    "docstring": null,
    "line_start": 72,
    "line_end": 73
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\shovel.py",
    "function_name": "_load_truck",
    "arguments": [
      "self",
      "truck"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 76,
    "line_end": 111
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\shovel.py",
    "function_name": "load_truck",
    "arguments": [
      "self",
      "truck"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 113,
    "line_end": 131
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\shovel.py",
    "function_name": "main_tic_process",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 133,
    "line_end": 143
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\shovel.py",
    "function_name": "push_event",
    "arguments": [
      "self",
      "event_type",
      "write_event"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 145,
    "line_end": 185
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\shovel.py",
    "function_name": "telemetry_process",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 187,
    "line_end": 199
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\truck.py",
    "function_name": "__init__",
    "arguments": [
      "self",
      "unit_id",
      "name",
      "initial_position",
      "route",
      "route_edge",
      "start_route",
      "planned_trips",
      "quarry",
      "shovel",
      "unload",
      "properties",
      "fuel_stations",
      "tick"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 33,
    "line_end": 122
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\truck.py",
    "function_name": "nearest_fuel_station",
    "arguments": [
      "self"
    ],
    "return_type": "FuelStation",
    "returns": [
      "nearest_fs"
    ],
    "docstring": null,
    "line_start": 125,
    "line_end": 130
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\truck.py",
    "function_name": "current_time",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "self.start_time + timedelta(seconds=self.env.now)"
    ],
    "docstring": null,
    "line_start": 133,
    "line_end": 134
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\truck.py",
    "function_name": "current_timestamp",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "self.current_time.timestamp()"
    ],
    "docstring": null,
    "line_start": 137,
    "line_end": 138
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\truck.py",
    "function_name": "travel_segment",
    "arguments": [
      "self",
      "p1",
      "p2",
      "speed_limit",
      "acceleration"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 140,
    "line_end": 144
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\truck.py",
    "function_name": "broken_action",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 146,
    "line_end": 150
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\truck.py",
    "function_name": "refuel_action",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [],
    "docstring": "Логика заправок",
    "line_start": 152,
    "line_end": 165
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\truck.py",
    "function_name": "lunch_action",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [],
    "docstring": "Логика обеденных перерывов ",
    "line_start": 167,
    "line_end": 182
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\truck.py",
    "function_name": "planned_idle_action",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [],
    "docstring": "Логика плановых простоев",
    "line_start": 184,
    "line_end": 203
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\truck.py",
    "function_name": "wait_blasting",
    "arguments": [
      "self",
      "current_zones"
    ],
    "return_type": null,
    "returns": [],
    "docstring": "Логика ожидания изменений во взрывных работах",
    "line_start": 205,
    "line_end": 209
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\truck.py",
    "function_name": "blasting_action",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [],
    "docstring": "Логика поведения при активных взрывных работах",
    "line_start": 211,
    "line_end": 261
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\truck.py",
    "function_name": "move_to_area",
    "arguments": [
      "self",
      "area_type",
      "actions"
    ],
    "return_type": null,
    "returns": [],
    "docstring": "Логика поиска ближайшей площадки выбранного типа и следование на эту площадку",
    "line_start": 263,
    "line_end": 330
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\truck.py",
    "function_name": "moving",
    "arguments": [
      "self",
      "route",
      "forward",
      "actions"
    ],
    "return_type": null,
    "returns": [],
    "docstring": "Метод, производящий перемещение самосвала по заданному маршруту с возможностью отклонения от маршрута при необходимости",
    "line_start": 332,
    "line_end": 395
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\truck.py",
    "function_name": "set_route",
    "arguments": [
      "self"
    ],
    "return_type": "None",
    "returns": [],
    "docstring": null,
    "line_start": 397,
    "line_end": 407
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\truck.py",
    "function_name": "set_start_route",
    "arguments": [
      "self"
    ],
    "return_type": "None",
    "returns": [],
    "docstring": null,
    "line_start": 409,
    "line_end": 428
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\truck.py",
    "function_name": "run",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 430,
    "line_end": 503
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\truck.py",
    "function_name": "push_event",
    "arguments": [
      "self",
      "event_type",
      "write_event"
    ],
    "return_type": "None",
    "returns": [],
    "docstring": null,
    "line_start": 505,
    "line_end": 546
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\truck.py",
    "function_name": "telemetry_process",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 548,
    "line_end": 562
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\truck.py",
    "function_name": "current_trip_data",
    "arguments": [
      "self"
    ],
    "return_type": "TripData",
    "returns": [
      "TripData(truck_id=self.id, shovel_id=shovel_id, unload_id=unload_id, truck_weight=self.weight, truck_volume=self.volume)"
    ],
    "docstring": null,
    "line_start": 564,
    "line_end": 574
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\unload.py",
    "function_name": "__init__",
    "arguments": [
      "self",
      "properties",
      "unit_id",
      "name",
      "quarry",
      "tick"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 16,
    "line_end": 51
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\unload.py",
    "function_name": "current_time",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "self.start_time + timedelta(seconds=self.env.now)"
    ],
    "docstring": null,
    "line_start": 54,
    "line_end": 55
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\unload.py",
    "function_name": "current_timestamp",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "self.current_time.timestamp()"
    ],
    "docstring": null,
    "line_start": 58,
    "line_end": 59
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\unload.py",
    "function_name": "unload_truck",
    "arguments": [
      "self",
      "truck"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 61,
    "line_end": 75
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\unload.py",
    "function_name": "push_event",
    "arguments": [
      "self",
      "event_type",
      "write_event"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 77,
    "line_end": 115
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\unload.py",
    "function_name": "main_tic_process",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 117,
    "line_end": 123
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\unload.py",
    "function_name": "telemetry_process",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 125,
    "line_end": 134
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\base.py",
    "function_name": "__init__",
    "arguments": [
      "self",
      "target",
      "props"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 17,
    "line_end": 22
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\base.py",
    "function_name": "run",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [],
    "docstring": "Основной цикл выполнения поведения",
    "line_start": 24,
    "line_end": 26
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\base.py",
    "function_name": "__init__",
    "arguments": [
      "self",
      "target"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 37,
    "line_end": 41
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\base.py",
    "function_name": "run",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 43,
    "line_end": 49
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\base.py",
    "function_name": "__init__",
    "arguments": [
      "self",
      "target",
      "props"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 57,
    "line_end": 59
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\base.py",
    "function_name": "run",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 61,
    "line_end": 88
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\base.py",
    "function_name": "__init__",
    "arguments": [
      "self",
      "target",
      "props"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 96,
    "line_end": 98
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\base.py",
    "function_name": "run",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 100,
    "line_end": 119
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\base.py",
    "function_name": "__init__",
    "arguments": [
      "self",
      "target"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 125,
    "line_end": 127
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\base.py",
    "function_name": "run",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 129,
    "line_end": 157
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\base.py",
    "function_name": "__init__",
    "arguments": [
      "self",
      "target",
      "object_type"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 163,
    "line_end": 165
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\base.py",
    "function_name": "_calculate_idles_times",
    "arguments": [
      "self",
      "target"
    ],
    "return_type": "list[tuple[int, int]]",
    "returns": [
      "idles_times"
    ],
    "docstring": "Собирает из данных о плановых простоях список периодов простоев",
    "line_start": 167,
    "line_end": 180
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\base.py",
    "function_name": "_should_start_planned_idle",
    "arguments": [
      "self"
    ],
    "return_type": "bool",
    "returns": [
      "False",
      "True",
      "True"
    ],
    "docstring": "Проверка возможности начать плановый простой",
    "line_start": 182,
    "line_end": 190
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\base.py",
    "function_name": "run",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 192,
    "line_end": 217
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\blasting.py",
    "function_name": "__init__",
    "arguments": [
      "self",
      "target"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 19,
    "line_end": 22
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\blasting.py",
    "function_name": "generate_blasting_list",
    "arguments": [
      "self"
    ],
    "return_type": "list[Blasting]",
    "returns": [
      "blasting_list"
    ],
    "docstring": "Создаёт список взрывных работ временами относительно времени симуляции",
    "line_start": 24,
    "line_end": 30
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\blasting.py",
    "function_name": "check_trucks_state",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "(trucks_to_exclude, trucks_to_include)"
    ],
    "docstring": "Проверяет состояние самосвалов карьера.\nЕсли попал в состояние ожидания проведения взрывных работ, перепланируем рейсы, исключив этот самосвал.\nЕсли вышел из состояния ожидания проведения взрывных работ, перепланируем рейсы, включив этот самосвал.",
    "line_start": 32,
    "line_end": 50
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\blasting.py",
    "function_name": "run",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 52,
    "line_end": 94
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\blasting.py",
    "function_name": "__init__",
    "arguments": [
      "self",
      "target"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 105,
    "line_end": 106
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\blasting.py",
    "function_name": "run",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 108,
    "line_end": 118
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\blasting.py",
    "function_name": "__init__",
    "arguments": [
      "self",
      "target"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 129,
    "line_end": 130
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\blasting.py",
    "function_name": "wait_blasting_changing",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 132,
    "line_end": 139
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\blasting.py",
    "function_name": "run",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 141,
    "line_end": 175
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\blasting.py",
    "function_name": "__init__",
    "arguments": [
      "self",
      "target"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 186,
    "line_end": 187
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\blasting.py",
    "function_name": "wait_blasting_changing",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 189,
    "line_end": 196
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\behaviors\\blasting.py",
    "function_name": "run",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 198,
    "line_end": 232
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\dependency_resolver.py",
    "function_name": "sim_conf",
    "arguments": [
      "cls"
    ],
    "return_type": "dict",
    "returns": [
      "cls.__resolve('sim_conf')"
    ],
    "docstring": null,
    "line_start": 15,
    "line_end": 16
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\dependency_resolver.py",
    "function_name": "writer",
    "arguments": [
      "cls"
    ],
    "return_type": "'IWriter'",
    "returns": [
      "cls.__resolve('writer')"
    ],
    "docstring": null,
    "line_start": 19,
    "line_end": 20
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\dependency_resolver.py",
    "function_name": "solver",
    "arguments": [
      "cls"
    ],
    "return_type": "'GreedySolver'",
    "returns": [
      "cls.__resolve('solver')"
    ],
    "docstring": null,
    "line_start": 23,
    "line_end": 24
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\dependency_resolver.py",
    "function_name": "trip_service",
    "arguments": [
      "cls"
    ],
    "return_type": "'TripService'",
    "returns": [
      "cls.__resolve('trip_service')"
    ],
    "docstring": null,
    "line_start": 27,
    "line_end": 28
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\dependency_resolver.py",
    "function_name": "idle_area_service",
    "arguments": [
      "cls"
    ],
    "return_type": "'IdleAreaService'",
    "returns": [
      "cls.__resolve('idle_area_service')"
    ],
    "docstring": null,
    "line_start": 31,
    "line_end": 32
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\dependency_resolver.py",
    "function_name": "env",
    "arguments": [
      "cls"
    ],
    "return_type": "'QSimEnvironment'",
    "returns": [
      "cls.__resolve('sim_env')"
    ],
    "docstring": null,
    "line_start": 35,
    "line_end": 36
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\dependency_resolver.py",
    "function_name": "__resolve",
    "arguments": [
      "alias"
    ],
    "return_type": "Any",
    "returns": [
      "ServiceLocator.get_or_fail(alias)"
    ],
    "docstring": null,
    "line_start": 39,
    "line_end": 40
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\helpers.py",
    "function_name": "sim_current_timestamp",
    "arguments": [],
    "return_type": "float",
    "returns": [
      "sim_current_time().timestamp()"
    ],
    "docstring": null,
    "line_start": 6,
    "line_end": 7
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\helpers.py",
    "function_name": "sim_current_time",
    "arguments": [],
    "return_type": "datetime",
    "returns": [
      "env.sim_data.start_time + timedelta(seconds=env.now)"
    ],
    "docstring": null,
    "line_start": 10,
    "line_end": 12
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\helpers.py",
    "function_name": "sim_end_time",
    "arguments": [],
    "return_type": "datetime",
    "returns": [
      "env.sim_data.end_time"
    ],
    "docstring": null,
    "line_start": 15,
    "line_end": 17
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\helpers.py",
    "function_name": "sim_start_time",
    "arguments": [],
    "return_type": "datetime",
    "returns": [
      "env.sim_data.start_time"
    ],
    "docstring": null,
    "line_start": 20,
    "line_end": 22
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\idle_area_service.py",
    "function_name": "__init__",
    "arguments": [
      "self",
      "idle_area_storage"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 11,
    "line_end": 12
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\idle_area_service.py",
    "function_name": "get_areas",
    "arguments": [
      "self",
      "area_type"
    ],
    "return_type": "list[IdleArea]",
    "returns": [
      "[]",
      "self.storage.all",
      "self.storage.lunch_areas"
    ],
    "docstring": "Сбор площадок соответствующего типа",
    "line_start": 14,
    "line_end": 29
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\idle_area_service.py",
    "function_name": "find_nearest",
    "arguments": [
      "self",
      "area_type",
      "lon",
      "lat",
      "edge_idx",
      "restricted_zones",
      "road_net"
    ],
    "return_type": "Tuple[IdleArea, RouteEdge] | Tuple[None, None]",
    "returns": [
      "(best_area, best_route)"
    ],
    "docstring": "Поиск ближайшей площадки, соответствующей указанному типу.\nПоиск происходит по графу относительно переданной позиции.\nПри наличии запрещённых зон для проезда поиск будет вестись с учётом этих зон.\n\nПри отсутствии проезда к площадке из-за запретных зон будет выбрана другая ближайшая площадка при наличии\nк ней проезда.\n\nВозвращает кортеж: площадка, маршрут на графе к площадке",
    "line_start": 31,
    "line_end": 77
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\mixins.py",
    "function_name": "to_dict",
    "arguments": [
      "self"
    ],
    "return_type": "dict",
    "returns": [
      "result",
      "field_value",
      "str(field_value)"
    ],
    "docstring": null,
    "line_start": 7,
    "line_end": 18
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\mixins.py",
    "function_name": "serialize",
    "arguments": [
      "field_value"
    ],
    "return_type": null,
    "returns": [
      "field_value",
      "str(field_value)"
    ],
    "docstring": null,
    "line_start": 8,
    "line_end": 11
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\service_locator.py",
    "function_name": "bind",
    "arguments": [
      "cls",
      "alias",
      "instance"
    ],
    "return_type": "None",
    "returns": [],
    "docstring": null,
    "line_start": 8,
    "line_end": 11
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\service_locator.py",
    "function_name": "get_or_fail",
    "arguments": [
      "cls",
      "alias",
      "fail_message"
    ],
    "return_type": "Any",
    "returns": [
      "service"
    ],
    "docstring": null,
    "line_start": 14,
    "line_end": 21
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\service_locator.py",
    "function_name": "get",
    "arguments": [
      "cls",
      "alias"
    ],
    "return_type": "Any",
    "returns": [
      "None",
      "cls.__services[alias]"
    ],
    "docstring": null,
    "line_start": 24,
    "line_end": 27
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\service_locator.py",
    "function_name": "has",
    "arguments": [
      "cls",
      "alias"
    ],
    "return_type": "bool",
    "returns": [
      "alias in cls.__services"
    ],
    "docstring": null,
    "line_start": 30,
    "line_end": 31
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\service_locator.py",
    "function_name": "unbind",
    "arguments": [
      "cls",
      "alias"
    ],
    "return_type": "None",
    "returns": [],
    "docstring": null,
    "line_start": 34,
    "line_end": 35
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\service_locator.py",
    "function_name": "unbind_all",
    "arguments": [
      "cls"
    ],
    "return_type": "None",
    "returns": [],
    "docstring": null,
    "line_start": 38,
    "line_end": 39
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\trip_service.py",
    "function_name": "__init__",
    "arguments": [
      "self"
    ],
    "return_type": "None",
    "returns": [],
    "docstring": null,
    "line_start": 14,
    "line_end": 30
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\trip_service.py",
    "function_name": "set_shift_change_area",
    "arguments": [
      "self",
      "shift_change_area"
    ],
    "return_type": "None",
    "returns": [],
    "docstring": null,
    "line_start": 32,
    "line_end": 33
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\trip_service.py",
    "function_name": "begin",
    "arguments": [
      "self",
      "trip_data"
    ],
    "return_type": "None",
    "returns": [],
    "docstring": null,
    "line_start": 35,
    "line_end": 63
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\trip_service.py",
    "function_name": "finish",
    "arguments": [
      "self",
      "trip_data"
    ],
    "return_type": "None",
    "returns": [],
    "docstring": null,
    "line_start": 65,
    "line_end": 70
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\trip_service.py",
    "function_name": "get_summary",
    "arguments": [
      "self",
      "end_time"
    ],
    "return_type": "dict",
    "returns": [
      "summary"
    ],
    "docstring": null,
    "line_start": 72,
    "line_end": 115
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\trip_service.py",
    "function_name": "print_summary",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 117,
    "line_end": 121
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\trip_service.py",
    "function_name": "__finish_actual_trip",
    "arguments": [
      "self",
      "trip_data"
    ],
    "return_type": "ActualTrip",
    "returns": [
      "actual_trip"
    ],
    "docstring": null,
    "line_start": 123,
    "line_end": 144
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\core\\simulations\\utils\\trip_service.py",
    "function_name": "__update_summary_metrics",
    "arguments": [
      "self",
      "finished_trip"
    ],
    "return_type": "None",
    "returns": [],
    "docstring": null,
    "line_start": 146,
    "line_end": 171
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\infra\\exception_traceback.py",
    "function_name": "catch_errors",
    "arguments": [
      "func"
    ],
    "return_type": null,
    "returns": [
      "wrapper",
      "result"
    ],
    "docstring": null,
    "line_start": 10,
    "line_end": 24
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\infra\\exception_traceback.py",
    "function_name": "wrapper",
    "arguments": [],
    "return_type": null,
    "returns": [
      "result"
    ],
    "docstring": null,
    "line_start": 12,
    "line_end": 22
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\infra\\logger\\json_formatter.py",
    "function_name": "format",
    "arguments": [
      "self",
      "record"
    ],
    "return_type": "str",
    "returns": [
      "json.dumps(log_object, ensure_ascii=False)"
    ],
    "docstring": null,
    "line_start": 7,
    "line_end": 22
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\infra\\logger\\logger.py",
    "function_name": "init",
    "arguments": [],
    "return_type": "None",
    "returns": [],
    "docstring": null,
    "line_start": 9,
    "line_end": 10
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\tests\\test_simulate.py",
    "function_name": "input_data",
    "arguments": [],
    "return_type": null,
    "returns": [
      "json.load(f)"
    ],
    "docstring": null,
    "line_start": 18,
    "line_end": 23
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\tests\\test_simulate.py",
    "function_name": "validate_result",
    "arguments": [
      "result"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 26,
    "line_end": 78
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\tests\\test_simulate.py",
    "function_name": "test_simulation_result",
    "arguments": [
      "input_data"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 81,
    "line_end": 103
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\tests\\test_simulate.py",
    "function_name": "test_shovel_telemetry",
    "arguments": [
      "input_data"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 106,
    "line_end": 128
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\tests\\test_simulate.py",
    "function_name": "test_truck_telemetry",
    "arguments": [
      "input_data"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 131,
    "line_end": 149
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\tests\\test_simulate.py",
    "function_name": "test_unload_telemetry",
    "arguments": [
      "input_data"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 152,
    "line_end": 171
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\tests\\test_simulate.py",
    "function_name": "test_fuel_station_telemetry",
    "arguments": [
      "input_data"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 174,
    "line_end": 193
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\tests\\test_simulate.py",
    "function_name": "test_summary_result",
    "arguments": [
      "input_data"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 196,
    "line_end": 220
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\tests\\test_simulate.py",
    "function_name": "test_events",
    "arguments": [
      "input_data"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 223,
    "line_end": 246
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\tests\\test_simulate.py",
    "function_name": "test_summary_result_with_breakdown",
    "arguments": [
      "input_data"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 249,
    "line_end": 275
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\tests\\test_simulate.py",
    "function_name": "test_breakdown_events_count",
    "arguments": [
      "input_data"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 278,
    "line_end": 283
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\tests\\test_simulate.py",
    "function_name": "test_summary_result_with_refuel",
    "arguments": [
      "input_data"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 286,
    "line_end": 312
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\tests\\test_simulate.py",
    "function_name": "test_refuel_events_count",
    "arguments": [
      "input_data"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 315,
    "line_end": 320
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\tests\\test_simulate.py",
    "function_name": "test_summary_result_with_lunch",
    "arguments": [
      "input_data"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 323,
    "line_end": 349
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\tests\\test_simulate.py",
    "function_name": "test_lunch_events_count",
    "arguments": [
      "input_data"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 352,
    "line_end": 357
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\tests\\test_simulate.py",
    "function_name": "test_summary_result_with_planned_idle",
    "arguments": [
      "input_data"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 360,
    "line_end": 386
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\tests\\test_simulate.py",
    "function_name": "test_planned_idle_events_count",
    "arguments": [
      "input_data"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 389,
    "line_end": 394
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\tests\\test_simulate.py",
    "function_name": "test_blasting_events_count",
    "arguments": [
      "input_data"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 397,
    "line_end": 402
  },
  {
    "file_path": "qsimmine12\\app\\sim_engine\\tests\\test_simulate.py",
    "function_name": "test_auto_mode_summary_result",
    "arguments": [
      "input_data"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 405,
    "line_end": 431
  },
  {
    "file_path": "qsimmine12\\app\\tests\\conftest.py",
    "function_name": "redis_mock",
    "arguments": [],
    "return_type": null,
    "returns": [],
    "docstring": "Создает мок-сессию базы данных",
    "line_start": 12,
    "line_end": 17
  },
  {
    "file_path": "qsimmine12\\app\\tests\\conftest.py",
    "function_name": "app",
    "arguments": [],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 21,
    "line_end": 85
  },
  {
    "file_path": "qsimmine12\\app\\tests\\conftest.py",
    "function_name": "override_get_db",
    "arguments": [],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 64,
    "line_end": 65
  },
  {
    "file_path": "qsimmine12\\app\\tests\\conftest.py",
    "function_name": "client",
    "arguments": [
      "app"
    ],
    "return_type": null,
    "returns": [
      "TestClient(app)"
    ],
    "docstring": "Создает тестовый клиент FastAPI",
    "line_start": 89,
    "line_end": 91
  },
  {
    "file_path": "qsimmine12\\app\\tests\\conftest.py",
    "function_name": "db_session",
    "arguments": [],
    "return_type": null,
    "returns": [],
    "docstring": "Создает мок-сессию базы данных",
    "line_start": 94,
    "line_end": 99
  },
  {
    "file_path": "qsimmine12\\app\\tests\\conftest.py",
    "function_name": "init_database",
    "arguments": [
      "db_session"
    ],
    "return_type": null,
    "returns": [
      "{'quarry': quarry}"
    ],
    "docstring": "Создает тестовые данные в базе (mocked)",
    "line_start": 103,
    "line_end": 124
  },
  {
    "file_path": "qsimmine12\\app\\tests\\test_api.py",
    "function_name": "test_handbook_returns_200",
    "arguments": [
      "client"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 8,
    "line_end": 10
  },
  {
    "file_path": "qsimmine12\\app\\tests\\test_api.py",
    "function_name": "test_defaults_returns_200_and_dict",
    "arguments": [
      "client"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 13,
    "line_end": 16
  },
  {
    "file_path": "qsimmine12\\app\\tests\\test_api.py",
    "function_name": "test_scenarios_returns_200_and_list",
    "arguments": [
      "client"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 19,
    "line_end": 22
  },
  {
    "file_path": "qsimmine12\\app\\tests\\test_api.py",
    "function_name": "test_quarry_data_returns_200_and_valid_json",
    "arguments": [
      "self",
      "client"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 28,
    "line_end": 34
  },
  {
    "file_path": "qsimmine12\\app\\tests\\test_api.py",
    "function_name": "test_invalid_method_returns_405_on_get",
    "arguments": [
      "self",
      "client"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 41,
    "line_end": 43
  },
  {
    "file_path": "qsimmine12\\app\\tests\\test_api.py",
    "function_name": "test_invalid_payload_returns_400_on_post",
    "arguments": [
      "self",
      "client"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 45,
    "line_end": 52
  },
  {
    "file_path": "qsimmine12\\app\\tests\\test_api.py",
    "function_name": "test_create_quarry_success",
    "arguments": [
      "self",
      "client"
    ],
    "return_type": null,
    "returns": [
      "True",
      "Quarry(**self.data)",
      "iter([])"
    ],
    "docstring": null,
    "line_start": 54,
    "line_end": 96
  },
  {
    "file_path": "qsimmine12\\app\\tests\\test_api.py",
    "function_name": "__init__",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 77,
    "line_end": 79
  },
  {
    "file_path": "qsimmine12\\app\\tests\\test_api.py",
    "function_name": "validate",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "True"
    ],
    "docstring": null,
    "line_start": 81,
    "line_end": 82
  },
  {
    "file_path": "qsimmine12\\app\\tests\\test_api.py",
    "function_name": "instantiate_object",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "Quarry(**self.data)"
    ],
    "docstring": null,
    "line_start": 84,
    "line_end": 85
  },
  {
    "file_path": "qsimmine12\\app\\tests\\test_api.py",
    "function_name": "__iter__",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "iter([])"
    ],
    "docstring": null,
    "line_start": 87,
    "line_end": 88
  },
  {
    "file_path": "qsimmine12\\app\\tests\\test_api.py",
    "function_name": "dict",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "self.data"
    ],
    "docstring": null,
    "line_start": 90,
    "line_end": 91
  },
  {
    "file_path": "qsimmine12\\app\\tests\\test_api.py",
    "function_name": "test_create_object_success",
    "arguments": [
      "self",
      "client",
      "init_database",
      "object_type",
      "data_factory",
      "model_class"
    ],
    "return_type": null,
    "returns": [
      "True",
      "model_class(**self.data)",
      "iter([])"
    ],
    "docstring": null,
    "line_start": 144,
    "line_end": 208
  },
  {
    "file_path": "qsimmine12\\app\\tests\\test_api.py",
    "function_name": "__init__",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [],
    "docstring": null,
    "line_start": 163,
    "line_end": 165
  },
  {
    "file_path": "qsimmine12\\app\\tests\\test_api.py",
    "function_name": "validate",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "True"
    ],
    "docstring": null,
    "line_start": 167,
    "line_end": 168
  },
  {
    "file_path": "qsimmine12\\app\\tests\\test_api.py",
    "function_name": "instantiate_object",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "model_class(**self.data)"
    ],
    "docstring": null,
    "line_start": 170,
    "line_end": 171
  },
  {
    "file_path": "qsimmine12\\app\\tests\\test_api.py",
    "function_name": "__iter__",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "iter([])"
    ],
    "docstring": null,
    "line_start": 173,
    "line_end": 174
  },
  {
    "file_path": "qsimmine12\\app\\tests\\test_api.py",
    "function_name": "dict",
    "arguments": [
      "self"
    ],
    "return_type": null,
    "returns": [
      "self.data"
    ],
    "docstring": null,
    "line_start": 176,
    "line_end": 177
  },
  {
    "file_path": "qsimmine12\\app\\tests\\test_api.py",
    "function_name": "test_returns_404",
    "arguments": [
      "self",
      "client",
      "endpoint"
    ],
    "return_type": null,
    "returns": [],
    "docstring": "Проверяем, что несуществующие ресурсы возвращают 404",
    "line_start": 223,
    "line_end": 226
  }
]