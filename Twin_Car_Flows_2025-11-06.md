### Полный каталог классов (с потоками/KPI/NFR/событиями)

| Класс | Назначение | Как создаётся | Источник | Потоки | На что влияет | Связи/триггеры | KPI/метрики | Нефункциональные | События/расписания |
|---|---|---|---|---|---|---|---|---|---|
| ActualTrip | Датакласс симдвижка | автоматически (сериализатор) | SimData (из API+БД) | Внутрь симуляции | Динамика моделирования | обеды/пересменки/взрывы/простои (через SimData); триггер: - | точность входных параметров | - | обеды/пересменки/взрывы/простои (через SimData) |
| AllTemplatesDTO | Сервис/DAO бизнес-логики | автоматически (код сервиса) | БД/Redis/конфиг | DTO → API | Агрегация/правила | запросы API, построение витрины; триггер: вызовы роутов | SLA ответа API, корректность витрины | латентность, пиковая нагрузка на БД | запросы API, построение витрины |
| AllTemplatesListService | Собирает все шаблоны в словарь списков и возвращает DTO. | автоматически (код сервиса) | БД/Redis/конфиг | DTO → API | Агрегация/правила | запросы API, построение витрины; триггер: вызовы роутов | SLA ответа API, корректность витрины | латентность, пиковая нагрузка на БД | запросы API, построение витрины |
| Base | ORM модель домена | вручную (UI/API) | БД / пользовательский ввод | Сервисы → API/витрины → сериализатор | Состав и параметры домена | CRUD события (create/update/delete); триггер: действия пользователя/интеграции | наполнение справочников, полнота данных | объёмы записей, индексы, время коммита | CRUD события (create/update/delete) |
| BaseBehavior | Абстрактный базовый класс для всех поведений в симуляции. Определяет общий интерфейс и шаблоны выполнения. | - | - | - | - | -; триггер: - | - | - | - |
| BaseObject | Абстрактная базовая модель для объектов | вручную (UI/API) | БД / пользовательский ввод | Сервисы → API/витрины → сериализатор | Состав и параметры домена | CRUD события (create/update/delete); триггер: действия пользователя/интеграции | наполнение справочников, полнота данных | объёмы записей, индексы, время коммита | CRUD события (create/update/delete) |
| BaseObjectSchema | Валидация/маппинг входных данных | автоматически (код при CRUD) | HTTP JSON | ObjectService → ORM | Качество/консистентность записи | -; триггер: - | - | - | - |
| BaseObjectService | Сервис/DAO бизнес-логики | автоматически (код сервиса) | БД/Redis/конфиг | DTO → API | Агрегация/правила | запросы API, построение витрины; триггер: вызовы роутов | SLA ответа API, корректность витрины | латентность, пиковая нагрузка на БД | запросы API, построение витрины |
| BaseTickBehavior | Класс определяющий базовую последовательность в логике расчетов каждый тик(фрейм) Этапы: 1. Расчеты для состояния актора. Метод state_process 2. Упаковка телеметрии. Метод telemetry_process | - | - | - | - | -; триггер: - | - | - | - |
| BaseVehicle | Абстрактная базовая модель для транспортных средств | вручную (UI/API) | БД / пользовательский ввод | Сервисы → API/витрины → сериализатор | Состав и параметры домена | CRUD события (create/update/delete); триггер: действия пользователя/интеграции | наполнение справочников, полнота данных | объёмы записей, индексы, время коммита | CRUD события (create/update/delete) |
| BaseVehicleSchema | Валидация/маппинг входных данных | автоматически (код при CRUD) | HTTP JSON | ObjectService → ORM | Качество/консистентность записи | -; триггер: - | - | - | - |
| BatchWriter | Запись результатов симуляции | автоматически (цикл симуляции) | События симуляции | Redis → API чтения | Доступность результатов | события записи, ротация батчей; триггер: накопление событий/таймер | пропускная способность записи, задержка до Redis | скорость записи в Redis, объём батчей | события записи, ротация батчей |
| Blasting | Расписание взрывных работ | вручную (UI/API) | БД / пользовательский ввод | Сервисы → API/витрины → сериализатор | Состав и параметры домена | CRUD события (create/update/delete); триггер: действия пользователя/интеграции | наполнение справочников, полнота данных | объёмы записей, индексы, время коммита | CRUD события (create/update/delete) |
| Blasting | Датакласс симдвижка | автоматически (сериализатор) | SimData (из API+БД) | Внутрь симуляции | Динамика моделирования | обеды/пересменки/взрывы/простои (через SimData); триггер: - | точность входных параметров | - | обеды/пересменки/взрывы/простои (через SimData) |
| BlastingSchema | Валидация/маппинг входных данных | автоматически (код при CRUD) | HTTP JSON | ObjectService → ORM | Качество/консистентность записи | -; триггер: - | - | - | - |
| BreakdownBehavior | Класс вычисляющий Поломки/Восстановления | - | - | - | - | -; триггер: - | - | - | - |
| BreakdownCalc | Расчеты Поломок/Восстановлений | автоматически (движок) | ТТХ/события | Расчёт в симуляции | Тайминги/ресурсы | -; триггер: - | точность таймингов, производительность | CPU-интенсивность | - |
| CPSolver | Планировщик/сольвер/входные данные | автоматически (планировщик) | InputPlanningData/SimData | План → симуляция | Распределение/эффективность | -; триггер: - | качество плана (очередность), время решения | время решения, ограничение памяти | - |
| DataclassEnumSerializerMixin | Класс приложения | - | - | - | - | -; триггер: - | - | - | - |
| DataValidateError | Класс приложения | - | - | - | - | -; триггер: - | - | - | - |
| DefaultValuesMixin | Миксин для сбора значений по умолчанию | вручную (UI/API) | БД / пользовательский ввод | Сервисы → API/витрины → сериализатор | Состав и параметры домена | CRUD события (create/update/delete); триггер: действия пользователя/интеграции | наполнение справочников, полнота данных | объёмы записей, индексы, время коммита | CRUD события (create/update/delete) |
| DeleteObjectRequest | DTO/валидатор роутов | автоматически (иниц. роутером) | HTTP запрос/ответ | Роуты FastAPI | Контракты API | -; триггер: - | валидность контрактов | - | - |
| DependencyResolver | Класс приложения | - | - | - | - | -; триггер: - | - | - | - |
| DictReliabilityWriter | Запись результатов симуляции | автоматически (цикл симуляции) | События симуляции | Redis → API чтения | Доступность результатов | события записи, ротация батчей; триггер: накопление событий/таймер | пропускная способность записи, задержка до Redis | скорость записи в Redis, объём батчей | события записи, ротация батчей |
| DictSimpleWriter | Запись результатов симуляции | автоматически (цикл симуляции) | События симуляции | Redis → API чтения | Доступность результатов | события записи, ротация батчей; триггер: накопление событий/таймер | пропускная способность записи, задержка до Redis | скорость записи в Redis, объём батчей | события записи, ротация батчей |
| DXFConverter | Конвертер DXF → GeoJSON | автоматически (конвертация по действию пользователя) | Файлы DXF/GeoJSON | GeoJSON в MapOverlay | Визуализация | -; триггер: загрузка файла/конверсия | - | - | - |
| Event | Состояния/события/поведения | автоматически (движок) | Внутреннее состояние движка | Цикл симуляции | Переходы и ограничения | переходы состояний, аварии, топливо; триггер: - | - | - | переходы состояний, аварии, топливо |
| EventType | Состояния/события/поведения | автоматически (движок) | Внутреннее состояние движка | Цикл симуляции | Переходы и ограничения | переходы состояний, аварии, топливо; триггер: - | - | - | переходы состояний, аварии, топливо |
| ExcState | Состояния/события/поведения | автоматически (движок) | Внутреннее состояние движка | Цикл симуляции | Переходы и ограничения | переходы состояний, аварии, топливо; триггер: - | - | - | переходы состояний, аварии, топливо |
| FuelBehavior | Класс Управляющий топливом | - | - | - | - | -; триггер: - | - | - | - |
| FuelCalc | Расчётные блоки | автоматически (движок) | ТТХ/события | Расчёт в симуляции | Тайминги/ресурсы | -; триггер: - | точность таймингов, производительность | CPU-интенсивность | - |
| FuelStation | Заправка | вручную (UI/API) | БД / пользовательский ввод | Сервисы → API/витрины → сериализатор | Состав и параметры домена | CRUD события (create/update/delete); триггер: действия пользователя/интеграции | наполнение справочников, полнота данных | объёмы записей, индексы, время коммита | CRUD события (create/update/delete) |
| FuelStation | Датакласс симдвижка | автоматически (сериализатор) | SimData (из API+БД) | Внутрь симуляции | Динамика моделирования | обеды/пересменки/взрывы/простои (через SimData); триггер: - | точность входных параметров | - | обеды/пересменки/взрывы/простои (через SimData) |
| FuelStation | Класс приложения | - | - | - | - | -; триггер: - | - | - | - |
| FuelStationArgsMixin | Валидация/маппинг входных данных | автоматически (код при CRUD) | HTTP JSON | ObjectService → ORM | Качество/консистентность записи | -; триггер: - | - | - | - |
| FuelStationArgsMixin | Основные параметры заправки для обсчёта симуляции | вручную (UI/API) | БД / пользовательский ввод | Сервисы → API/витрины → сериализатор | Состав и параметры домена | CRUD события (create/update/delete); триггер: действия пользователя/интеграции | наполнение справочников, полнота данных | объёмы записей, индексы, время коммита | CRUD события (create/update/delete) |
| FuelStationEvent | Состояния/события/поведения | автоматически (движок) | Внутреннее состояние движка | Цикл симуляции | Переходы и ограничения | переходы состояний, аварии, топливо; триггер: - | - | - | переходы состояний, аварии, топливо |
| FuelStationProperties | Датакласс симдвижка | автоматически (сериализатор) | SimData (из API+БД) | Внутрь симуляции | Динамика моделирования | обеды/пересменки/взрывы/простои (через SimData); триггер: - | точность входных параметров | - | обеды/пересменки/взрывы/простои (через SimData) |
| FuelStationSchema | Валидация/маппинг входных данных | автоматически (код при CRUD) | HTTP JSON | ObjectService → ORM | Качество/консистентность записи | -; триггер: - | - | - | - |
| FuelStationState | Состояния/события/поведения | автоматически (движок) | Внутреннее состояние движка | Цикл симуляции | Переходы и ограничения | переходы состояний, аварии, топливо; триггер: - | - | - | переходы состояний, аварии, топливо |
| FuelStationTemplate | Шаблон заправки | вручную (UI/API) | БД / пользовательский ввод | Сервисы → API/витрины → сериализатор | Состав и параметры домена | CRUD события (create/update/delete); триггер: действия пользователя/интеграции | наполнение справочников, полнота данных | объёмы записей, индексы, время коммита | CRUD события (create/update/delete) |
| FuelStationTemplateSchema | Валидация/маппинг входных данных | автоматически (код при CRUD) | HTTP JSON | ObjectService → ORM | Качество/консистентность записи | -; триггер: - | - | - | - |
| GenericObjectService | Сервис/DAO бизнес-логики | автоматически (код сервиса) | БД/Redis/конфиг | DTO → API | Агрегация/правила | запросы API, построение витрины; триггер: вызовы роутов | SLA ответа API, корректность витрины | латентность, пиковая нагрузка на БД | запросы API, построение витрины |
| GetSimIdService | Основной сервис симуляции — собирает данные, запускает SimulationManager и сохраняет результат. | автоматически (код сервиса) | БД/Redis/конфиг | DTO → API | Агрегация/правила | запросы API, построение витрины; триггер: вызовы роутов | SLA ответа API, корректность витрины | латентность, пиковая нагрузка на БД | запросы API, построение витрины |
| GreedySolver | Планировщик/сольвер/входные данные | автоматически (планировщик) | InputPlanningData/SimData | План → симуляция | Распределение/эффективность | -; триггер: - | качество плана (очередность), время решения | время решения, ограничение памяти | - |
| IdleArea | Зона ожидания (пересменки, обеда и т.д.) | вручную (UI/API) | БД / пользовательский ввод | Сервисы → API/витрины → сериализатор | Состав и параметры домена | CRUD события (create/update/delete); триггер: действия пользователя/интеграции | наполнение справочников, полнота данных | объёмы записей, индексы, время коммита | CRUD события (create/update/delete) |
| IdleArea | Датакласс симдвижка | автоматически (сериализатор) | SimData (из API+БД) | Внутрь симуляции | Динамика моделирования | обеды/пересменки/взрывы/простои (через SimData); триггер: - | точность входных параметров | - | обеды/пересменки/взрывы/простои (через SimData) |
| IdleAreaSchema | Валидация/маппинг входных данных | автоматически (код при CRUD) | HTTP JSON | ObjectService → ORM | Качество/консистентность записи | -; триггер: - | - | - | - |
| IdleAreaService | Сервис, предоставляющий операции для работы с площадками простоев | - | - | - | - | -; триггер: - | - | - | - |
| IdleAreaStorage | Датакласс симдвижка | автоматически (сериализатор) | SimData (из API+БД) | Внутрь симуляции | Динамика моделирования | обеды/пересменки/взрывы/простои (через SimData); триггер: - | точность входных параметров | - | обеды/пересменки/взрывы/простои (через SimData) |
| IdleAreaType | Класс приложения | - | - | - | - | -; триггер: - | - | - | - |
| IManagerValidator | Оркестрация запуска симуляции | автоматически (ручной триггер запуска) | Запрос запуска/конфиг | Оркестрация запуска | Успешность запуска | запуск симуляции, завершение батча; триггер: POST /api/run-simulation | время старта, стабильность батчей | время инициализации, масштабирование процессов | запуск симуляции, завершение батча |
| InputPlanningData | Планировщик/сольвер/входные данные | автоматически (планировщик) | InputPlanningData/SimData | План → симуляция | Распределение/эффективность | -; триггер: - | качество плана (очередность), время решения | время решения, ограничение памяти | - |
| InputPlanningData | Класс приложения | - | - | - | - | -; триггер: - | - | - | - |
| IWriter | Запись результатов симуляции | автоматически (цикл симуляции) | События симуляции | Redis → API чтения | Доступность результатов | события записи, ротация батчей; триггер: накопление событий/таймер | пропускная способность записи, задержка до Redis | скорость записи в Redis, объём батчей | события записи, ротация батчей |
| JsonFormatter | Логирование | автоматически | Сообщения/события | Файлы/консоль | Диагностика | -; триггер: - | - | - | - |
| LocationMixin | Валидация/маппинг входных данных | автоматически (код при CRUD) | HTTP JSON | ObjectService → ORM | Качество/консистентность записи | -; триггер: - | - | - | - |
| LocationMixin | Миксин для локации | вручную (UI/API) | БД / пользовательский ввод | Сервисы → API/витрины → сериализатор | Состав и параметры домена | CRUD события (create/update/delete); триггер: действия пользователя/интеграции | наполнение справочников, полнота данных | объёмы записей, индексы, время коммита | CRUD события (create/update/delete) |
| Logger | Логирование | автоматически | Сообщения/события | Файлы/консоль | Диагностика | -; триггер: - | - | - | - |
| LunchBehavior | Класс для техники, управляющий отслеживанием обедов и запуском обеденного простоя | - | - | - | - | -; триггер: - | - | - | - |
| LunchCalc | Расчёты времён обеденных перерывов | автоматически (движок) | ТТХ/события | Расчёт в симуляции | Тайминги/ресурсы | -; триггер: - | точность таймингов, производительность | CPU-интенсивность | - |
| ManagerValidationError | Любые ошибки валидации для менеджера | автоматически (ручной триггер запуска) | Запрос запуска/конфиг | Оркестрация запуска | Успешность запуска | запуск симуляции, завершение батча; триггер: POST /api/run-simulation | время старта, стабильность батчей | время инициализации, масштабирование процессов | запуск симуляции, завершение батча |
| MapOverlay | Подложка карты | вручную (UI/API) | БД / пользовательский ввод | Сервисы → API/витрины → сериализатор | Состав и параметры домена | CRUD события (create/update/delete); триггер: действия пользователя/интеграции | наполнение справочников, полнота данных | объёмы записей, индексы, время коммита | CRUD события (create/update/delete) |
| MapOverlaySchema | Валидация/маппинг входных данных | автоматически (код при CRUD) | HTTP JSON | ObjectService → ORM | Качество/консистентность записи | -; триггер: - | - | - | - |
| MILPSolver | Планировщик/сольвер/входные данные | автоматически (планировщик) | InputPlanningData/SimData | План → симуляция | Распределение/эффективность | -; триггер: - | качество плана (очередность), время решения | время решения, ограничение памяти | - |
| ObjectActionRequest | Валидация/маппинг входных данных | автоматически (код при CRUD) | HTTP JSON | ObjectService → ORM | Качество/консистентность записи | -; триггер: - | - | - | - |
| ObjectDAO | Сервис/DAO бизнес-логики | автоматически (код сервиса) | БД/Redis/конфиг | DTO → API | Агрегация/правила | запросы API, построение витрины; триггер: вызовы роутов | SLA ответа API, корректность витрины | латентность, пиковая нагрузка на БД | запросы API, построение витрины |
| ObjectService | Сервис/DAO бизнес-логики | автоматически (код сервиса) | БД/Redis/конфиг | DTO → API | Агрегация/правила | запросы API, построение витрины; триггер: вызовы роутов | SLA ответа API, корректность витрины | латентность, пиковая нагрузка на БД | запросы API, построение витрины |
| ObjectType | Класс приложения | - | - | - | - | -; триггер: - | - | - | - |
| PayloadType | Класс приложения | - | - | - | - | -; триггер: - | - | - | - |
| PlannedIdle | Плановый простой | вручную (UI/API) | БД / пользовательский ввод | Сервисы → API/витрины → сериализатор | Состав и параметры домена | CRUD события (create/update/delete); триггер: действия пользователя/интеграции | наполнение справочников, полнота данных | объёмы записей, индексы, время коммита | CRUD события (create/update/delete) |
| PlannedIdle | Датакласс симдвижка | автоматически (сериализатор) | SimData (из API+БД) | Внутрь симуляции | Динамика моделирования | обеды/пересменки/взрывы/простои (через SimData); триггер: - | точность входных параметров | - | обеды/пересменки/взрывы/простои (через SimData) |
| PlannedIdleBehavior | Класс для техники, управляющий отслеживанием и запуском запланированных простоев | - | - | - | - | -; триггер: - | - | - | - |
| PlannedIdleSchema | Валидация/маппинг входных данных | автоматически (код при CRUD) | HTTP JSON | ObjectService → ORM | Качество/консистентность записи | -; триггер: - | - | - | - |
| PlannedTrip | Датакласс симдвижка | автоматически (сериализатор) | SimData (из API+БД) | Внутрь симуляции | Динамика моделирования | обеды/пересменки/взрывы/простои (через SimData); триггер: - | точность входных параметров | - | обеды/пересменки/взрывы/простои (через SimData) |
| Planner | Планировщик/сольвер/входные данные | автоматически (планировщик) | InputPlanningData/SimData | План → симуляция | Распределение/эффективность | -; триггер: - | качество плана (очередность), время решения | время решения, ограничение памяти | - |
| Point | Класс приложения | - | - | - | - | -; триггер: - | - | - | - |
| Point | Датакласс симдвижка | автоматически (сериализатор) | SimData (из API+БД) | Внутрь симуляции | Динамика моделирования | обеды/пересменки/взрывы/простои (через SimData); триггер: - | точность входных параметров | - | обеды/пересменки/взрывы/простои (через SimData) |
| QSimEnvironment | Класс приложения | - | - | - | - | -; триггер: - | - | - | - |
| Quarry | Карьер | вручную (UI/API) | БД / пользовательский ввод | Сервисы → API/витрины → сериализатор | Состав и параметры домена | CRUD события (create/update/delete); триггер: действия пользователя/интеграции | наполнение справочников, полнота данных | объёмы записей, индексы, время коммита | CRUD события (create/update/delete) |
| Quarry | Класс приложения | - | - | - | - | -; триггер: - | - | - | - |
| QuarryBlastingWatcher | Класс для карьера (Quarry), отслеживающий периоды взрывных работ и формирующий активные зоны | - | - | - | - | -; триггер: - | - | - | - |
| QuarryDAO | Сервис/DAO бизнес-логики | автоматически (код сервиса) | БД/Redis/конфиг | DTO → API | Агрегация/правила | запросы API, построение витрины; триггер: вызовы роутов | SLA ответа API, корректность витрины | латентность, пиковая нагрузка на БД | запросы API, построение витрины |
| QuarryDataDTO | DTO, возвращаемый сервисом — содержит список карьеров в виде словарей. | автоматически (код сервиса) | БД/Redis/конфиг | DTO → API | Агрегация/правила | запросы API, построение витрины; триггер: вызовы роутов | SLA ответа API, корректность витрины | латентность, пиковая нагрузка на БД | запросы API, построение витрины |
| QuarryDataResponse | DTO/валидатор роутов | автоматически (иниц. роутером) | HTTP запрос/ответ | Роуты FastAPI | Контракты API | -; триггер: - | валидность контрактов | - | - |
| QuarryDataService | Сервис, собирающий всю необходимую информацию по карьерам. Возвращает QuarryDataDTO — связи с роутером происходят через DTO. Внутри — DAO для запросов к БД. | автоматически (код сервиса) | БД/Redis/конфиг | DTO → API | Агрегация/правила | запросы API, построение витрины; триггер: вызовы роутов | SLA ответа API, корректность витрины | латентность, пиковая нагрузка на БД | запросы API, построение витрины |
| QuarryObject | Датакласс симдвижка | автоматически (сериализатор) | SimData (из API+БД) | Внутрь симуляции | Динамика моделирования | обеды/пересменки/взрывы/простои (через SimData); триггер: - | точность входных параметров | - | обеды/пересменки/взрывы/простои (через SimData) |
| QuarryRefMixin | Валидация/маппинг входных данных | автоматически (код при CRUD) | HTTP JSON | ObjectService → ORM | Качество/консистентность записи | -; триггер: - | - | - | - |
| QuarrySchema | Валидация/маппинг входных данных | автоматически (код при CRUD) | HTTP JSON | ObjectService → ORM | Качество/консистентность записи | -; триггер: - | - | - | - |
| RawSimDataValidator | Оркестрация запуска симуляции | автоматически (ручной триггер запуска) | Запрос запуска/конфиг | Оркестрация запуска | Успешность запуска | запуск симуляции, завершение батча; триггер: POST /api/run-simulation | время старта, стабильность батчей | время инициализации, масштабирование процессов | запуск симуляции, завершение батча |
| RoadNet | Дорожная сеть | вручную (UI/API) | БД / пользовательский ввод | Сервисы → API/витрины → сериализатор | Состав и параметры домена | CRUD события (create/update/delete); триггер: действия пользователя/интеграции | наполнение справочников, полнота данных | объёмы записей, индексы, время коммита | CRUD события (create/update/delete) |
| RoadNetCleaner | Класс приложения | - | - | - | - | -; триггер: - | - | - | - |
| RoadNetSchema | Валидация/маппинг входных данных | автоматически (код при CRUD) | HTTP JSON | ObjectService → ORM | Качество/консистентность записи | -; триггер: - | - | - | - |
| Route | Класс приложения | - | - | - | - | -; триггер: - | - | - | - |
| Route | Датакласс симдвижка | автоматически (сериализатор) | SimData (из API+БД) | Внутрь симуляции | Динамика моделирования | обеды/пересменки/взрывы/простои (через SimData); триггер: - | точность входных параметров | - | обеды/пересменки/взрывы/простои (через SimData) |
| RouteEdge | Класс приложения | - | - | - | - | -; триггер: - | - | - | - |
| RunSimulationError | Класс приложения | - | - | - | - | -; триггер: - | - | - | - |
| Scenario | Сценарий для моделирования | вручную (UI/API) | БД / пользовательский ввод | Сервисы → API/витрины → сериализатор | Состав и параметры домена | CRUD события (create/update/delete); триггер: действия пользователя/интеграции | наполнение справочников, полнота данных | объёмы записей, индексы, время коммита | CRUD события (create/update/delete) |
| ScenarioDAO | Сервис/DAO бизнес-логики | автоматически (код сервиса) | БД/Redis/конфиг | DTO → API | Агрегация/правила | запросы API, построение витрины; триггер: вызовы роутов | SLA ответа API, корректность витрины | латентность, пиковая нагрузка на БД | запросы API, построение витрины |
| ScenarioDTO | Сервис/DAO бизнес-логики | автоматически (код сервиса) | БД/Redis/конфиг | DTO → API | Агрегация/правила | запросы API, построение витрины; триггер: вызовы роутов | SLA ответа API, корректность витрины | латентность, пиковая нагрузка на БД | запросы API, построение витрины |
| ScenarioObjectService | Сервис/DAO бизнес-логики | автоматически (код сервиса) | БД/Redis/конфиг | DTO → API | Агрегация/правила | запросы API, построение витрины; триггер: вызовы роутов | SLA ответа API, корректность витрины | латентность, пиковая нагрузка на БД | запросы API, построение витрины |
| ScenarioSchema | Валидация/маппинг входных данных | автоматически (код при CRUD) | HTTP JSON | ObjectService → ORM | Качество/консистентность записи | -; триггер: - | - | - | - |
| ScenarioService | Сервис/DAO бизнес-логики | автоматически (код сервиса) | БД/Redis/конфиг | DTO → API | Агрегация/правила | запросы API, построение витрины; триггер: вызовы роутов | SLA ответа API, корректность витрины | латентность, пиковая нагрузка на БД | запросы API, построение витрины |
| ScheduleDAO | DAO для выборки расписания из БД. | автоматически (код сервиса) | БД/Redis/конфиг | DTO → API | Агрегация/правила | запросы API, построение витрины; триггер: вызовы роутов | SLA ответа API, корректность витрины | латентность, пиковая нагрузка на БД | запросы API, построение витрины |
| ScheduleDataRequest | DTO/валидатор роутов | автоматически (иниц. роутером) | HTTP запрос/ответ | Роуты FastAPI | Контракты API | -; триггер: - | валидность контрактов | - | - |
| ScheduleDataResponseDTO | Сервис/DAO бизнес-логики | автоматически (код сервиса) | БД/Redis/конфиг | DTO → API | Агрегация/правила | запросы API, построение витрины; триггер: вызовы роутов | SLA ответа API, корректность витрины | латентность, пиковая нагрузка на БД | запросы API, построение витрины |
| ScheduleDataService | Сервис для получения расписания по дате и смене или временному диапазону. | автоматически (код сервиса) | БД/Redis/конфиг | DTO → API | Агрегация/правила | запросы API, построение витрины; триггер: вызовы роутов | SLA ответа API, корректность витрины | латентность, пиковая нагрузка на БД | запросы API, построение витрины |
| ScheduleItemDTO | Сервис/DAO бизнес-логики | автоматически (код сервиса) | БД/Redis/конфиг | DTO → API | Агрегация/правила | запросы API, построение витрины; триггер: вызовы роутов | SLA ответа API, корректность витрины | латентность, пиковая нагрузка на БД | запросы API, построение витрины |
| ScheduleMixin | Методы для создания/удаления расписаний. Эти методы возвращают JSONResponse (чтобы удобно использовать в FastAPI). | автоматически (код при CRUD) | HTTP JSON | ObjectService → ORM | Качество/консистентность записи | -; триггер: - | - | - | - |
| ScheduleObjectService | Сервис/DAO бизнес-логики | автоматически (код сервиса) | БД/Redis/конфиг | DTO → API | Агрегация/правила | запросы API, построение витрины; триггер: вызовы роутов | SLA ответа API, корректность витрины | латентность, пиковая нагрузка на БД | запросы API, построение витрины |
| Segment | Датакласс симдвижка | автоматически (сериализатор) | SimData (из API+БД) | Внутрь симуляции | Динамика моделирования | обеды/пересменки/взрывы/простои (через SimData); триггер: - | точность входных параметров | - | обеды/пересменки/взрывы/простои (через SimData) |
| ServiceLocator | Класс приложения | - | - | - | - | -; триггер: - | - | - | - |
| ShiftChangeArea | Датакласс симдвижка | автоматически (сериализатор) | SimData (из API+БД) | Внутрь симуляции | Динамика моделирования | обеды/пересменки/взрывы/простои (через SimData); триггер: - | точность входных параметров | - | обеды/пересменки/взрывы/простои (через SimData) |
| ShiftConfigDataException | Ошибки данных (например 'Quarry not found', 'shift not found' и т.п.). | - | - | - | - | -; триггер: - | - | - | - |
| ShiftConfigException | Базовое исключение для ошибок конфигурации смен. | - | - | - | - | -; триггер: - | - | - | - |
| ShiftConfigParseException | Парсинговые ошибки (дата/время и т.п.). | - | - | - | - | -; триггер: - | - | - | - |
| ShiftConfigSchemaException | Ошибки схемы/структуры (оставляем на будущее). | - | - | - | - | -; триггер: - | - | - | - |
| ShiftDetailsDTO | Сервис/DAO бизнес-логики | автоматически (код сервиса) | БД/Redis/конфиг | DTO → API | Агрегация/правила | запросы API, построение витрины; триггер: вызовы роутов | SLA ответа API, корректность витрины | латентность, пиковая нагрузка на БД | запросы API, построение витрины |
| ShiftDTO | Класс приложения | - | - | - | - | -; триггер: - | - | - | - |
| ShiftLogic | Класс приложения | - | - | - | - | -; триггер: - | - | - | - |
| ShiftOffsetsDTO | Класс приложения | - | - | - | - | -; триггер: - | - | - | - |
| Shovel | Экскаватор | вручную (UI/API) | БД / пользовательский ввод | Сервисы → API/витрины → сериализатор | Состав и параметры домена | CRUD события (create/update/delete); триггер: действия пользователя/интеграции | наполнение справочников, полнота данных | объёмы записей, индексы, время коммита | CRUD события (create/update/delete) |
| Shovel | Датакласс симдвижка | автоматически (сериализатор) | SimData (из API+БД) | Внутрь симуляции | Динамика моделирования | обеды/пересменки/взрывы/простои (через SimData); триггер: - | точность входных параметров | - | обеды/пересменки/взрывы/простои (через SimData) |
| Shovel | Класс приложения | - | - | - | - | -; триггер: - | - | - | - |
| ShovelArgsMixin | Валидация/маппинг входных данных | автоматически (код при CRUD) | HTTP JSON | ObjectService → ORM | Качество/консистентность записи | -; триггер: - | - | - | - |
| ShovelArgsMixin | Основные параметры экскаватора для обсчёта симуляции | вручную (UI/API) | БД / пользовательский ввод | Сервисы → API/витрины → сериализатор | Состав и параметры домена | CRUD события (create/update/delete); триггер: действия пользователя/интеграции | наполнение справочников, полнота данных | объёмы записей, индексы, время коммита | CRUD события (create/update/delete) |
| ShovelBlastingWatcher | Класс для экскаватора (Shovel). Отслеживает наличие хотя бы одного возможного маршрута хотя бы до одного ПРа. Если ни одного маршрута нет - исключаем экскаватора из планировщика. Как только появится хотя бы один маршрут - добавим экскаватор в планировщик. | - | - | - | - | -; триггер: - | - | - | - |
| ShovelCalc | Расчётные блоки | автоматически (движок) | ТТХ/события | Расчёт в симуляции | Тайминги/ресурсы | -; триггер: - | точность таймингов, производительность | CPU-интенсивность | - |
| ShovelProperties | Датакласс симдвижка | автоматически (сериализатор) | SimData (из API+БД) | Внутрь симуляции | Динамика моделирования | обеды/пересменки/взрывы/простои (через SimData); триггер: - | точность входных параметров | - | обеды/пересменки/взрывы/простои (через SimData) |
| ShovelSchema | Валидация/маппинг входных данных | автоматически (код при CRUD) | HTTP JSON | ObjectService → ORM | Качество/консистентность записи | -; триггер: - | - | - | - |
| ShovelTemplate | Шаблон экскаватора | вручную (UI/API) | БД / пользовательский ввод | Сервисы → API/витрины → сериализатор | Состав и параметры домена | CRUD события (create/update/delete); триггер: действия пользователя/интеграции | наполнение справочников, полнота данных | объёмы записей, индексы, время коммита | CRUD события (create/update/delete) |
| ShovelTemplateSchema | Валидация/маппинг входных данных | автоматически (код при CRUD) | HTTP JSON | ObjectService → ORM | Качество/консистентность записи | -; триггер: - | - | - | - |
| SimConfigOptionsValidator | Оркестрация запуска симуляции | автоматически (ручной триггер запуска) | Запрос запуска/конфиг | Оркестрация запуска | Успешность запуска | запуск симуляции, завершение батча; триггер: POST /api/run-simulation | время старта, стабильность батчей | время инициализации, масштабирование процессов | запуск симуляции, завершение батча |
| SimConfigValidationError | Ошибка валидации конфигурации симуляции | автоматически (ручной триггер запуска) | Запрос запуска/конфиг | Оркестрация запуска | Успешность запуска | запуск симуляции, завершение батча; триггер: POST /api/run-simulation | время старта, стабильность батчей | время инициализации, масштабирование процессов | запуск симуляции, завершение батча |
| SimContext | Контекст(контейнер) содержащий в себе объекты симуляции | - | - | - | - | -; триггер: - | - | - | - |
| SimData | Датакласс симдвижка | автоматически (сериализатор) | SimData (из API+БД) | Внутрь симуляции | Динамика моделирования | обеды/пересменки/взрывы/простои (через SimData); триггер: - | точность входных параметров | - | обеды/пересменки/взрывы/простои (через SimData) |
| SimDataSerializer | Преобразует входной dict (как в run_simulation) в набор датаклассов. | автоматически (при запуске симуляции) | Комбинация API+БД | SimData → Симулятор | Что попадёт в симуляцию | -; триггер: - | валидность/полнота входа | время сериализации | - |
| SimDataValidationError | Ошибка валидации входных данных симуляции | автоматически (ручной триггер запуска) | Запрос запуска/конфиг | Оркестрация запуска | Успешность запуска | запуск симуляции, завершение батча; триггер: POST /api/run-simulation | время старта, стабильность батчей | время инициализации, масштабирование процессов | запуск симуляции, завершение батча |
| SimulationDAO | Работа с базой данных для симуляции. | автоматически (код сервиса) | БД/Redis/конфиг | DTO → API | Агрегация/правила | запросы API, построение витрины; триггер: вызовы роутов | SLA ответа API, корректность витрины | латентность, пиковая нагрузка на БД | запросы API, построение витрины |
| SimulationManager | Менеджер для управления запуском симуляции в ручном/автоматическом режиме | автоматически (ручной триггер запуска) | Запрос запуска/конфиг | Оркестрация запуска | Успешность запуска | запуск симуляции, завершение батча; триггер: POST /api/run-simulation | время старта, стабильность батчей | время инициализации, масштабирование процессов | запуск симуляции, завершение батча |
| SimulationRequestDTO | Модель запроса для запуска симуляции. | автоматически (код сервиса) | БД/Redis/конфиг | DTO → API | Агрегация/правила | запросы API, построение витрины; триггер: вызовы роутов | SLA ответа API, корректность витрины | латентность, пиковая нагрузка на БД | запросы API, построение витрины |
| SimWriterValidationError | Ошибка валидации писаря результатов симуляции | автоматически (ручной триггер запуска) | Запрос запуска/конфиг | Оркестрация запуска | Успешность запуска | запуск симуляции, завершение батча; триггер: POST /api/run-simulation | время старта, стабильность батчей | время инициализации, масштабирование процессов | запуск симуляции, завершение батча |
| StartEndTimeDTO | DTO содержит времена в UTC. | автоматически (код сервиса) | БД/Redis/конфиг | DTO → API | Агрегация/правила | запросы API, построение витрины; триггер: вызовы роутов | SLA ответа API, корректность витрины | латентность, пиковая нагрузка на БД | запросы API, построение витрины |
| StartEndTimeGenerateService | Генерирует начало/конец рабочего дня в часовом поясе предприятия и возвращает их в UTC. По умолчанию берёт таймзону из окружения TZ, иначе 'UTC'. | автоматически (код сервиса) | БД/Redis/конфиг | DTO → API | Агрегация/правила | запросы API, построение витрины; триггер: вызовы роутов | SLA ответа API, корректность витрины | латентность, пиковая нагрузка на БД | запросы API, построение витрины |
| TelemetryEmitter | Класс приложения | - | - | - | - | -; триггер: - | - | - | - |
| TemplateDAO | DAO для получения моделей из БД. | автоматически (код сервиса) | БД/Redis/конфиг | DTO → API | Агрегация/правила | запросы API, построение витрины; триггер: вызовы роутов | SLA ответа API, корректность витрины | латентность, пиковая нагрузка на БД | запросы API, построение витрины |
| TemplateMixin | Валидация/маппинг входных данных | автоматически (код при CRUD) | HTTP JSON | ObjectService → ORM | Качество/консистентность записи | -; триггер: - | - | - | - |
| TemplateRefMixin | Валидация/маппинг входных данных | автоматически (код при CRUD) | HTTP JSON | ObjectService → ORM | Качество/консистентность записи | -; триггер: - | - | - | - |
| TimeRange | DTO/валидатор роутов | автоматически (иниц. роутером) | HTTP запрос/ответ | Роуты FastAPI | Контракты API | -; триггер: - | валидность контрактов | - | - |
| Trail | Маршрут | вручную (UI/API) | БД / пользовательский ввод | Сервисы → API/витрины → сериализатор | Состав и параметры домена | CRUD события (create/update/delete); триггер: действия пользователя/интеграции | наполнение справочников, полнота данных | объёмы записей, индексы, время коммита | CRUD события (create/update/delete) |
| TrailDTO | Сервис/DAO бизнес-логики | автоматически (код сервиса) | БД/Redis/конфиг | DTO → API | Агрегация/правила | запросы API, построение витрины; триггер: вызовы роутов | SLA ответа API, корректность витрины | латентность, пиковая нагрузка на БД | запросы API, построение витрины |
| TrailSchema | Валидация/маппинг входных данных | автоматически (код при CRUD) | HTTP JSON | ObjectService → ORM | Качество/консистентность записи | -; триггер: - | - | - | - |
| TrailTruckAssociation | Ассоциация (промежуточная m2m модель) между маршрутом и самосвалом | вручную (UI/API) | БД / пользовательский ввод | Сервисы → API/витрины → сериализатор | Состав и параметры домена | CRUD события (create/update/delete); триггер: действия пользователя/интеграции | наполнение справочников, полнота данных | объёмы записей, индексы, время коммита | CRUD события (create/update/delete) |
| TrailType | Класс приложения | - | - | - | - | -; триггер: - | - | - | - |
| TripData | Датакласс симдвижка | автоматически (сериализатор) | SimData (из API+БД) | Внутрь симуляции | Динамика моделирования | обеды/пересменки/взрывы/простои (через SimData); триггер: - | точность входных параметров | - | обеды/пересменки/взрывы/простои (через SimData) |
| TripService | Класс приложения | - | - | - | - | -; триггер: - | - | - | - |
| TripStartTimeNotDefinedException | Класс приложения | - | - | - | - | -; триггер: - | - | - | - |
| Truck | Самосвал | вручную (UI/API) | БД / пользовательский ввод | Сервисы → API/витрины → сериализатор | Состав и параметры домена | CRUD события (create/update/delete); триггер: действия пользователя/интеграции | наполнение справочников, полнота данных | объёмы записей, индексы, время коммита | CRUD события (create/update/delete) |
| Truck | Датакласс симдвижка | автоматически (сериализатор) | SimData (из API+БД) | Внутрь симуляции | Динамика моделирования | обеды/пересменки/взрывы/простои (через SimData); триггер: - | точность входных параметров | - | обеды/пересменки/взрывы/простои (через SimData) |
| Truck | Класс приложения | - | - | - | - | -; триггер: - | - | - | - |
| TruckArgsMixin | Валидация/маппинг входных данных | автоматически (код при CRUD) | HTTP JSON | ObjectService → ORM | Качество/консистентность записи | -; триггер: - | - | - | - |
| TruckArgsMixin | Основные параметры самосвала для обсчёта симуляции | вручную (UI/API) | БД / пользовательский ввод | Сервисы → API/витрины → сериализатор | Состав и параметры домена | CRUD события (create/update/delete); триггер: действия пользователя/интеграции | наполнение справочников, полнота данных | объёмы записей, индексы, время коммита | CRUD события (create/update/delete) |
| TruckBlastingWatcher | Класс для самосвала (Truck) Отслеживает ожидание проведения взрывных работ для самосвала. Если самосвал встал в ожидание - исключим его из планировщика. Если самосвал вышел из ожидания - добавим его в планировщик. | - | - | - | - | -; триггер: - | - | - | - |
| TruckCalc | Расчётные блоки | автоматически (движок) | ТТХ/события | Расчёт в симуляции | Тайминги/ресурсы | -; триггер: - | точность таймингов, производительность | CPU-интенсивность | - |
| TruckProperties | Датакласс симдвижка | автоматически (сериализатор) | SimData (из API+БД) | Внутрь симуляции | Динамика моделирования | обеды/пересменки/взрывы/простои (через SimData); триггер: - | точность входных параметров | - | обеды/пересменки/взрывы/простои (через SimData) |
| TruckSchema | Валидация/маппинг входных данных | автоматически (код при CRUD) | HTTP JSON | ObjectService → ORM | Качество/консистентность записи | -; триггер: - | - | - | - |
| TruckState | Состояния/события/поведения | автоматически (движок) | Внутреннее состояние движка | Цикл симуляции | Переходы и ограничения | переходы состояний, аварии, топливо; триггер: - | - | - | переходы состояний, аварии, топливо |
| TruckTemplate | Шаблон самосвала | вручную (UI/API) | БД / пользовательский ввод | Сервисы → API/витрины → сериализатор | Состав и параметры домена | CRUD события (create/update/delete); триггер: действия пользователя/интеграции | наполнение справочников, полнота данных | объёмы записей, индексы, время коммита | CRUD события (create/update/delete) |
| TruckTemplateSchema | Валидация/маппинг входных данных | автоматически (код при CRUD) | HTTP JSON | ObjectService → ORM | Качество/консистентность записи | -; триггер: - | - | - | - |
| Unload | Пункт разгрузки | вручную (UI/API) | БД / пользовательский ввод | Сервисы → API/витрины → сериализатор | Состав и параметры домена | CRUD события (create/update/delete); триггер: действия пользователя/интеграции | наполнение справочников, полнота данных | объёмы записей, индексы, время коммита | CRUD события (create/update/delete) |
| Unload | Датакласс симдвижка | автоматически (сериализатор) | SimData (из API+БД) | Внутрь симуляции | Динамика моделирования | обеды/пересменки/взрывы/простои (через SimData); триггер: - | точность входных параметров | - | обеды/пересменки/взрывы/простои (через SimData) |
| Unload | Класс приложения | - | - | - | - | -; триггер: - | - | - | - |
| UnloadArgsMixin | Валидация/маппинг входных данных | автоматически (код при CRUD) | HTTP JSON | ObjectService → ORM | Качество/консистентность записи | -; триггер: - | - | - | - |
| UnloadArgsMixin | Основные параметры пункта разгрузки для обсчёта симуляции | вручную (UI/API) | БД / пользовательский ввод | Сервисы → API/витрины → сериализатор | Состав и параметры домена | CRUD события (create/update/delete); триггер: действия пользователя/интеграции | наполнение справочников, полнота данных | объёмы записей, индексы, время коммита | CRUD события (create/update/delete) |
| UnloadBlastingWatcher | Класс для пункта разгрузки (Unload). Отслеживает наличие хотя бы одного возможного маршрута хотя бы до одного экскаватора. Если ни одного маршрута нет - исключаем пункт разгрузки из планировщика. Как только появится хотя бы один маршрут - добавим пункт разгрузки в планировщик. | - | - | - | - | -; триггер: - | - | - | - |
| UnloadCalc | Расчётные блоки | автоматически (движок) | ТТХ/события | Расчёт в симуляции | Тайминги/ресурсы | -; триггер: - | точность таймингов, производительность | CPU-интенсивность | - |
| UnloadSchema | Валидация/маппинг входных данных | автоматически (код при CRUD) | HTTP JSON | ObjectService → ORM | Качество/консистентность записи | -; триггер: - | - | - | - |
| UnloadState | Состояния/события/поведения | автоматически (движок) | Внутреннее состояние движка | Цикл симуляции | Переходы и ограничения | переходы состояний, аварии, топливо; триггер: - | - | - | переходы состояний, аварии, топливо |
| UnloadTemplate | Шаблон пункта разгрузки | вручную (UI/API) | БД / пользовательский ввод | Сервисы → API/витрины → сериализатор | Состав и параметры домена | CRUD события (create/update/delete); триггер: действия пользователя/интеграции | наполнение справочников, полнота данных | объёмы записей, индексы, время коммита | CRUD события (create/update/delete) |
| UnloadTemplateSchema | Валидация/маппинг входных данных | автоматически (код при CRUD) | HTTP JSON | ObjectService → ORM | Качество/консистентность записи | -; триггер: - | - | - | - |
| UnloadType | Класс приложения | - | - | - | - | -; триггер: - | - | - | - |
| UnlProperties | Датакласс симдвижка | автоматически (сериализатор) | SimData (из API+БД) | Внутрь симуляции | Динамика моделирования | обеды/пересменки/взрывы/простои (через SimData); триггер: - | точность входных параметров | - | обеды/пересменки/взрывы/простои (через SimData) |
| UpdateLocationRequest | DTO/валидатор роутов | автоматически (иниц. роутером) | HTTP запрос/ответ | Роуты FastAPI | Контракты API | -; триггер: - | валидность контрактов | - | - |
| UploadedFile | Загруженный файл | вручную (UI/API) | БД / пользовательский ввод | Сервисы → API/витрины → сериализатор | Состав и параметры домена | CRUD события (create/update/delete); триггер: действия пользователя/интеграции | наполнение справочников, полнота данных | объёмы записей, индексы, время коммита | CRUD события (create/update/delete) |
| ValidatorValidationError | Ошибка валидации валидатора, используемого в менеджере | автоматически (ручной триггер запуска) | Запрос запуска/конфиг | Оркестрация запуска | Успешность запуска | запуск симуляции, завершение батча; триггер: POST /api/run-simulation | время старта, стабильность батчей | время инициализации, масштабирование процессов | запуск симуляции, завершение батча |

